<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>
<meta http-equiv="Content-type" content="text/html; charset=UTF-8"><title>Plone Theme Reference — Plone CMS: Open Source Content Management</title><!-- base href="http://plone.org/documentation/manual/theme-reference/" --><link rel="alternate" type="application/rss+xml" href="http://feeds.plone.org/plonenews" title="Plone News"><link rel="alternate" type="application/rss+xml" href="http://feeds.plone.org/plonereleases" title="Plone Releases"><link rel="alternate" type="application/rss+xml" href="http://feeds.plone.org/ploneevents" title="Upcoming Plone Events"><link rel="alternate" type="application/rss+xml" href="http://feeds.plone.org/ploneaddons" title="Latest Plone &amp; Add-on Releases"><link rel="alternate" type="application/rss+xml" href="http://feeds.plone.org/plonetraining" title="Upcoming Plone Training"><link rel="alternate" type="application/rss+xml" href="http://feeds.plone.org/ploneblogs" title="Plone Blogs"><link rel="alternate" type="application/rss+xml" href="http://feeds.plone.org/plone-security" title="Plone Security Advisories"><!--[if IE]><style type="text/css" media="all">@import url(/ie.css);</style><![endif]--><!--[if lte IE 6]><script src="/ie6warn.js" type="text/javascript"></script><![endif]--><script src="plone-theme-references_archivos/ga.js" type="text/javascript"></script><script type="text/javascript" src="plone-theme-references_archivos/jquery-cachekey7059.js"></script><script type="text/javascript" src="plone-theme-references_archivos/popupforms-cachekey4563.js"></script><script type="text/javascript" src="plone-theme-references_archivos/resourcecioppino.js"></script><style type="text/css">@import url(http://plone.org/portal_css/Sunburst%20Theme/print-cachekey3245.css);</style><style type="text/css">@import url(http://plone.org/portal_css/Sunburst%20Theme/newplone-cachekey7635.css);</style><style type="text/css" media="screen">@import url(http://plone.org/portal_css/Sunburst%20Theme/resourceplone.app.jquerytools.overlays-cachekey5924.css);</style><style type="text/css" media="screen">@import url(http://plone.org/portal_css/Sunburst%20Theme/resourceProducts.PloneSoftwareCenter.stylesheetspsc-cachekey4912.css);</style><style type="text/css" media="all">@import url(http://plone.org/portal_css/Sunburst%20Theme/psc-cachekey1695.css);</style><style type="text/css">@import url(http://plone.org/portal_css/Sunburst%20Theme/resourcecioppino.twothumbs.stylesheetstwothumbs-cachekey0775.css);</style><link rel="kinetic-stylesheet" type="text/css" href="http://plone.org/portal_kss/Sunburst%20Theme/resourcetinymce.ksstinymce-cachekey4684.kss"><link rel="kinetic-stylesheet" type="text/css" href="http://plone.org/portal_kss/Sunburst%20Theme/at-cachekey2728.kss"></head><body class="template-referencemanual-all-pages portaltype-helpcenterreferencemanual section-documentation"><div id="outer-wrapper"><div id="inner-wrapper"><div id="nav"><a id="portal-logo" title="Home" accesskey="1" href="http://plone.org/">
    <img src="plone-theme-references_archivos/logo.png" alt="" title="" height="56" width="215"></a><form id="search" name="searchform" action="http://plone.org/search"><input value="Search this site…" id="search-site" name="SearchableText" title="Search this site…" accesskey="4" class="inputLabel inputLabelActive" size="15" type="text"></form><div id="nav-bar"><div id="user"><a id="login-link" href="http://plone.org/login">Log in</a><a id="user-id" href="http://plone.org/@@personal-preferences"><span id="username"></span></a><div id="login-popup"><span class="loginText">Login to Plone.org</span><form id="login-slide-form" action="https://plone.org/login_form" method="post"><div class="form"><input id="came-from-input" value="" name="came_from" type="hidden"><input name="form.submitted" value="1" type="hidden"><label for="__ac_name">username</label><input id="__ac_name" name="__ac_name" size="15" type="text"><label for="__ac_password">password</label><input id="__ac_password" value="" name="__ac_password" size="15" type="password"><br><a href="http://plone.org/mail_password_form?userid=">Forgot password?</a></div><input value="Let me in!" name="submit" class="context" type="submit"></form><span class="createText"><a href="http://plone.org/@@register">Click here</a> to create an account</span></div></div><ul id="main-nav" class="navigation"><li id="portaltab-index_html" class="plain"><a href="http://plone.org/" title="">Home</a></li><li id="portaltab-products" class="plain"><a href="http://plone.org/products" title="Plone releases and available add-on products for Plone. Make sure you have Plone installed before downloading the add-ons — and make sure you are using add-ons that have been certified for use with your particular version.">Download &amp; Extend</a></li><li id="portaltab-documentation" class="selected"><a href="http://plone.org/documentation" title="The primary source for Plone documentation.">Documentation</a></li><li id="portaltab-contribute" class="plain"><a href="http://plone.org/contribute" title="Contains all developer-related material.">Get Involved</a></li><li id="portaltab-foundation" class="plain"><a href="http://plone.org/foundation" title="The Plone Foundation exists to further the development, marketing, and legal affairs of Plone and the Plone community.">Plone Foundation</a></li><li id="portaltab-support" class="plain"><a href="http://plone.org/support" title="Support and contact details for the Plone project.">Support</a></li><li id="portaltab-providers" class="plain"><a href="http://plone.org/providers" title="">Providers</a></li></ul></div><ul id="sub-nav" class="navigation"><li>
            <a href="http://plone.org/documentation/manual" class="selected" title="Manuals are larger works of documentation describing particular technologies or concepts in a detailed, structured manner.">Manuals</a>
        </li>
        <li>
            <a href="http://plone.org/documentation/kb" title="Community-contributed tutorials and how-tos.">Knowledge Base</a>
        </li>
        <li>
            <a href="http://plone.org/documentation/faq" title="Frequently Asked Questions.">FAQs</a>
        </li>
        <li>
            <a href="http://plone.org/documentation/error" title="Error reference section.">Error Reference</a>
        </li>
        <li>
            <a href="http://plone.org/documentation/link" title="Links section.">Links</a>
        </li>
        <li>
            <a href="http://plone.org/documentation/glossary" title="Glossary of terms for Plone.">Glossary</a>
        </li>
    </ul></div><div id="edit-bar"><div id="action-menu"></div><div id="edit-menu"></div></div><div id="content-wrapper"><div class="grid-row"><div class="grid-cell position-leftmost width-two-thirds"><div id="viewlet-above-content"></div><div id="content">
            <div>

                <h1>
                    Plone Theme Reference
                </h1>

                <p class="discreet visualNoPrint">
                    <a href="http://plone.org/documentation/manual/theme-reference">« Return to page index</a>
                </p>

                <p class="documentDescription">Plone Theme Reference</p>

                
    
        <div class="referenceManualCollation depth-1">

            <h1>
                1.
                Introduction
            </h1>

            <p class="documentDescription">Aims, prerequisites, an overview of the manual and a quick definition of what a Plone theme is.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-2">

            <h1>
                1.1.
                Aims and Prerequisites
            </h1>

            <p class="documentDescription">The
aim of this manual is to give you an overview of the theory, tools, and
techniques involved in customizing Plone's look and feel or creating
your own theme.</p>
    
            <div>
                
                    <div><h2>Aims</h2>

<p>Don't read this manual from beginning to end. Think of it as a guide
or phrase book to help you get your bearings in the rather complicated
world of Plone themes.</p>

<p>We'll introduce you to the theory, but there's no substitute for
practice; so we'll point you to the many excellent tutorials, books,
and resources on this site and elsewhere, which will walk you through
various aspects of themes for Plone 3. We aim to complement those
resources by filling in gaps, providing brief overviews of theory,
setting things in context, and giving you a quick reference for bits
you find confusing or can't remember clearly from the last time you
tried them out.</p>

<h2 id="toc2">Prerequisites</h2>

<p>This manual is written for integrators and customizers, and we're
not assuming any development experience. We do however imagine that you
are experienced with XHTML and CSS, know a little about XML, and have
some knowledge of scripting languages. We're working from the premise
that you are entirely new to Plone, though if you are familiar with
Plone 2, you'll find one or two new things.</p>

<p>It will help if you have installed Plone and have looked briefly at
the directories that ended up on your file system when you did this. It
is also useful to have investigated the Site Setup link on your Plone
website and to have clicked through to the Zope Management Interface
for a brief look behind the scenes.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                1.2.
                What's a Plone Theme?
            </h1>

            <p class="documentDescription">A brief description of what we're talking about.</p>
    
            <div>
                
                    <div><p>A
theme is a collection of page templates, style sheets, components, and
configuration settings that go to make up the individual look and feel
of a Plone site.</p>

<p>Plone gives you the option of embedding your theme changes and
additions into a single site by working through the web. Or,
alternatively, by packaging your theme into your own product, you can
then install and uninstall it at will and apply it to a number of
sites. There are pros and cons to both approaches, and this manual runs
through them in later sections.</p>

<p>Plone 3 comes with with two themes:</p>

<ul><li> an inbuilt, ready-made theme - Plone Default</li><li> and an additional optional replacement - NuPlone.&nbsp; <br></li></ul><p>Things are somewhat different in Plone 4:</p>

<ul><li>Two themes are available -&nbsp; Plone Classic and Sunburst (with Sunburst being the active theme when you first install Plone)</li><li>Plone
Default still exists as the core on which both Plone Classic and
Sunburst are built and should prove a useful basis for any theme product</li><li>NuPlone has been removed but is still available for download if required</li></ul><p>If you're at all skeptical about what can be achieved, have a look at the wealth of different sites showcased on <a href="http://plone.net/">plone.net</a>  or at the downloadable themes available from the <a href="http://plone.org/documentation/products">Products section</a> of this site.</p>

<p>If you already have a Plone 3 theme and want to know how to upgrade it to work with Plone 4 then the <a title="Plone Upgrade Guide" class="internal-link" href="http://plone.org/documentation/manual/upgrade-guide">upgrade guide</a> has further information and guidance.</p>

<p class="discreet">&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                1.3.
                Overview
            </h1>

            <p class="documentDescription">Here's a quick overview of what this manual covers.</p>
    
            <div>
                
                    <dl><dt>

<div class="image-right"><a href="http://plone.org/documentation/manual/theme-reference/images/mindmap.gif/view">

<img src="plone-theme-references_archivos/image_mini.png" alt="Mindmap of the Reference Manual"></a>

<p>A mind map of the manual, click to enlarge</p>

</div>

Section 1: Introduction</dt>

      <dd>A theme is a distinct look and feel for Plone, which is often based structurally on the out-of-the box Default Plone theme. </dd>

      <dt>Section 2: Approaches</dt>



      <dd>What's the best way to go about it - what are the pros and cons of working through the web or on the file system? </dd>

      <dt>Section 3: Tools</dt>

      <dd>What tools are required and what's available to help you build your theme? </dd>

      <dt> Section 4: Building Blocks</dt>

      <dd>There
are three main building-blocks in a Plone 3 theme. While there are a
few overlaps between them, in general, it helps to see them as discrete
entities.
<ul class="listlevel1WW8Num1"><li>skin </li>

      <li>components </li>

      <li>configuration </li></ul></dd>

      <dd>This section will give you an overview of

<ul class="listlevel1WW8Num1"><li>the terminology involved in each of these building blocks </li>

      <li>the languages you'll need to work with each of them </li>

      <li>the techniques / approaches required to customize these building blocks or create new ones </li>

      <li>how you can locate the files you need </li></ul></dd>

      <dt>Section 5: Putting a Page Together</dt>

      <dd>How is everything pulled together to create a page? We'll look at

<ul class="listlevel1WW8Num1"><li>how a page is constructed </li>

      <li>how content reaches the page </li>



      <li>how style sheets and JavaScript reach the page</li>

      <li>how you can get hold of other information about your site  </li></ul></dd>

      <dt>Sections 6: Elements Reference</dt>

      <dd>There's a quick reference to page elements and a brief summary of how to tackle customization and creation of components. </dd>

      <dt>Section 7: Where is What?</dt>



      <dd>It's
often difficult to identify the location of the files you need. This
section gives you a quick reference to the file layout of a theme
product. There are also pointers to other diagrams on the web which
should help you to map the visual page elements to components,
templates and styles.<br></dd></dl></div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-1">

            <h1>
                2.
                Quick Start
            </h1>

            <p class="documentDescription">Getting started, and some techniques to familiarise yourself with the basics</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-2">

            <h1>
                2.1.
                Overview
            </h1>

            <p class="documentDescription">Once
you have your new shiny Plone site installed and running, the first
thing we recommend you do is try out a few through the web
customizations - changing the font colours and replacing the Plone logo
with your own. </p>
    
            <div>
                
                    <div><p>You probably have greater ambitions than this for the look and



feel of your site, but editing the CSS and replacing the logo is a good way of making a



start in learning theming techniques.</p>

<h2>Prerequisites</h2>

<p>We're assuming that you are familiar with HTML and CSS - although



the very basic customizations outlined here, don't require much



knowledge of that. It will help if, as a manager, you've had a chance



to investigate the Site Setup section of Plone.</p>

<h2>Outline</h2>

<dl><dt>First Sharpen Your Pencils</dt>

<dd>There are a number of tools out there that will make the process of theming Plone a great deal easier, <a class="external-link" href="http://plone.org/documentation/manual/theme-reference/quick-start/sharpen/firefox-mozilla-ui-development-tools">so we run through them here</a>. To see your customizations, you'll also need to be sure that you are running your site in <a class="external-link" href="http://plone.org/documentation/manual/theme-reference/quick-start/sharpen/how-to-make-your-css-changes-take-effect-instantly">debug/development mode</a>.&nbsp;</dd>

<dt>Next Try Some CSS Customizations</dt>

<dd>We'll walk you through the <a class="external-link" href="http://plone.org/documentation/manual/theme-reference/quick-start/change-the-font-colours">process of overriding the page title style</a>,
by customizing and editing the ploneCustom.css style sheet. All of this
is done through-the-web via the Zope Management Interface.</dd>

<dt>Finally Replace the Logo</dt>

<dd>We'll revisit the techniques of customization and CSS editing and expand on them to <a class="external-link" href="http://plone.org/documentation/manual/theme-reference/quick-start/change-the-logo">replace the Plone logo</a> image with your own logo.</dd></dl><p>&nbsp;</p>

<p>&nbsp;</p>

<h2><br></h2></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                2.2.
                Sharpen your Pencils
            </h1>

            <p class="documentDescription">An overview of the tools you'll find useful</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                2.2.1.
                 Firefox/mozilla UI development tools 
            </h1>

            <p class="documentDescription">Firefox and mozilla have a number of extensions that can greatly help your UI development work. A basic set is listed here. </p>
    
            <div>
                
                    <div id="parent-fieldname-text" class="kssattr-atfieldname-text kssattr-templateId-widgets/rich kssattr-macro-rich-field-view">

<p>Using

trusty old "view source" used to be the way to debug bad-looking html.

Now there are mozilla/firefox extensions that make html development

much more productive. A basic set is listed here to get you up to speed.</p>

<dl><dt>Web developer</dt><dd><a href="http://chrispederick.com/work/firefox/webdeveloper/">Web developer</a>

adds a web development toolbar to your firefox with almost everything

you'd want to do or know. CSS info, validation, resizing to test other

screen resolutions, converting POSTs to GETs. <strong>An essential</strong>.</dd><dt>Aardvark</dt><dd><a href="http://www.karmatics.com/aardvark/">Aardvark</a>, when enabled for a page, shows you the class/id information when you hover over an element. Pressing <code>v</code>

for instance, gives you the source for the item you hover over. Start

the demo on their site and experiment with the keystrokes. It is a

lightweight and elegant tool.</dd><dt>ColorZilla</dt><dd><a href="https://addons.mozilla.org/firefox/271/">ColorZilla</a>

is surprisingly handy. It does what the name suggest: providing a color

picker that displays the hex code of the pixel you hover over in the

status bar. There's more: showing the box size of the current box

element; showing the element, class and ID of the current element;

distance between two points. All in the status bar.</dd><dt>FireBug</dt><dd><a href="http://getfirebug.com/">FireBug</a>

constantly displays the number of errors it finds in your page. Handy

during development for finding that mis-spelled css class or the faulty

javascript statement. Also includes some css and source examination,

but aardvark tends to be a bit handier for that.</dd><dt>X-ray</dt><dd>The <a href="https://addons.mozilla.org/en-US/firefox/addon/1802?id=1802">x-ray firefox extension</a>

is pretty handy in figuring out the layout of a plone site. It displays

the tags, the IDs and the classes inline, giving you a surprisingly

good idea of what's happening behind the scenes. </dd><dt>View formatted source</dt><dd><a href="https://addons.mozilla.org/extensions/moreinfo.php?id=697">View formatted



source</a>



gives you a well-rendered view of the page's source. More important,



when you hover over an opening tag, it shows you the css that gets



used for that tag. And with multiple css files (plone anyone?) it



shows them in the order in which they're used (and overwritten).</dd><dt>View source with</dt><dd><a href="https://addons.mozilla.org/firefox/394">View source



with</a> allows you to right-click



on every textarea or source view and select a program to edit/view it



with. A bit like ExternalEditor, but then for <strong>every</strong> textarea. Not



100% developer oriented, but handy for small changes to test css files



in the custom skin folder and so anyway.</dd></dl><h2>Another type of useful gadgets are <strong>bookmarklets</strong>.</h2>

<p>  Two sources of these are http://squarefree.com and http://slayeroffice.com



  See for example:</p>

<dl><dt>Web development bookmarklets</dt><dd>The <a href="http://www.squarefree.com/bookmarklets/webdevel.html">Web development bookmarklets</a> 



provide the same kind of functionality as the web developer toolbar. 



The <a href="http://www.squarefree.com/shell/">JavaScript Shell</a>



and <a href="http://www.squarefree.com/jsenv/">JavaScript Development Environment</a>



deserve mention.</dd><dt>Mouse-over DOM Inspector</dt><dd>The <a href="http://slayeroffice.com/tools/modi/v2.0/modi_help.html">Mouseover DOM Inspector</a>



, or MODI for short, is a favelet (also known as a bookmarklet) that 



allows you to view and manipulate the DOM of a web page simply by mousing around the document.</dd><dt>Javascript Object Tree Favelet</dt><dd>The 



<a href="http://slayeroffice.com/?c=/content/tools/js_tree.html">Javascript Object Tree Favelet</a>

will overlay your current document with a DIV element containing a

collapsed list of all the javascript object types currently referenced

by the page, from functions to strings to booleans and all else that

falls between.</dd><dt>Favelet Suite</dt><dd>This is a <a href="http://slayeroffice.com/?c=/content/tools/suite.html">favelet that combines most of [the slayeroffice] development favelets</a>

. When invoked, a div element will appear in the top left corner of

your browser window with a list of all the favelets I've included.

Simply click the link you want to invoke the favelet.

</dd></dl></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                2.2.2.
                 How to Make Your CSS Changes Take Effect Instantly 
            </h1>

            <p class="documentDescription">How
to ensure that any CSS changes you make can be seen instantly. This is
the most common problem themers run into when they are new to Plone. </p>
    
            <div>
                
                    <div><h2>Enabling development mode</h2>

<p>Before beginning any CSS customization you should turn on



debug-/development mode. This will guarantee that caching and



compression of CSS is disabled. This will also ensure that you can see your changes in real time, after refreshing your browser.</p>

<p>Here is how you enable



debug-/development mode:</p>

<ol><li>log on to your Plone site as the 'admin' user<br></li><li>add '/manage' to the URL to access the ZMI</li><li>navigate to <strong>ZMI &gt; portal_css</strong></li></ol><p>In Plone 3:</p>

<ol><li>click the Debug/development mode checkbox</li><li>click the "Save" button</li></ol><p>In Plone 4:</p>

<ol><li>make sure the Development mode checkbox is clicked - if you've
started your Zope instance in development mode then this will
automatically be checked<br></li><li>click the "Save" button</li></ol><p class="callout">When you are finished making your CSS modifications



you should disable debug-/development mode as it does impact the



performance of your Plone site.</p></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                2.3.
                Change the Font Colours
            </h1>

            <p class="documentDescription">How to change the font colours - a through-the-web approach.</p>
    
            <div>
                
                    <div><p>You'll be introduced to some very simple techniques here for through-the-web customizations of Plone's CSS.</p>

<ul><li>How to locate the styles you want to change</li>

<li>How to override these styles using the ploneCustom.css style sheet</li>

</ul><p>In this case we'll change the colour of page titles from black to turquoise.</p>

<h2>Before you start</h2>

<p>For convenience, Plone themes often comprise a number of separate
style sheets, but for speed and efficiency, in production mode, Plone
has a mechanism (portal_css) for packaging these up into just one or
two files.</p>

<p>You'll need to disable this when making changes to your site or
customizing CSS. So make sure you've followed the instructions on how
to put your site into <a class="external-link" href="http://plone.org/documentation/manual/theme-reference/quick-start/sharpen/how-to-make-your-css-changes-take-effect-instantly">development/debug mode</a>.</p>

<h2>Locating the styles you want to change</h2>

<ul><li>If you don't already have a page in your Plone site, add one, save it and inspect it in view mode.</li>

<li>Use <a class="external-link" href="http://plone.org/documentation/manual/theme-reference/quick-start/sharpen/firefox-mozilla-ui-development-tools">Firebug, or a similar tool,</a> to locate the class name of the page title - in this case its h1.documentFirstHeading.</li>

</ul><h2>Locating the ploneCustom.css style sheet</h2>

<p>As a matter of course, the last style sheet to load on every Plone
page is ploneCustom.css. You'll see this if you inspect the HTML head
tag of your page using Firebug. If you dig further, you'll probably
find that this style sheet is completely empty. By the rules of
precedence in the CSS Cascade, any styles in this sheet will override
styles specified in the preceding sheets. So you have a "blank sheet"
here for your own customizations.</p>

<p>The trick now is to locate this file, so that you can make it available for editing.</p>

<ul><li>To make life easier for yourself, you might like to open a
second tab or browser window at this point - you can then quickly
switch back to the first tab to see your changes.</li>

<li>Go to Site Setup &gt; Zope Management Interface and click portal_skins</li>

<li>Use the Find option in the tabs across the top to locate ploneCustom.css:</li>

<ul><li>Type <i>ploneCustom.css</i> in the "with ids:" box and click Find</li>

<li>You may get more than one result, it doesn't matter which you
choose to click on, however best practice is to choose the one flagged
with the red asterisk.</li>

</ul></ul><h2>Customizing and Editing ploneCustom.css</h2>

<p>When you click on ploneCustom.css you'll find that you can't edit
it. The next stage is to put the ploneCustom.css in a place where it
can be edited. You'll see a Customize option just above the grey text
area, click the Customize button and you'll find that the style sheet
has been automatically copied to portal_skins/custom.</p>

<p>You're now free to edit the file as you like. To change the colour of our page titles, add:</p>

<pre>h1.documentFirstHeading {
Â&nbsp;Â&nbsp;Â&nbsp; color: #0AAE95;
}
</pre>

<p>and save.</p>

<p>If you've installed Plone 4 with the Sunburst theme, the
ploneCustom.css comes with a number of commented out pre-packaged
styles that you might like to experiment with. You can override the
layout styles to a fixed width and alter the colours of the links.</p>

<h2>Rolling back your changes</h2>

<p>You've got a couple of options for reverting back to the original CSS:</p>

<ul><li>comment out your styles in the ploneCustom.css - the usual CSS commenting syntax applies</li>

<li>delete (or, if you want to keep a note of what you did, rename) your version of ploneCustom.css, you'll find it here:</li>

<ul><li>Site Setup &gt; Zope Management Interface &gt; portal_skins &gt; custom </li>

<li>you can choose the delete or rename options - try renaming to ploneCustom.css.old</li>

<li>you can then go back to the beginning of the process of locating and customizing ploneCustom.css</li>

</ul></ul><h2>Further Information</h2>

<p>You've actually encountered two types of customization here.</p>

<ol><li>The first is a standard method of using order of precedence - the Cascade - to overwrite CSS styles as they reach the browser.</li>

<li>The second is a Plone/Zope specific method of overriding the style
sheets themselves by dropping them into the custom folder of
portal_skins. This method can also be used for templates and other
resources and is explained in more <a class="external-link" href="http://plone.org/documentation/manual/theme-reference/buildingblocks/skin/layers/precedence">depth in the section on Skin Layers</a> in this manual.</li>

</ol><p>More advanced techniques, including incorporating your own style sheets into a theme product, are covered later in this manual.</p>

<p>You can find out more about how the CSS Registry (portal_css) packages up the style sheets to deliver them to the page in the <a class="external-link" href="http://plone.org/documentation/manual/theme-reference/page/css/overview">Templates and Components to Page</a> section of this manual.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                2.4.
                Change the Logo
            </h1>

            <p class="documentDescription">How to substitute the standard Plone logo with your own logo - a through-the-web approach.</p>
    
            <div>
                
                    <div><h2>The Basics</h2>

<p>
In Plone 3 and 4, the logo is simply an image with a link to the home
page of your site wrapped around it (there's just one small difference
between versions, the name is logo.jpg in Plone 3, logo.png in Plone 4).</p>

<pre><span class="nodeLabelBox repTarget">&lt;<span class="nodeTag">a</span><span class="nodeAttr editGroup">&nbsp;<span class="nodeName editable">id</span>="<span class="nodeValue editable">portal-logo</span>"</span><span class="nodeAttr editGroup">&nbsp;<span class="nodeName editable">href</span>="<span class="nodeValue editable">http://[your site]</span>"</span><span class="nodeAttr editGroup">&nbsp;<span class="nodeName editable">accesskey</span>="<span class="nodeValue editable">1</span>"</span><span class="nodeBracket editable insertBefore">&gt;

</span>    &lt;<span class="nodeTag">img</span><span class="nodeAttr editGroup">&nbsp;<span class="nodeName editable">width</span>="<span class="nodeValue editable">252</span>"</span><span class="nodeAttr editGroup">&nbsp;<span class="nodeName editable">height</span>="<span class="nodeValue editable">57</span>"</span><span class="nodeAttr editGroup">&nbsp;<span class="nodeName editable">title</span>="<span class="nodeValue editable">Plone</span>"</span><span class="nodeAttr editGroup">&nbsp;<span class="nodeName editable">alt</span>="<span class="nodeValue editable"></span>"</span><span class="nodeAttr editGroup">&nbsp;<span class="nodeName editable">src</span>="<span class="nodeValue editable">http://[your site]/logo.jpg</span>"</span><span class="nodeBracket editable insertBefore">/&gt;

</span></span><span class="nodeCloseLabelBox repTarget">&lt;/<span class="nodeTag">a</span>&gt;</span></pre>

<div class="nodeCloseLabel">

<p><span class="nodeCloseLabelBox repTarget">

If you're happy with this approach, then you won't need to touch the

HTML </span><span class="nodeCloseLabelBox repTarget">as all the attributes in this snippet are generated automatically. </span><span class="nodeCloseLabelBox repTarget">Follow the instructions in Section 1: Changing the Image and its Title.</span></p>

<p><span class="nodeCloseLabelBox repTarget">If you just want to tweak the styles a little bit, then go to Section 2: Changing the portal_logo style.<br></span></p>

</div>

<p>

If you would rather deliver your logo in a different fashion and need

to rewrite the HTML, then you can do this by customizing the logo

template, follow the instructions in Section 3: Changing the HTML.</p>

<h2>1. Changing the Image and its Title<br></h2>

<p>The logo image - logo.jpg (Plone 3) logo.png (Plone 4) - can be found in the plone_images folder in portal_skins. The quickest

way to replace this is simply to upload your own image and give it the

same name:</p>

<ul><li>Go to the Zope Management Interface (Site Setup &gt; Zope Management Interface)</li><li>Go to portal_skins &gt; plone_images</li><li>Click logo.jpg (Plone 3) or logo.png (Plone 4) and then click the customize button</li><li>Now replace the image by clicking the browse button and choosing your own image from your file system</li><li>Edit the Title field (this will ensure that the title attribute changes in the HTML)</li><li>Save your changes and refresh your browser to see the changes on your site</li></ul><h3>Alternative Approach (Plone 3 only)<br></h3>

<p>

The name (ID) of the logo image is specified in base_properties

- a list of useful values that, in Plone 3, are picked up and used across the Plone

Default theme style sheets. This gives you the ability to upload your

own logo image, give it any name you like, and then customize the

base_properties with that name.</p>

<ul><li>Go to the Zope Management Interface (Site Setup &gt; Zope Management Interface)</li><li>Make sure that you've switched your css registry to debug mode (portal_css)</li><li>Go to portal_skins &gt; custom and choose Image from the drop down list on the right</li><li>Upload your own image giving it an ID and a Title e.g.:<br><pre>ID = MyLogo.jpg
Title = My Logo</pre>

</li><li>Go to portal_skins &gt; plone_styles, click base_properties and then click the customize button<br></li><li>You'll now have a customized version of base_properties in the custom folder of portal_skins which you

can change as you like. Find the logoName field and replace the

value <em>logo.jpg</em> with the ID you gave your image (if you gave your ID a

.jpg or .gif suffix, make sure you include that, and remember that it is case-sensitive) e.g.:<br><pre>logoName = MyLogo.jpg</pre>

</li><li>Save your changes and refresh your browser</li></ul><p>In Plone 4 base_properties still exists but has only a very limited use.</p>

<p class="discreet"><strong>Note</strong> that when you go back to your customized base_properties in

portal_skins &gt; custom, it will look like an empty folder. Click the

properties tab to get back to the list of properties.</p>

<h2>2. Changing the portal_logo style<br></h2>

<p>There are no styles set for <em>#portal-logo</em>, but there are some for <em>#portal-logo img</em>

in basic.css. Use the Firebug extension for Firefox to investigate

these. The simplest approach is to override these with your own styles

in ploneCustom.css.</p>

<ul><li>Go to the Zope Management Interface (Site Setup &gt; Zope Management Interface)</li><li>Make sure you have debug mode / development mode turned on in the CSS Registry (portal_css)</li><li>Click portal_skins &gt; plone_styles &gt; ploneCustom.css and then click the Customize button</li><li>You will now have an editable version of ploneCustom.css in the custom folder of portal_skins</li><li>Add your own styles here, click Save, and refresh your browser to see the changes<br></li></ul><h2>3. Changing the HTML</h2>

<p>

The HTML for the logo is generated by logo.pt - a page template which

is part of a viewlet called plone.logo. To customize this through

the web, you'll need to use portal_view_customizations.</p>

<ul><li>Go to the portal_view_customizations in the Zope Management Interface (Site Setup &gt; Zope Management Interface)</li></ul><ul><li>Click plone.logo and then click the Customize button<br></li><li>You'll

now have a template you can rewrite - we've highlighted the significant

bits in the theory section below and given you a couple of examples to

get you started.</li><li>Save your changes and refresh your browser to see them</li></ul><p class="discreet"><strong>Note</strong>: if you want to go back and make

further changes later, you'll see that plone.logo is highlighted in the

portal_view_customizations list, click on it to edit it. If you want to

remove your customizations completely, use the contents tab of

portal_view_customizations, tick the box next to your template and

click Delete.</p>

<h3>The Theory</h3>

<p>Here's the logo.pt template. It is written in the templating

language used by Plone - TAL (or ZPT). It helps to know this (and it

doesn't take long to learn), but we'll talk you through this example:</p>

<pre>&lt;a metal:define-macro="portal_logo"
&nbsp;&nbsp; id="portal-logo"
&nbsp;&nbsp; accesskey="1"
&nbsp;&nbsp; <strong>tal:attributes="href view/navigation_root_url"</strong>
&nbsp;&nbsp; i18n:domain="plone"&gt;
&nbsp;&nbsp;&nbsp; &lt;img src="logo.jpg" alt=""
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>tal:replace="structure view/logo_tag"</strong> /&gt;
&lt;/a&gt;</pre>

<p>

First we have the link tag:</p>

<p>You can disregard <em>metal:define-macro="portal_logo" </em>this is just wrapping the code into something that can be re-used again if necessary.</p>

<p>The

important bit is <em>tal:attributes="href view/navigation_root_url"</em>, this

is the code that supplies your site URL to the href attribute.</p>

<p>There is

a magic variable here, <em>view/navigation_root_url, </em>that seems to have appeared from nowhere.

In fact, <em>view</em> is a collection of properties computed by the plone.logo

viewlet and seamlessly passed to the logo.pt template. Here are the available properties:</p>

<dl><dt>navigation_root_url</dt><dd>

supplies the URL of your site (it could potentially be something different if you've set up a different navigation root)</dd><dt>

logo_tag</dt><dd>

looks up the name of the logo image from base_properties, finds the

image, collects its dimensions and title and turns all of this into an

HTML image tag with the appropriate attributes Check back to the

alternative approach in Section 1 of this How To for more information

about base_properties. <br></dd><dt>

portal_title</dt><dd>

looks up and supplies the title of your site</dd></dl><p>

Now look at the image tag in the template.</p>

<p>The key here is

<em>tal:replace="structure view/logo_tag"</em>. This means that the template won't deliver the

image tag actually written out here, instead, it will <strong>replace the whole

thing</strong> with the tag generated by the plone.logo viewlet. If you don't want this to happen, then you should delete this line.</p>

<p class="discreet">Note: <em>structure</em> means treat the value as HTML rather than a text string.</p>

<h3>Example 1: A plain text title<br></h3>

<p>

Here's a customized version of the template, using

<em>view/portal_title</em> rather than <em>view/logo_tag</em>, to give you a text header instead

(if you've used Plone 2, then you might recognize this):</p>

<pre>&lt;h1 metal:define-macro="portal_logo"
&nbsp;&nbsp; id="portal-logo"&gt;
&nbsp;&nbsp; &lt;a accesskey="1"
&nbsp;&nbsp; tal:attributes="href view/navigation_root_url"
&nbsp;&nbsp; i18n:domain="plone" <strong>tal:content="view/portal_title</strong>"&gt;
&nbsp;&nbsp;&nbsp; &lt;/a&gt;
&lt;/h1&gt;</pre>

<p>Of course you'll want to supply your own styles, look back at

Section 2 of this How To for information on defining these in

ploneCustom.css. You could adjust this example to use an accessible

image replacement technique in your CSS.</p>

<h3>Example 2: Supplying your own image tag</h3>

<p>You don't have to use logo_tag if you don't want to:</p>

<pre>&lt;a metal:define-macro="portal_logo"
&nbsp;&nbsp; id="portal-logo"
&nbsp;&nbsp; accesskey="1"
&nbsp;&nbsp; tal:attributes="href view/navigation_root_url"
&nbsp;&nbsp; i18n:domain="plone"&gt;
&nbsp;&nbsp;&nbsp; <strong>&lt;img src="[My logo ID]" alt="[My Logo]"

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="nodeLabelBox repTarget"><span class="nodeAttr editGroup"><span class="nodeName editable">width</span>="<span class="nodeValue editable">[My Width]</span>"</span><span class="nodeAttr editGroup">&nbsp;<span class="nodeName editable">height</span>="<span class="nodeValue editable">[My Height]</span>"</span><span class="nodeAttr editGroup"> <span class="nodeName editable">

         tal:attributes="title view/portal_title"</span><span class="nodeValue editable"></span></span></span> /&gt;</strong>
&lt;/a&gt;</pre>

<p>

You will, of course, need to upload your own logo to the custom folder

in portal_skins, see the instructions in Section 1 of this How To.</p>

<h2>Further Information</h2>

<ul><li>There are further How Tos in the Logo section of the Plone documentation dealing with more advanced customization methods.</li><li>More guidance on TAL and ZPT can be found in the ZPT tutorial.<br></li><li>If
you want to transfer your changes to the file system in your own theme
product, then the further sections in this reference manual will give
you an outline of the files and templates you'll need (<a title="Page Elements" class="internal-link" href="http://plone.org/documentation/manual/theme-reference/elements">Logo viewlet section</a>).</li></ul><p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-1">

            <h1>
                3.
                Approaches
            </h1>

            <p class="documentDescription">There
are different ways of tackling Plone themes. Here is information to
help you make a decision on your approach - whether to base your theme
on existing structures, whether to work through the web or on the
filesystem, whether you even need this manual.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-2">

            <h1>
                3.1.
                From Scratch or Based on Plone Default?
            </h1>

            <p class="documentDescription">It is perfectly possible to build your own Plone theme completely from scratch, but you probably won't want to do this. </p>
    
            <div>
                
                    <div><h2 id="toc2">Based on Plone Default?</h2>

<p>In particular, the bells and whistles of the Plone editing interface
are wrapped up as part of the out-of-the box Plone Default, and you'll
probably want to keep these.</p>

<p>The good news is that you can <strong>base</strong> your own theme
on Plone Default and interweave your bits of templates, styles, scripts
and components with what's already there. There are three ways of doing
this:</p>

<ul><li>with the Skin building block you <strong>customize </strong>the Plone Default bits (there's a neat way of doing this which ensures you leave the Plone Default theme completely intact)<br></li><li>with the Components building block you <strong>build your own</strong>, but you can <strong>reuse</strong> bits of the Plone Default  components in the process</li><li>with the Configuration you simply <strong>add new </strong>directives<br></li></ul><p>There's
more good news - the elements of a Plone theme are broken up into very
small parts. Each one can be dealt with independently of the others, so
you can home in on just the bits you want to change.The price of all
this flexibility is that it is sometimes difficult to track down
exactly which bit you want, and things can start to seem complicated.
This manual should help with that.</p>

<p>You can change a great deal of the look and feel just by overwriting
existing CSS styles, or by rewriting some of the existing style sheets.
However, if you want to start moving page elements around or rewriting
some of the XHTML, then you'll need to delve into the templates,
components, and configuration in more detail.</p>

<p>In the end, you're likely to come up with a theme based on Plone
Default (that is, based structurally, not necessarily visually). This
will probably contain</p>

<ul class="listlevel1WW8Num1"><li>your own style sheet; or rewrites of some of the Plone CSS </li>

      

      

      

      <li>some rearrangement of page elements<br></li>

      

      <li>a few rewrites of some page elements<br></li><li>a few 'new' page  elements  </li></ul><p>&nbsp;</p>

<dl></dl></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                3.2.
                Through the Web or on the File System?
            </h1>

            <p class="documentDescription">How to decide whether to build your theme through the web or on the file system.</p>
    
            <div>
                
                    <div><p>Sooner
or later with Plone you'll be faced with a decision. Plone is
sufficiently flexible that there is often more that one way of doing
things, and the conundrum is, usually, not <em>how</em> to do it, but <em>which way</em>.</p>

<p>You can customize Plone Default through the web very easily -
particularly the skin and the configuration building blocks; further
sections of this manual will point you in the direction of the relevant
places in the Zope Management Interface to do this. However, if you
want to move these customizations to a new site, undertake quite
extensive customizations, or build a completely new theme, then it is
advisable to move your work to the file system.</p>

<p>In this case you will need to create an installable module (also
known as a theme product or&nbsp; egg). This can be a daunting
prospect, but there are tools available to simplify this process,
providing you with a ready-made package into which to drop all the
elements of your theme building blocks. We explain these tools on the
next few pages.</p>

<p>If you are just starting out, then it is a good idea to get familiar
with the building blocks and techniques by working through the web. It
isn't difficult to move what you've done to the file system later. Once
you start rewiring or moving components around you'll find the file
system a more convenient way to work.</p>

<h2 id="toc1">Through the Web</h2>

















<table id="Table17Ctable" class="grid"><thead><tr><th>Pros</th><th>Cons</th></tr></thead><tbody><tr><td>Quick and easy</td><td>Difficult to replicate or move from one site to another</td></tr><tr><td>Results immediately visible</td><td>Large customizations can get complicated</td></tr><tr><td><br></td><td>Some customizations of components aren't possible (e.g. can't move viewlets between viewlet managers)</td></tr></tbody></table><h2 id="toc2">On the File System</h2>

















<table id="Table27Ctable" class="grid"><thead><tr><th>Pros</th><th>Cons</th></tr></thead><tbody><tr><td>Portable and reusable</td><td>Steeper learning curve when you first start out</td></tr><tr><td>Complete flexibility, can write your own viewlets and portlets</td><td>Need access to the file system</td></tr><tr><td>Bundles your changes up into your own theme / skin</td><td>Will sometimes need to restart to see changes</td></tr></tbody></table></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                3.3.
                Future Directions
            </h1>

            <p class="documentDescription">This
reference manual outlines the current approach to Plone themes. But you
may as well know now that there are other, perhaps simpler, approaches
on the horizon.</p>
    
            <div>
                
                    <div><p>Plone
theming is getting a bit complicated. So the Plone community, in its
inimitable and energetic way, is already exploring different solutions
to the âtheme problemâ.</p>

<p>Things move fast. At the time of writing, some of the solutions
listed below are probably not mature enough to use in earnest,
particularly if you are just starting out. However, you might want to
investigate them to see how theyâre progressing:</p>

<h2>Out of the Box Themes</h2>

<p>A sprint and ongoing project to generate themes that will ship with
out-of-the box Plone, and to brainstorm on other ways to improve the
Plone theming story</p>

<ul><li><a href="http://www.openplans.org/projects/ootb-plone-themes/summary">http://www.openplans.org/projects/ootb-plone-themes/summary</a></li></ul><h2>Deliverance</h2>

<p>Deliverance is a lightweight program that applies a theme to content according to a set of rules.</p>

<ul><li>

      <a href="http://www.openplans.org/projects/deliverance/summary">

        http://www.openplans.org/projects/deliverance/summary

      </a></li><li>

      <a href="http://blog.repoze.org/setting-up-deliverance-screencast-20071025.html">

        http://blog.repoze.org/setting-up-deliverance-screencast-20071025.html

      </a></li></ul><p>&nbsp;</p>

<p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-1">

            <h1>
                4.
                Tools
            </h1>

            <p class="documentDescription">Time
to sharpen your pencils. Authoring tools, putting your Plone site into
debug mode, how to create a theme product (for working on the
filesystem).</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-2">

            <h1>
                4.1.
                Authoring Tools
            </h1>

            <p class="documentDescription">If
you're working through the file system, you can use any text editor to
write templates, configuration files (xml, zcml) and the small amounts
of Python code you'll need.</p>
    
            <div>
                
                    <div><p>You might find the following useful:</p>

<h2 id="toc1">Zope/Plone TextMate support</h2>

<ul><li><a href="http://plone.org/products/textmate-support/">http://plone.org/products/textmate-support/</a><br></li><li><a href="http://dev.plone.org/collective/browser/textmate-support">http://dev.plone.org/collective/browser/textmate-support</a> <br></li></ul><p>You
will have to check this out of the collective svn - instructions on how
to do this can be found on http://svn.plone.org. There is also a
Windows version of Textmate (<a href="http://www.e-texteditor.com/">http://www.e-texteditor.com/</a>).</p>

<h2 id="toc2">Checking template syntax</h2>

<p>A quick and dirty route to finding out what's wrong with a template
you've written yourself is to customize it through the Zope Management
Interface. However you can also set up your own checking, to run before
you install a template on your site:</p>

<ul><li> <a href="http://docs.neuroinf.de/PloneBook/ch6.rst#conducting-syntax-checks">http://docs.neuroinf.de/PloneBook/ch6.rst#conducting-syntax-checks</a> </li></ul><p>this is a little complex if you're not comfortable with Python, but it's worth the effort in the long run.</p>

<h2 id="toc3">Python code editors</h2>

<p>Something a little more advanced than Notepad will give you code
highlighting for Python. You'll find a comprehensive listing here</p>

<ul><li> <a href="http://wiki.python.org/moin/PythonEditors">http://wiki.python.org/moin/PythonEditors</a>.</li></ul><h2 id="toc4">Integrated Development Environments</h2>

<p>If you fancy using an IDE, then there are plenty of options, though
these are directed towards Python development rather than writing or
customizing templates:</p>

<dl></dl><ul><li>

        <a href="http://plone.org/documentation/how-to/developing-plone-with-eclipse-ide">

          http://plone.org/documentation/how-to/developing-plone-with-eclipse-ide

        </a>

      </li><li><a href="http://plone.org/documentation/tutorial/debugging-plone-products-with-pida">

          http://plone.org/documentation/tutorial/debugging-plone-products-with-pida

        </a></li></ul><p>Other IDEs include Wing (<a href="http://www.wingware.com/">http://www.wingware.com/</a>), BoaConstructor and Komodo (<a href="http://www.activestate.com/Products/komodo_ide/index.mhtml">http://www.activestate.com/Products/komodo_ide/index.mhtml</a>).</p>

<p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                4.2.
                Debug Mode
            </h1>

            <p class="documentDescription">Inevitably you won't get things right first time, so you need to make sure your site is running in debug mode.</p>
    
            <div>
                
                    <div><h2 id="toc1">CSS Debug Mode</h2>

<p>Plone bundles all its CSS files into one or two for efficiency by
using a resource registry (there is more information on how this works
in the <a href="http://plone.org/documentation/manual/theme-reference/page/css">CSS and JavaScript to Page section</a>).
It is a lot easier to see what you're doing if you turn this function
off when you're designing. You can do the same for JavaScript.</p>

<ul class="listlevel1WW8Num1"><li>Go to Site Setup &gt; Zope Management Interface &gt; portal_css or portal_javascripts</li>

      <li>Tick the debug check box</li></ul><h2 id="toc2">Zope Debug Mode</h2>

<p>If you're making your own theme product, you'll also find it helpful
to run Zope itself in debug mode. This is set in the zope.conf file
which you'll find in /etc in your Zope instance. Just remove the # from
this line:</p>

<pre>#debug-mode = on</pre>

<p>If you're using buildout, you can set this in buildout.cfg:</p>

<pre>[instance]
debug-mode = on</pre>

<p>You'll still need to restart from time to time, but changes to the
Skin part of your theme made on the file system will refresh
straightaway.</p>

<h2 id="toc3">Can't see your changes?</h2>































<table id="Table17Ctable" class="vertical listing"><tbody><tr><td>Changes to....</td><td>Through the Web</td><td>On the File System</td></tr><tr><td>Components</td><td>Should see these immediately</td><td>Restart Zope</td></tr><tr><td>Skins</td><td>Should see these immediately</td><td>Run Zope in debug mode</td></tr><tr><td>Style sheets and JavaScript</td><td>Switch portal_css and portal_javascripts to debug</td><td>Switch portal_css and portal_javascripts to debug</td></tr><tr><td>Configuration</td><td>Should see these immediately</td><td>Reinstall product with quick installer</td></tr></tbody></table><h2>Error messages</h2>

<p>Plone comes with an error reporting module - PloneErrorReporting.
When you've created a Plone site, you'll find this ready to install</p>

<ul><li>Site Setup &gt; Add/Remove Products</li></ul><p>

Make sure you uninstall it before you put a site into production mode.</p>

<h2>Avoid restarting all the time<br></h2>

<p>If you are doing a lot of work on components on the file system, you'll soon get tired of restarting Zope. <a href="http://pypi.python.org/pypi/plone.reload/0.9">plone.reload</a>
will save you time. Add it to your buildout configuration file like any
other egg, rerun buildout and you'll find that you can reload your code
via your browser.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                4.3.
                On the File System: Creating a Theme Product
            </h1>

            <p class="documentDescription">If you want to work on the file system, here's the magic required to get yourself set up with a skeleton set of files and code.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                4.3.1.
                Overview
            </h1>

            <p class="documentDescription">If you want to work on the file system, here's the magic required to get yourself set up with a skeleton set of files and code.</p>
    
            <div>
                
                    <div><p>This
section will talk you through the processes required to create your own
theme on the file system and to install this in your own Plone
site.&nbsp;</p>

<p>The good news is that you don't have to write substantial amounts of
code yourself to create the framework for your own file system theme,
you can use a generator (Paster from ZopeSkel) to do this for you. This
will give you a directory containing a number of
pre-prepared directories and files, which you can augment or re-write
with your own customizations.</p>

<ul><li>In <a title="Practical 1: How to Create a Plone 3 Theme Product on the File System" class="internal-link" href="http://plone.org/documentation/manual/theme-reference/tools/egg1/practical1"><span class="state-hidden">Practical 1: How to Create a Plone 3 Theme Product on the File System</span></a>,
you'll use the code generator to make your skeleton framework. This
practical will also talk you through the files you've been given and
what they do.<br></li><li>In <a title="Practical 2: How to Install your Plone 3 Theme Using Buildout" class="internal-link" href="http://plone.org/documentation/manual/theme-reference/tools/egg1/practical2"><span class="state-hidden">Practical 2: How to Install your Plone 3 Theme Using Buildout</span></a>, you'll make this product available for your Plone site to install and use.<br></li></ul><p>&nbsp;</p>

<p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                4.3.2.
                Practical 1: How to Create a Plone 3 Theme Product on the File System
            </h1>

            <p class="documentDescription">description goes here</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-4">

            <h1>
                4.3.2.1.
                Jumpstart Your Theme Development Using Paster
            </h1>

            <p class="documentDescription">The
quickest and most efficient way to get started is not to create your
theme product folders and associated files from scratch, but to take
advantage of a product generator which will automatically create the
framework for a theme product based on your responses to a few
interactive questions.</p>
    
            <div>
                
                    <div><div id="bodyContent">

<h1>Using Paster Through the Web<br></h1>

<p>New users may feel more comfortable using a through the web tool

that allows them to generate a theme product. One such tool can be

found at <a href="http://paster.joelburton.com/">http://paster.joelburton.com/</a>.

You may wish to reference some of the information below for more details on what is actually happening as you fill out these

questions.</p>

</div>

<h2>Using Paster on Your Local Machine<br></h2>

<div id="bodyContent">

<p>For users more comfortable using the command line, you are more

likely to use a tool called ZopeSkel and the paster templates it

contains. ZopeSkel is a collection of PasteScript templates which can

be used to quickly generate Zope and Plone projects like buildouts,

archetypes products and, most pertinently for us, Plone themes.</p>

</div>

<h3>Locate or Install Paster<br></h3>

<div id="bodyContent">

<p class="edify">To determine whether you have paster and ZopeSkel

installed, at the command line try:</p>

</div>

<pre> paster create --list-templates</pre>

<div id="bodyContent">

<p class="edify">or, to see if paster and ZopeSkel have been installed
in the Python that came with your Plone installation [version 3.2
onwards]:</p>

</div>

<pre>[path to your buildout]/python-[version]/paster create --list-templates
</pre>

<div id="bodyContent">

<p class="edify">If

"plone3_theme" is not in the list of available templates, you may have

to <a href="http://plone.org/documentation/how-to/how-to-create-a-plone-3-theme-product-on-the-filesystem/use-paster">install paster and/or ZopeSkel</a>, as explained by Daniel Nouri.</p>

</div>

<h3>Create your Theme Product<br></h3>

<div id="bodyContent">

<p>If you have paster and ZopeSkel installed, navigate to the directory
where you'd like to create your product (we'd recommend [your
buildout]/[zinstance|zeocluster/src]) and run from the command line:</p>

<pre class="literal-block">$ paster create -t plone3_theme plonetheme.mytheme</pre>

<p>or, if you have paster in your Plone installation:</p>

</div>

<pre>$ [path to your buildout]/python-[version]/paster create -t plone3_theme plonetheme.mytheme
</pre>

<div id="bodyContent">

<p>This will initiate a series of questions by the paster script. The

defaults are largely appropriate for your first theme, so in many cases

you can simply hit return. Here is example output from the interactive

session.</p>

<pre class="literal-block">Selected and implied templates:<br>  ZopeSkel#basic_namespace  A project with a namespace package<br>  ZopeSkel#plone            A Plone project<br>  ZopeSkel#plone3_theme     A Theme for Plone 3.0<br><br>Variables:<br>  egg:      plonetheme.mytheme<br>  package:  plonethememytheme<br>  project:  plonetheme.mytheme<br>Enter namespace_package (Namespace package (like plonetheme)) ['plonetheme']:<br>Enter package (The package contained namespace package (like example)) ['example']:mytheme<br>Enter skinname (The skin selection to be added to 'portal_skins' (like 'My Theme')) ['']:My Theme<br>Enter skinbase (Name of the skin selection from which the new one will be copied) ['Plone Default']:<br>Enter empty_styles (Override default public stylesheets with empty ones?) [True]: False<br>Enter include_doc (Include in-line documentation in generated code?) [False]:True<br>Enter zope2product (Are you creating a Zope 2 Product?) [True]:<br>Enter version (Version) ['1.0']:<br>Enter description (One-line description of the package) ['An installable theme for Plone 3.0']: <br>Enter long_description (Multi-line description (in reST)) ['']:<br>Enter author (Author name) ['Plone Collective']:<br>Enter author_email (Author email) ['product-developers@lists.plone.org']:<br>Enter keywords (Space-separated keywords/tags) ['web zope plone theme']:<br>Enter url (URL of homepage) ['http://svn.plone.org/svn/collective/']:<br>Enter license_name (License name) ['GPL']:<br>Enter zip_safe (True/False: if the package can be distributed as a .zip file) [False]:<br></pre>

<p class="edify">You cannot use 'delete' to correct a typo during the

interactive session. If you make a mistake, ctrl-c to stop the script

and start over.</p>

</div>

<h2>Paster Options<br></h2>

<div id="bodyContent">

<p>Some of these questions warrant further explanation:</p>

<dl><dt>Enter namespace_package</dt><dd>It is good practice to use

the 'plonetheme' namespace for your theme. You can use other

namespaces, of course ('products' might be another), but unless you

have a compelling reason to do otherwise, use 'plonetheme'.</dd><dt>Enter package</dt><dd>The 'package' is simply the lowercase name of your theme product, sans spaces or underscores.</dd><dt>Enter skinname</dt><dd>The 'skinname' is the human-readable name for your theme. Spaces and capitalization are appropriate.</dd><dt>Enter skinbase</dt><dd>In nearly all cases, you'll want to leave this as 'Plone Default'. <br></dd><dt>Enter empty_styles</dt><dd>Answering

'True' will cause empty stylesheets to be added to your product which

will override the default base.css, public.css, and portlets.css

included in any Plone site using the 'Plone Default' skin. 'False' will

not add empty stylesheets. For the purposes of this practical, we recommend entering 'False'.<br></dd><dt>Enter include_doc</dt><dd>Answering

'True' will cause inline documentation to be added to the files created

by ZopeSkel. It is worth doing this at least once, as some of the

documentation is quite useful.</dd><dt>Enter zope2product</dt><dd>Answering

'True' means that the package will be useable as an egg, it will be

listed in the ZMI, skin folders will be registered as layers with the

Skins Tool ('portal_skins'), and the Generic Setup profile for the

product can be loaded via the Setup Tool ('portal_setup'). We'll

explore some of this further; for now, suffice to say that you'll

always want to enter 'True' here when generating a Plone theme.</dd><dt>Enter zip_safe</dt><dd>Stick with the default here.<br></dd></dl><dl class="reference"><dt><a href="http://plone.org/documentation/how-to/how-to-create-a-plone-3-theme-product-on-the-filesystem/use-paster">Creating new eggs and packages quickly with paster</a></dt><dd>How

to use the paster command to create new packages with proper

setuptools- and egg-compliant filesystem layout quickly and easily.</dd></dl></div></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                4.3.2.2.
                Python Eggs, Generic Setup and Zope 3
            </h1>

            <p class="documentDescription">Background notes on changes between Plone 2.5 and Plone 3.</p>
    
            <div>
                
                    <div><p>Products, in Plone's parlance, are analogous to modules or

extensions for other applications. In the move from Plone 2.5 to Plone

3, several important changes were made in the way Plone handles

products. First, some products began to be packaged as Python eggs,

which made them easier to manage, distribute and install. Second,

products began to use GenericSetup as a means for installation. And

third, products increasingly incorporated Zope 3 (Z3) technologies like

browser views.</p>

<div id="bodyContent">

<h3>Python Eggs</h3>

<p>A python egg is simply a bundle of files and directories which

constitute a python package. Eggs can either be compressed, in which

case they appear as a single *.egg file, or uncompressed. Eggs are

similar in concept and function to Java's JAR files.</p>

<p>Eggs are installed via the setuptools framework, a side project of

the Python Enterprise Application Kit (PEAK), which provides for

package (and dependendency) management and distribution.</p>

<p class="edify">If you're using version control, you'll want to add

*.egg-info and *.pyc to the ignore patterns for your setup so that the

egg metadata and compiled python files aren't added to your repository.</p>

<div>

<dl class="reference"><dt><a href="http://peak.telecommunity.com/DevCenter/PythonEggs">A Quick Guide to Python Eggs</a></dt><dd>A good overview of eggs and setuptools from the folks at PEAK.</dd><dt><a href="http://www.ibm.com/developerworks/library/l-cppeak3.html">Hatch Python Eggs with SetupTools</a></dt><dd>David Metz takes a look at the setuptools framework.</dd></dl></div>

<h3>GenericSetup</h3>

<p>GenericSetup (GS) is a tool for managing site configuration in Plone

using xml files. GS makes it possible to export customizations from one

Plone site and import them into another. And to some extent, GS

replaces the Portal QuickInstaller (QI) post-Plone 2.5 in that GS can

be used to install products. In products which rely on GS, we find xml

configuration files; in products which use the older, venerable QI for

installation, by comparison, we find install methods written in python.</p>

<p class="edify">Keep in mind that GenericSetup does not currently

allow you to undo the profile applied during installation. You can

uninstall your theme using the QuickInstaller, however, assuming that

an uninstall method is present.</p>

<p>Because our skeleton theme product utilizes GenericSetup to install

itself, we will shortly be configuring several xml files needed by GS.</p>

<dl class="reference"><dt><a href="http://plone.org/documentation/tutorial/genericsetup">Understanding and Using GenericSetup in Plone</a></dt><dd>Now a bit dated, Rob Miller's tutorial on GS remains a useful resource for background on GS.</dd><dt><a href="http://theploneblog.org/blog/archive/2007/06/21/genericsetup-improvements">GenericSetup Improvements</a></dt><dd>More information about GS from Rob Miller.</dd><dt><a href="http://plone.org/documentation/tutorial/benefit-now-from-using-genericsetup-and-zope-3-technologies/?searchterm=benefit%20NOW">Benefit NOW from Using GenericSetup and Z3 Technologies</a></dt><dd>Impress

your colleagues by using GenericSetup and Zope 3 views efficiently and

with minimal effort! This tutorial shows you how to add a new view, how

to use it, how to add a new content type and how to hook it all up.</dd></dl><h3>Zope 3 Technology</h3>

<p class="edify">Despite any version number-induced miasma, remember

that Plone 3 runs on Zope 2. Zope 3 is a dramatic rewrite of Zope 2 and

some Zope 3 functionality has been backported to work under Zope 2.

(And yes, Plone 3.) For a full explanation of the Zope 3 technologies

involved, consult this tutorial:</p>

<dl class="resources"><dt><a href="http://plone.org/documentation/how-to/how-to-create-a-plone-3-theme-product-on-the-filesystem/plone.org/documentation/tutorial/customization-for-developers">Customization for developers</a></dt><dd>An overview of Plone 3 customization by Martin Aspeli.</dd></dl></div></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                4.3.2.3.
                Anatomy of a Plone Theme Product
            </h1>

            <p class="documentDescription">The directory structure and an explanation of what all these files do.</p>
    
            <div>
                
                    <div><div id="bodyContent">&nbsp;</div>

<div id="bodyContent">

<p>Assuming that you've created your theme product successfully, you

should have a directory structure that looks roughly like this:</p>

<pre class="literal-block">    plonetheme.mytheme<br>	docs<br>	     HISTORY.txt<br>	     INSTALL.txt<br>	     LICENSE.GPL<br>	     LICENSE.txt<br>	MANIFEST.in<br>	plonetheme<br>	     __init__.py<br>	     mytheme<br>	         __init__.py<br>	         browser<br>	              __init__.py<br>	              configure.zcml<br>	              images<br>	                   README.txt<br>	              interfaces.py<br>	              stylesheets<br>	                   main.css<br>	                   README.txt<br>	              viewlet.pt<br>	              viewlets.py<br>	         configure.zcml<br>	         profiles<br>	              default<br>	                  cssregistry.xml<br>	                  import_steps.xml<br>	                  jsregistry.xml<br>	                  metadata.xml<br>	                  plonetheme.mytheme_various.txt<br>	                  skins.xml<br>	                  viewlets.xml<br>	         profiles.zcml<br>	         setuphandlers.py<br>	         skins<br>	              plonetheme_mytheme_custom_images<br>	                   CONTENT.txt<br>	              plonetheme_mytheme_custom_templates<br>	                   CONTENT.txt<br>	              plonetheme_mytheme_styles<br>	                  base.css.dtml<br>	                  base_properties.props<br>	                  CONTENT.txt<br>	                  portlets.css.dtml<br>	                  public.css.dtml<br>	         skins.zcml<br>	         tests.py<br>	         version.txt<br>	plonetheme.mytheme-configure.zcml<br>	plonetheme.mytheme.egg-info<br>	     dependency_links.txt<br>	     entry_points.txt<br>	     namespace_packages.txt<br>	     not-zip-safe<br>	     paster_plugins.txt<br>	     PKG-INFO<br>	     requires.txt<br>	     SOURCES.txt<br>	     top_level.txt<br>	README.txt<br>	setup.cfg<br>	setup.py<br>	zopeskel.txt<br></pre>

<p>Things may seem a little complicated at this point, but not to

worry. Let's take closer look at the main files and directories

according to their respective functions.</p>

<h3>Documentation</h3>

<dl><dt>docs/</dt><dd>The docs directory contains installation instructions (INSTALL.txt), license files, and the development log (HISTORY.txt).</dd><dt>README.txt</dt><dd>The

top-level text file contains the one-line description of the product

you entered during the interactive session with ZopeSkel. Other README

files exist throughout the product.</dd></dl><h3>Python Package</h3>

<dl><dt>plonetheme/</dt><dd>This is a namespace package, which serves to group other packages.</dd><dt>mytheme/</dt><dd>This is the actual name of your theme, usually the name of the client or project you are working on.<br></dd><dt>tests.py</dt><dd>Python

tests for our package go here. Typically themes don't have much python

code, and so don't have much in the way of testing.</dd><dt>version.txt</dt><dd>The version of our product. This information is also contained in /profiles/default/metadata.xml.</dd></dl><h3>Python Egg</h3>

<dl><dt>plonetheme.mytheme.egg-info/</dt><dd>The egg metadata is stored here.</dd><dt>setup.cfg</dt><dd>This configuration file contains information used to create egg-info files.</dd><dt>setup.py</dt><dd>If

we wanted setuptools to handle the installation of the package and

dependencies we could install via "python setup.py install" (for now,

we don't).</dd></dl><h3>GenericSetup</h3>

<dl><dt>profiles.zcml</dt><dd>Register appropriate GenericSetup profiles.</dd><dt>profiles/</dt><dd>"Default"

is the current configuration profile (only one profile is automatically

created, but more could be added). Within our configuration profile we

have XML files which tell GS how to configure CSS files

(cssregistry.xml), Javascript files (jsregistry.xml), skin layers

(skins.xml), and viewlets (viewlets.xml). Metadata.xml tracks the

product version number and other metadata, import_steps.xml _____ and

the presence of plonetheme.mytheme-various.txt tells GS to look to

setuphandlers.py for additional methods. </dd></dl><h3>Zope 3</h3>

<dl><dt>plonetheme.mytheme-configure.zcml</dt><dd>This is the ZCML

slug which must be placed in the etc/package-includes if the theme is

installed as a python package (ours won't be).</dd><dt>configure.zcml</dt><dd><br></dd><dt>skins.zcml</dt><dd>Register skin layers (images, styles, templates) as filesystem directory views.</dd><dt>browser/</dt></dl><h3>Stylesheets, Templates and More</h3>

<p>Once you've got your theme product in place, the next step is to

modify the pieces that Plone gives us, specifically templates,

stylesheets, and viewlets.</p>

<dl><dt>Templates/</dt><dd>Plone templates, specifically the main_template that controls the

layout of a Plone site, can be grabbed from the

parts/plone/CMFPlone/skins/plone_templates directory. Most of the

templates that were contained here in 2.5 have been moved to eggs and

are controlled by viewlets. To modify a template from this directory,

copy it to your theme product, into your theme's skins/templates folder

and make your modifications there.<br></dd><dt>Stylesheets/</dt><dd>Plone's default stylesheets can be found in your

buildout/parts/plone/CMFPlone/skins/plone_styles directory. It's

usually advisable to create a stylesheet specific to your theme

product, e.g. "mytheme.css" (where "mytheme" is the name of your theme

product), and then take any relevant styles from CMFPlone's stylesheets

and customize them in your own theme product, rather than overriding

entire CMFPlone stylesheets. The one exception here may be IEFixes.css,

which you likely want to keep intact as a single file, since it is

called in explicitly from the main_template.<br></dd><dt>Viewlets/</dt><dd>It is a great oversimplification to state that most often you will

be overriding viewlets from eggs commonly known as plone.app.layout,

plone.app.portlets, and plone.app.content. Those viewlets, can be found

in your buildout/eggs/ in packages named "plone.app.layout[xx],"

"plone.app.portlets[xx]," and "plone.app.content[xx]," where [xx] is a

version number. When modified, these viewlets and their related code

belong in your theme product's browser/ directory. For more information

on how to work with viewlets, <a href="http://plone.org/documentation/tutorial/customizing-main-template-viewlets">read this tutorial</a>.<br></dd></dl><p class="edify">If modifying page templates, you won't need to restart

Zope in order to see your changes take effect. Changes to python, XML

or ZCML, however, will require a restart.</p>

<dl class="resources"><dt><a href="http://plone.org/documentation/how-to/how-to-create-a-plone-3-theme-product-on-the-filesystem/plone.org/documentation/tutorial/customization-for-developers">Customization for developers</a></dt><dd>An overview of Plone 3 customization by Martin Aspeli.</dd></dl></div></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                4.3.3.
                Practical 2: How to Install your Plone 3 Theme Using Buildout 
            </h1>

            <p class="documentDescription">description goes here</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-4">

            <h1>
                4.3.3.1.
                Installing your Egg-Based Theme Product 
            </h1>

            <p class="documentDescription">In
this section, we will look at how to install egg-based themes using
buildout. As of Plone 3.1.2, all of the Plone installers create a
buildout that contains your Plone instance. When installing or
developing themes, buildout is highly recommended.
</p>
    
            <div>
                
                    <div><p>&nbsp;To install the theme product you created in Practical 1:</p>

<ul><li>First, if it isn't already there, copy your theme
product to [your buildout]/[zinstance|zeocluster]/src (if you find that
this directory doesn't exist, you can create it yourself). </li><li>Then,
using a text editor, edit your buildout.cfg
(you'll find it in [your buildout]/[zinstance|zeocluster]) and add the
following information into the buildout, instance, and zcml
sections. The actual buildout.cfg file will be much longer than the
snippets below:</li></ul><pre>[buildout]
 ...
 develop =
    src/plonetheme.mytheme

[instance]
 eggs =
 ...
 plonetheme.mytheme

zcml =
 ...
 plonetheme.mytheme</pre>

<p>The last line tells buildout to generate a ZCML snippet (slug) that

tells Zope to recognize your theme product. The dots [...] indicate

that you may have additional lines of ZCML code here.</p>

<ul><li>After updating the configuration, stop your site and run the ''bin/buildout'' command,

  which will refresh your buildout.</li><li>Then, restart your site and go to the 'Site Setup' page in the Plone

interface and click on the 'Add-on Products' link. The 'Site Setup'

area is also known as plone_control_panel, as this is the URL used to

get to 'Site Setup'.</li><li>Choose the product (My Theme 1.0) by selecting the checkbox next to it and click the 'Install' button.</li></ul><p>Note: You may have to empty your browser cache to see the effects of the

  product installation.</p>

<h2>Uninstalling a Theme Product<br></h2>

<p>Uninstalling can be done from the 'Site Setup' / 'Add/Remove

Products' page, but only if you installed it from the 'Add/Remove

Products' screen. Not all themes uninstall cleanly, but reinstalling

the Default Plone product generally cures any issues here.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                4.3.3.2.
                Background: Third Party Theme Products
            </h1>

            <p class="documentDescription">In
this section, we will look at how to install a Plone theme that you
have downloaded from Plone.org/products, PyPi, etc. We will also show
how you can distinguish between an old-style 2.5 product and a new
egg-based one.</p>
    
            <div>
                
                    <div><p>There are two kinds of theme products: newer <strong>egg-based products</strong>, and older theme products that are in the <strong>"magical Products namespace"</strong>.

The type of theme product you are working with determines the steps you

must take to install your theme. We'll now see how to tell the

difference between the two.</p>

<h2>Is the Theme Product Egg-Based or in the Product's Namespace?<br></h2>

<p>First, we need to understand what egg-based means. If the theme,

when unzipped, is named plonetheme.whatever, or you generate a new

theme using the <a href="http://plone.org/how-to/use-paster">Paster</a>

recipe and answer "yes" to the "is this a Zope2 product", then your

theme product is egg-based. On an even simpler note, if the root folder

contains setup.py, it's an egg. In a typical egg-based theme product,

setup.py would look something like this, where the highlighted text is

the name of the egg.</p>

<pre>from setuptools import setup, find_packages

version = '1.1'
<strong>

setup(name='webcouturier.icompany.theme',

</strong>
[...]<strong>

</strong></pre>

<p>If the product looks like it was created using DIYPloneStyle 3.x (now

outdated), it lives in the Products namespace. You can also tell that

you are working with a theme in the Products namespace because there is

no setup.py file in the root.</p>

<h2>Installing an Egg-based Product</h2>

<p>We recommend using buildout to install an egg-based product. You can

decide whether you want to download the package yourself or leave

buildout to do it for you. If the former, then follow the instructions

in the previous section. If you want to leave the download up to

buildout, then buildout configuration is simpler:</p>

<p>&nbsp;</p>

<p>[configuration here]</p>

<h3>Dependencies<br></h3>

<p>If another

package depends on the theme egg or includes its ZCML directly, you do

not need to specify anything in the buildout configuration; buildout

will detect this automatically. This is considered a more advanced

topic. Similarly, if the theme egg depends on another product, then buildout will take care of this too.</p>

<h2>Installing a Product if it is in the 2.x Products namespace<br></h2>

<p>Assuming the theme product is an older 3.x theme and that it is in

the Products namespace, all you have to do is place the theme product

in your buildout's "products/" directory and restart your Zope

instance. There is no need to rerun your buildout, because we have not

changed any ZCML code.</p>

<p>Then, after your Zope has restarted, go to the 'Site Setup' page in

the Plone interface and click on the 'Add/Remove Products' link. The

'Site Setup' area is also known as plone_control_panel, as this is the

URL used to get to 'Site Setup'.</p>

<p>Choose the product by selecting the checkbox next to it and click the 'Install' button.</p>

<p>Older themes in the Products namespace may show up twice in the

portal_quickinstaller, but this is a bug that is fixed in a more recent

version of ZopeSkel. You can either ignore the bug or resolve it by

removing this line from your theme product's configure.zcml file and

restarting your Zope instance:</p>

<pre>&lt;five:registerPackage package="." initialize=".initialize" /&gt;
</pre>

<p>Note: You may have to empty your browser cache to see the effects of the

  product installation.</p></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-1">

            <h1>
                5.
                Building Blocks
            </h1>

            <p class="documentDescription">Skin,
Components, Configuration. The three main building blocks of a theme;
interconnected, but each with a distinctive way of behaving.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-2">

            <h1>
                5.1.
                Overview
            </h1>

            <p class="documentDescription">An overview of the building blocks and how they fit together to create a theme.</p>
    
            <div>
                
                    <div><p>There are really three main building blocks in a theme. The diagram below shows you how these slot together:</p>

<p><img class="image-left" src="plone-theme-references_archivos/image_large.png" alt="diagram of the building blocks used to create a theme"></p>

<h2 id="toc1">Skin</h2>

<ul><li>deals with the overall construction of a page and the delivery of content</li><li>comprises page templates, macros, and Python scripts, and is also the place to put style sheets and JavaScript </li><li>to
help you understand these we'll point you in the direction of tutorials
on the templating language TAL and introduce you to skin layers and
order of precedence</li><li>to find skin elements, look in

<ul><li>portal_skins in the Zope Management Interface </li><li>the skins directory in a file system product </li></ul></li></ul><h2 id="toc2"> Components</h2>

<ul><li>the Components part deals (mostly) with page furniture - the
page elements which have some level of consistency from page to page
along with page elements involving a level of processing - such as the
navigation tree, RSS feeds</li><li>deploys a mixture of Python classes and page templates to create viewlets, portlets and browser views</li><li>to
help you understand these, we'll give you an overview of how they are
wired together with ZCML, and we'll give you the briefest of
introductions to the bits you really need to know about Python classes</li><li>to find the pieces that go together to make a component, look in

<ul><li>portal_view_customizations in the Zope Management Interface </li>

      <li>the browser directory in a file system product </li></ul></li></ul><h2 id="toc3"> Configuration</h2>

<ul><li>the Configuration part deals with setting the order of some
page elements (or individual items) on the page and with automatically
setting some of the configuration you would otherwise make manually
through the Site Setup interface</li>



      <li>to help you
understand the configuration, we'll point you in the direction of the
main tools for manual configuration, give you a quick overview of the
Generic Setup Tool and the XML used for automatic configuration</li>

      <li>configuration
tools are found in several places in the site, but the files required
to run a configuration automatically are found in the profiles
directory of a file system product </li></ul></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                5.2.
                Skin
            </h1>

            <p class="documentDescription">Templates, style sheets, Javascript files, how to customize them, where to find them.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.2.1.
                Templates and the Templating Language
            </h1>

            <p class="documentDescription">Templates and the Templating Language</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.2.1.1.
                Templates and the Templating Language
            </h1>

            <p class="documentDescription">The main elements of a skin are page templates, images, Python scripts, CSS files, and JavaScript files. </p>
    
            <div>
                
                    <div><h2>(Zope) Page Templates</h2>

<p>Page templates (.pt files or ZPT) are an essential part of a Plone
theme and are probably the easiest aspect of Plone to get to grips
with. They are written in an elegant XML-based templating language
called TAL, sometimes make use of macros (METAL), and sometimes
incorporate Python expressions (small one-line calculations) or Python
scripts.</p>

<p>There are several excellent introductions to ZPT, and it doesn't take long to learn TAL. Try these:</p>

<ul><li>

        

        

        

        

        

        

        <a href="http://plone.org/documentation/tutorial/zpt/">

          Zope Page Templates tutorial on plone.org

        </a>

      </li><li><a href="http://www.zope.org/Documentation/Books/ZopeBook/2_6Edition/AppendixC.stx">

          ZPT Reference on Zope.org

        </a></li></ul><p>TAL
is the one language that we really recommend you learn properly. The
rest you can pick your way through or familiarise yourself with as you
go along.</p>

<ul><li><a href="http://plone.org/documentation/tutorial/zpt/advanced-usage">

          Zope Page Template Tutorial on plone.org - Advanced Usage

        </a></li></ul><p>A
Plone web page is delivered via an aggregation of templates, rather
than just one, and there a couple of aspects of Zope Page Template that
you'll need to be aware of.</p>

<h3 id="toc2">1. Slot</h3>

<p><a id="egsm"></a><a id="bkmegsm"></a>A slot is a predefined section
of a template. This can be left empty, or given some default content,
but it is available to be filled on the fly. A slot is defined in a
template in code like this:</p>

<pre>&lt;metal:bodytext metal:define-slot="main" tal:content="nothing"&gt;
    .....
&lt;/metal:bodytext&gt;</pre>

<p>And filled via another template like this:</p>

<pre>&lt;metal:main fill-slot="main"&gt;
 &lt;h1 class="documentFirstHeading"&gt;
    ......
 &lt;/h1&gt;
&lt;/metal:main&gt;</pre>

<p>The ZPT tutorial on plone.org talks you through this in more detail, and the <a href="http://plone.org/documentation/manual/theme-reference/buildingblocks/page/templates">Templates and Components to Page</a> section of this manual gives you an example.</p>

<h3 id="toc3">2. Content view templates (_view)</h3>

<blockquote class="pullquote">

<p>Note: the term "view" also has a more technical application, so in
the context of Components (discussed later in this manual) it will mean
something different.</p>

</blockquote>

<p>From the user's, contributor's, or visitor's perspective, a view is
the way in which a content item is presented on the page. There's a <a href="http://plone.org/documentation/plone-2.5-user-manual/managing-content/folder-view/">useful introduction</a> to this in the Plone User Manual.</p>

<p>Templates that are used to render a content item for a view have
_view appended to their name (e.g., document_view.pt) and may have a
title such as "Standard View." These templates are, in fact, sets of
information ready to drop into slots.</p>

<h2 id="toc4"><a id="i5rw"></a><a id="bkmi5rw"></a>Scripts</h2>

<p>These are small stand-alone functions for times when you need a few
lines of code to perform your calculation. On the file system, they
have a .py extension; you'll find them in the Zope Management Interface
as Script (Python).</p>

<p>Here's a snippet from the event_view template (the content view for
the event content type) which uses a Python script to format the a time
field according to the default format for the site. If you look in
CMFPlone/skins/plone_scripts, you'll find toLocalizedTime.py - just a
few lines of code.</p>

<pre>&lt;span metal:define-slot="inside" 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class="explain"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tal:attributes="title python:here.end()"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tal:content="python:<em>here.toLocalizedTime</em>(here.end(),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;             long_format=1)"&gt;End Date Time&lt;/span&gt;
</pre>

<p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.2.1.2.
                Getting started
            </h1>

            <p class="documentDescription">Page
Templates are a web page generation tool. In this part, we'll go
through their basics and show how to use them in your web site to
create dynamic web pages easily.</p>
    
            <div>
                
                    <div><p>    The goal of Page Templates is natural workflow.  A designer will

    use a WYSIWYG HTML editor to create a template, then a programmer

    will edit it to make it part of an application.  If required, the

    designer can load the template <em>back</em> into his editor and make

    further changes to its structure and appearance.  By taking

    reasonable steps to preserve the changes made by the programmer,

    he will not disrupt the application.</p>

<p>    Page Templates aim at this goal by adopting three principles:</p>

<ol><li>

<p>Play nicely with editing tools.</p>

</li>

<li>

<p>What you see is very similar to what you get.</p>

</li>

<li>

<p>Keep code out of templates, except for structural logic.</p>

</li></ol><p>    A Page Template is like a model of the pages that it will

    generate.  In particular, it is a valid HTML/XHTML page.  Since HTML is

    highly structured, and WYSIWYG editors carefully preserve this

    structure, there are strict limits on the ways in which the

    programmer can change a page and still respect the first

    principle.</p>

<p> Although Page Templates are suited for programmers and designers
who need to work together to create dynamic web pages, they form the
basis for most of Plone's pages, so you should learn them a bit at
least, if you need to customize the Plone look or layout. Moreover,
they can be simpler to use and understand than the alternative, DTML.</p>

<h2>Why Yet Another Template Language?</h2>

<p>    There are plenty of template systems out there, some of them quite

    popular, such as ASP, JSP, and PHP.  Since the beginning, Zope has

    come with a template language called DTML.  Why invent another?</p>

<p>    First, none of these template systems are aimed at HTML designers.

    Once a page has been converted into a template, it is invalid

    HTML, making it difficult to work with outside of the application.

    Each of them violates the first or second principle of Zope Page

    Templates to one degree or another.  Programmers should not

    "hijack" the work of the designers and turn HTML into software.

    XMLC, part of the Enhydra project, shares our goal, but requires

    the programmer to write substantial amounts of Java support code

    for each template.</p>

<p>    Second, all of these systems suffer from failure to separate

    presentation, logic, and content (data).  Their violations of the

    third principle decrease the scalability of content management and

    website development efforts that use these systems.</p>

<h2>Applying The Principles</h2>

<p>Page Templates use the <strong>Template Attribute Language (TAL)</strong>. TAL

    consists of special tag attributes.  For example, a dynamic page

    title might look like this:</p>

<pre>      &lt;title tal:content="context/title"&gt;Page Title&lt;/title&gt;</pre>

<p>    The <code>tal:content</code> attribute is a TAL statement.  Since it

    has an XML namespace (the <code>tal:</code> part) most editing tools

    will not complain that they don't understand it, and will not

    remove it.  It will not change the structure or appearance of

    the template when loaded into a WYSIWYG editor or a web

    browser. The name <code>content</code> indicates that it will set the

    content of the <code>title</code> tag, and the value "context/title" is an

    expression providing the text to insert into the tag.</p>

<p>    To the HTML designer using a WYSIWYG tool, this is perfectly valid

    HTML, and shows up in the editor looking the way a title should

    look.  The designer, not caring about the application details

    of TAL, only sees a <em>mockup</em> of the dynamic template, complete

    with dummy values like "Page Title" for the title of the document.</p>

<p>    When this template is saved in Zope and viewed by a user, Zope

    turns this static content into dynamic content and replaces "Page

    Title" with whatever "context/title" resolves to.  In this case,

    "context/title" resolves to the title of the object to which to the template is applied.

    This substitution is done dynamically, when the template is viewed.</p>

<p>    This example also demonstrates the second principle. When you view

    the template in an editor, the title text will act as a

    placeholder for the dynamic title text.  The template provides an

    example of how generated documents will look.</p>

<p>    There are template commands for replacing entire tags, their

    contents, or just some of their attributes.  You can repeat a tag

    several times or omit it entirely.  You can join parts of several

    templates together, and specify simple error handling.  All of

    these capabilities are used to generate document structures.  You

    <strong>can't</strong> create subroutines or classes, write loops or multi-way

    tests, or easily express complex algorithms.  For these tasks, you

    should use Python.</p>

<p>    The template language is deliberately not as powerful and

    general-purpose as it could be.  It is meant to be used inside of

    a framework (such as Zope) in which other objects handle business

    logic and tasks unrelated to page layout.</p>

<p>    For instance, template language would be useful for rendering an

    invoice page, generating one row for each line item, and inserting

    the description, quantity, price, and so on into the text for each

    row.  It would not be used to create the invoice record in a

    database or to interact with a credit card processing facility.</p>

<h2>Creating a Page Template</h2>

<p> If you design pages, you will probably use FTP or WebDAV instead of
the Zope Management Interface (ZMI) to create and edit Page Templates,
or you will be developing templates on the filesystem for later
installation. If you're not the Zope site owner, ask your Zope
administrator for instructions. For the very small examples in this
article, it is much easier to use the ZMI. For more information on
using FTP or WebDAV with Zope, see
<a href="http://www.zope.org/Documentation/Books/ZopeBook/current/ExternalTools.stx">    The Zope Book</a> or Jeffrey

    Shell's <a href="http://www.zope.org/Documentation/Articles/WebDAV">WebDAV

    article</a>.</p>

<p>You may also use <a href="http://www.gnu.org/software/emacs/">Emacs</a>,

    <a href="http://www.webdav.org/cadaver/">cadaver</a>, or some other client, but if you are a Zope administrator or a programmer, you will probably

    use the ZMI anyway at least occasionally.  See the Zope

    Book for instructions on

    setting up Zope to to work with various clients.</p>

<p>    Use your web browser to log into the Zope management interface as

    you normally would with Zope.  Choose a Folder (the root is fine)

    and pick "Page Template" from the drop-down add list.  Type

    "simple_page" in the add form's <code>Id</code> field, then push the "Add and

    Edit" button.</p>

<p>    You should now see the main editing page for the new Page

    Template.  The title is blank, the content-type is <code>text/html</code>,

    and the default template text is in the editing area.</p>

<p>    Now you will create a very simple dynamic page. Type the words "a

    Simple Page" in the <code>Title</code> field.  Then, edit the template's body text

    to look like this:</p>

<pre>      This is &lt;b tal:replace="template/title"&gt;the Title&lt;/b&gt;.</pre>

<p>    Now push the "Save Changes" button.  The edit page should show a

    message confirming that your changes have been saved.  If&nbsp; an error message appears above the code area, or some

    text starting with <code>&lt;-- Page Template Diagnostics</code> is added to

    the template, then check to make sure you typed the example

    correctly and save it again.  You don't need to erase the error

    comment: once the error is corrected it will go away.</p>

<p>    Click on the <code>Test</code> tab.  You should see a mostly blank page with

    "This is a Simple Page." at the top.</p>

<p>    Back up, then click on the "Browse HTML source" link under the

    content-type field.  This will show you the <em>unrendered</em> source of

    the template.  You should see "This is <strong>the Title</strong>."  Back up

    again, so that you are ready to edit the example further.</p>

<h2>Simple Expressions</h2>

<p>    The text "template/title" in your simple Page Template is a

    <em>path expression</em>.  This the most commonly used of the

    expression types defined by the TAL Expression Syntax

    (TALES).  It fetches the <code>title</code> property of the template.

    Here are some other common path expressions:</p>

<ul><li>

<p>request/URL: The URL of the current web request.</p>

</li>

<li>

<p>user/getUserName: The authenticated user's login name.</p>

</li>

<li>

<p>container/objectIds: A list of Ids of the objects in the

      same Folder as the template.</p>

</li></ul><p>    Every path starts with a variable name.  If the variable contains

    the value you want, you stop there.  Otherwise, you add a slash

    (<code>/</code>) and the name of a sub-object or property.  You may need to

    work your way through several sub-objects to get to the value

    you're looking for.</p>

<p>    There is a small built in set of variables, such as <code>request</code> and

    <code>user</code>, that will be listed and described later.  You will also

    learn how to define your own variables.</p>

<h2>Inserting Text</h2>

<p>    In your "simple_page" template, you used the <code>tal:replace</code>

    statement on a bold tag.  When you tested it, it replaced the

    entire tag with the title of the template.  When you browsed the

    source, instead, you saw the template text in bold.  We used a bold tag in

    order to highlight the difference.</p>

<p>    In order to place dynamic text inside of other text, you typically

    use <code>tal:replace</code> on a <code>span</code> tag.  Add the following lines to

    your example:</p>

<pre>      &lt;br&gt;
      The URL is &lt;span tal:replace="request/URL"&gt;URL&lt;/span&gt;.</pre>

<p>    The <code>span</code> tag is structural, not visual, so this looks like "The

    URL is URL." when you view the source in an editor or browser.

    When you view the rendered version, it may look something like:</p>

<pre>      &lt;br&gt;
      The URL is http://localhost:8080/simple_page.</pre>

<p>    Remember to take care when editing not to destroy the <code>span</code> or

    place formatting tags such as <code>b</code> or <code>font</code> inside of it, since

    they would also be replaced.</p>

<p>    If you want to insert text into a tag but leave the tag itself

    alone, you use <code>tal:content</code>.  To set the title of your example

    page to the template's title property, add the following lines

    above the other text:</p>

<pre>      &lt;head&gt;
        &lt;title tal:content="template/title"&gt;The Title&lt;/title&gt;
      &lt;/head&gt;</pre>

<p>    If you open the "Test" tab in a new window, the window's

    title will be "a Simple Page".</p>

<h2>Repeating Structures</h2>

<p>    Now you will add some context to your page, in the form of a

    list of the objects that are in the same Folder.  You will

    make a table that has a numbered row for each object, and

    columns for the id, meta-type, and title.  Add these lines to

    the bottom of your example template:</p>

<pre>      &lt;table border="1" width="100%"&gt;
        &lt;tr&gt;
          &lt;th&gt;#&lt;/th&gt;&lt;th&gt;Id&lt;/th&gt;&lt;th&gt;Meta-Type&lt;/th&gt;&lt;th&gt;Title&lt;/th&gt;
        &lt;/tr&gt;
        &lt;tr tal:repeat="item container/objectValues"&gt;
          &lt;td tal:content="repeat/item/number"&gt;#&lt;/td&gt;
          &lt;td tal:content="item/id"&gt;Id&lt;/td&gt;
          &lt;td tal:content="item/meta_type"&gt;Meta-Type&lt;/td&gt;
          &lt;td tal:content="item/title"&gt;Title&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;</pre>

<p>    The <code>tal:repeat</code> statement on the table row means

    "repeat this row for each item in my container's list of

    object values".  The repeat statement puts the objects from

    the list into the <code>item</code> variable one at a time, and

    makes a copy of the row using that variable.  The value

    of "item/id" in each row is the Id of the object for that row.</p>

<p>    You can use any name you like for the "item" variable, as long as

    it starts with a letter and contains only letters, numbers, and

    underscores (<code>_</code>).  It only exists in the &lt;tr&gt; tag; If you

    tried to use it above or below that tag you would get an error.</p>

<p>    You also use the <code>tal:repeat</code> variable name to get

    information about the current repetition.  By placing it

    after the builtin variable <code>repeat</code> in a path, you can access

    the repetition count starting from zero (<code>index</code>), from one (<code>number</code>),

    from "A" (<code>Letter</code>), and in several other ways. So, the

    expression <code>repeat/item/number</code> is <code>1</code> in the first row, <code>2</code>

    in the second row, and so on.</p>

<p>    Since one <code>tal:repeat</code> loop can be placed inside of another, more

    than one can be active at the same time.  This is why you

    must write <code>repeat/item/number</code> instead of just

    <code>repeat/number</code>. You must specify which loop you are interested in by

    including the loop name.</p>

<h2>Conditional Elements</h2>

<p>    View the template, and you'll notice that the table is very

    dull looking.  Let's improve it by shading alternate rows.

    Copy the second row of the table, then

    edit the code so that it looks like this:</p>

<pre>      &lt;table border="1" width="100%"&gt;
        &lt;tr&gt;
          &lt;th&gt;#&lt;/th&gt;&lt;th&gt;Id&lt;/th&gt;&lt;th&gt;Meta-Type&lt;/th&gt;&lt;th&gt;Title&lt;/th&gt;
        &lt;/tr&gt;
        &lt;tbody tal:repeat="item container/objectValues"&gt;
          &lt;tr bgcolor="#EEEEEE" tal:condition="repeat/item/even"&gt;
            &lt;td tal:content="repeat/item/number"&gt;#&lt;/td&gt;
            &lt;td tal:content="item/id"&gt;Id&lt;/td&gt;
            &lt;td tal:content="item/meta_type"&gt;Meta-Type&lt;/td&gt;
            &lt;td tal:content="item/title"&gt;Title&lt;/td&gt;
          &lt;/tr&gt;
          &lt;tr tal:condition="repeat/item/odd"&gt;
            &lt;td tal:content="repeat/item/number"&gt;#&lt;/td&gt;
            &lt;td tal:content="item/id"&gt;Id&lt;/td&gt;
            &lt;td tal:content="item/meta_type"&gt;Meta-Type&lt;/td&gt;
            &lt;td tal:content="item/title"&gt;Title&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/tbody&gt;
      &lt;/table&gt;</pre>

<p>    The <code>tal:repeat</code> has not changed, you have just moved it onto

    the new <code>tbody</code> tag.  This is a standard HTML tag meant to

    group together the body rows of a table, which is how you are

    using it.  There are two rows in the body, with identical

    columns, and one has a grey background.</p>

<p>    View the template's source, and you see both rows.  If you

    had not added the <code>tal:condition</code> statements to the rows,

    then the template would generate both rows for every item,

    which is not what you want.  The <code>tal:condition</code> statement

    on the first row ensures that it is only included on even-indexed repetitions, while the second row's condition only

    lets it appear in odd-indexed repetitions.</p>

<p>    A <code>tal:condition</code> statement does nothing if its expression

    has a true value, but removes the entire statement tag,

    including its contents, if the value is false. The <code>odd</code> and

    <code>even</code> properties of <code>repeat/item</code> are either zero or one.

    The number zero, a blank string, an empty list, and the

    builtin variable <code>nothing</code> are all false values.  Nearly

    every other value is true, including non-zero numbers, and

    strings with anything in them (even spaces!).</p>

<h2>Defining Variables</h2>

<p>Note: In Plone 4 or newer, use <em>container/value</em>s instead of <em>container/objectValues</em> below.<br></p>

<p>Your template will always show at least one row, since

    the template itself is one of the objects listed.  In other

    circumstances, you might want to account for the possibility

    that the table will be empty.  Suppose you want to simply

    omit the entire table in this case.  You can do this by

    adding a <code>tal:condition</code> to the table:</p>

<pre>      &lt;table border="1" width="100%"
             tal:condition="container/objectValues"&gt;</pre>

<p>    Now, when there are no objects, no part of the table will be

    included in the output.  When there are objects, though, the

    expression "container/objectValues" will be evaluated twice,

    which is mildly inefficient.  Also, if you wanted to change

    the expression, you would have to change it in both places.</p>

<p>    To avoid these problems, you can define a variable to hold

    the list, and then use it in both the <code>tal:condition</code> and the

    <code>tal:repeat</code>.  Change the first few lines of the table to

    look like this:</p>

<pre>      &lt;table border="1" width="100%"
             tal:define="items container/objectValues"
             tal:condition="items"&gt;
        &lt;tr&gt;
          &lt;th&gt;#&lt;/th&gt;&lt;th&gt;Id&lt;/th&gt;&lt;th&gt;Meta-Type&lt;/th&gt;&lt;th&gt;Title&lt;/th&gt;
        &lt;/tr&gt;
        &lt;tbody tal:repeat="item items"&gt;</pre>

<p>    The <code>tal:define</code> statement creates the variable <code>items</code>, and you

    can use it anywhere in the table tag.  Notice also how you can

    have two TAL attributes on the same <code>table</code> tag.  You can, in

    fact, have as many as you want.  In this case, they are evaluated

    in order.  The first assigns the variable <code>items</code> and the second

    uses <code>items</code> in a condition to see whether or not it is false (in

    this case, an empty sequence) or true.</p>

<p>    Now, suppose that instead of simply leaving the table out when

    there are no items, you want to show a message.  To do this, you

    place the following above the table:</p>

<pre>      &lt;h4 tal:condition="not:container/objectValues"&gt;There
      Are No Items&lt;/h4&gt;</pre>

<p>    You can't use your <code>items</code> variable here, because it isn't defined

    yet.  If you move the definition to the <code>h4</code> tag, you can't use it

    in the <code>table</code> tag any more, because it becomes a <em>local</em> variable

    of the <code>h4</code> tag.  You could place the definition on some tag that

    enclosed both the <code>h4</code> and the <code>table</code>, but there is a simpler

    solution.  By placing the keyword <code>global</code> in front of the

    variable name, you can make the definition last from the <code>h4</code> tag

    to the bottom of the template:</p>

<pre>      &lt;h4 tal:define="global items container/objectValues"
          tal:condition="not:items"&gt;There Are No Items&lt;/h4&gt;
      &lt;table border="1" width="100%"
          tal:condition="items"&gt;</pre>

<p>    The <code>not:</code> in the first <code>tal:condition</code> is an expression type

    prefix that can be placed in front of any expression.  If the

    expression is true, <code>not:</code> is false, and vice versa.</p>

<h2>Changing Attributes</h2>

<p>    Most, if not all, of the objects listed by your template have an

    <code>icon</code> property, that contains the path to the icon for that kind

    of object.  In order to show this icon in the meta-type column,

    you will need to insert this path into the <code>src</code> attribute of an

    <code>img</code> tag, by editing the meta-type column in both rows to look

    like this:</p>

<pre>      &lt;td&gt;
          &lt;img src="/misc_/OFSP/Folder_icon.gif"
               tal:attributes="src item/icon"&gt;
          &lt;span tal:replace="item/meta_type"&gt;Meta-Type&lt;/span&gt;
      &lt;/td&gt;</pre>

<p>    The <code>tal:attributes</code> statement replaces the <code>src</code> attribute of the

    image with the value of <code>item/icon</code>.  The value of <code>src</code> in the

    template acts as a placeholder, so that the image is not broken,

    and is the correct size.</p>

<p>    Since the <code>tal:content</code> attribute on the table cell would have

    replaced the entire contents of the cell, including the image,

    with the meta-type text, it had to be removed.  Instead, you

    insert the meta-type inline in the same fashion as the URL at the

    top of the page.</p>

<p class="discreet">Based on the <a href="http://www.zope.org/Documentation/Books/ZopeBook/">Zope Book</a>, Â©

<a href="http://www.zope.com/">Zope Corporation</a></p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.2.1.3.
                Macros and Slots
            </h1>

            <p class="documentDescription"></p>
    
            <div>
                
                    <div><h2>Macros</h2>

<p>So far, you've seen how Page Templates can be used to add dynamic
behavior to individual web pages. Another feature of page templates is
the ability to reuse look and feel elements across many pages.</p>

<p>For example, with Page Templates, you can have a site that has a
standard look and feel. No matter what the "content" of a page, it will
have a standard header, side-bar, footer, and/or other page elements.
This is a very common requirement for web sites, and this is exactly
how Plone works.</p>

<p>You can reuse presentation elements across pages with <strong>macros</strong>.
Macros define a section of a page that can be reused in other pages. A
macro can be an entire page, or just a chunk of a page such as a header
or footer. After you define one or more macros in one Page Template,
you can use them in other Page Templates.</p>

<h3>Using Macros</h3>

<p>You can define macros with tag attributes similar to TAL statements. Macro tag attributes are called <strong>Macro Expansion Tag Attribute Language (METAL)</strong> statements. Here's an example macro definition:</p>

<pre>&lt;p metal:define-macro="copyright"&gt;
  Copyright 2008, &lt;em&gt;Foo, Bar, and Associates&lt;/em&gt; Inc.
&lt;/p&gt;</pre>

<p>This <span class="visualHighlight">metal:define-macro</span> statement defines a macro named "copyright". The macro consists of the <span class="visualHighlight">p</span> element (including all contained elements, ending with the closing <span class="visualHighlight">p</span> tag).</p>

<p>Macros defined in a Page Template are stored in the template's <em>macros</em> attribute. You can use macros from other Page Templates by referring to them through the <em>macros</em> attribute of the Page Template in which they are defined. For example, suppose the <em>copyright</em> macro is in a Page Template called "master_page". Here's how to use the <em>copyright</em> macro from another Page Template:</p>

<pre>&lt;hr /&gt;
&lt;b metal:use-macro="container/master_page/macros/copyright"&gt;
  Macro goes here
&lt;/b&gt;
</pre>

<p>In this Page Template, the <span class="visualHighlight">b</span> element will be completely replaced by the macro when Zope renders the page:</p>

<pre>&lt;hr /&gt;
&lt;p&gt;
  Copyright 2008, &lt;em&gt;Foo, Bar, and Associates&lt;/em&gt; Inc.
&lt;/p&gt;</pre>

<p>If you change the macro (for example, if the copyright holder
changes) then all Page Templates that use the macro will automatically
reflect the change.</p>

<p>Notice how the macro is identified by a path expression using the <span class="visualHighlight">metal:use-macro</span> statement. The <span class="visualHighlight">metal:use-macro</span> statement replaces the statement element with the named macro.</p>

<h3>Macro Details</h3>

<p>The <span class="visualHighlight">metal:define-macro</span> and <span class="visualHighlight">metal:use-macro</span> statements are pretty simple. However there are a few subtleties to using them which are worth mentioning.</p>

<p>A macro's name must be unique within the Page Template in which it
is defined. You can define more than one macro in a template, but they
all need to have different names.</p>

<p>It should also be noted that, despite the <span class="visualHighlight">define-macro</span>
attribute, the macro is anyway a regular section of the template; so,
when you call the whole template, the macro section is rendered in the
output page just like any other section in the template. By using the <span class="visualHighlight">define-macro</span> attribute you are simply <strong>adding</strong>
some sort of "anchor" to that section, so that you can call it from
outside; but you are not changing anything regarding the behaviour of
that same section in the template itself.</p>

<p>Normally you'll refer to a macro in a <span class="visualHighlight">metal:use-macro</span> statement with a path expression. However, you can use any expression type you wish so long as it returns a macro. For example:</p>

<pre>&lt;p metal:use-macro="python:context.getMacro()"&gt;
  Replaced with a dynamically determined macro,
&nbsp; which is located by the getMacro script.
&lt;/p&gt;</pre>

<p>In this case the path expression returns a macro defined dynamically by the <span class="visualHighlight">getMacro</span> script. Using Python expressions to locate macros lets you dynamically vary which macro your template uses.</p>

<p>You can use the <span class="visualHighlight">default</span> variable with the <span class="visualHighlight">metal:use-macro</span> statement:</p>

<pre>&lt;p metal:use-macro="default"&gt;
&nbsp; This content remains - no macro is used
&lt;/p&gt;</pre>

<p>The result is the same as using <span class="visualHighlight">default</span> with <span class="visualHighlight">tal:content</span> and <span class="visualHighlight">tal:replace</span>.
The "default" content in the tag doesn't change when it is rendered.
This can be handy if you need to conditionally use a macro or fall back
on the default content if it doesn't exist.</p>

<p>If you try to use the <span class="visualHighlight">nothing</span> variable with <span class="visualHighlight">metal:use-macro</span> you will get an error, since <span class="visualHighlight">nothing</span> is not a macro. If you want to use <span class="visualHighlight">nothing</span> to conditionally include a macro, you should instead enclose the <span class="visualHighlight">metal:use-macro</span> statement with a <span class="visualHighlight">tal:condition</span> statement.</p>

<p>Zope handles macros first when rendering your templates. Then Zope evaluates TAL expressions. For example, consider this macro:</p>

<pre>&lt;p metal:define-macro="title"
&nbsp;&nbsp; tal:content="template/title"&gt;
&nbsp; template's title
&lt;/p&gt;</pre>

<p>When you use this macro it will insert the title of the template in
which the macro is used, not the title of the template in which the
macro is defined. In other words, when you use a macro, it's like
copying the text of a macro into your template and then rendering your
template.</p>

<h2>Using Slots</h2>

<p>Macros are much more useful if you can override parts of them when you use them. You can do this by defining <strong>slots</strong> in the macro that you can fill in when you use the template. For example, consider a side bar macro:</p>

<pre>&lt;div metal:define-macro="sidebar"&gt;
&nbsp; Links
&nbsp; &lt;ul&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/products"&gt;Products&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/support"&gt;Support&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/contact"&gt;Contact Us&lt;/a&gt;&lt;/li&gt;
&nbsp; &lt;/ul&gt;
&lt;/div&gt;</pre>

<p>This macro is fine, but suppose you'd like to include some
additional information in the sidebar on some pages. One way to
accomplish this is with slots:</p>

<pre>&lt;div metal:define-macro="sidebar"&gt;
&nbsp; Links
&nbsp; &lt;ul&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/products"&gt;Products&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/support"&gt;Support&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/contact"&gt;Contact Us&lt;/a&gt;&lt;/li&gt;
&nbsp; &lt;/ul&gt;
&nbsp; &lt;span metal:define-slot="additional_info"&gt;&lt;/span&gt;
&lt;/div&gt;</pre>

<p>When you use this macro you can choose to fill the slot like so:</p>

<pre>&lt;p metal:use-macro="container/master_page/macros/sidebar"&gt;
&nbsp; &lt;b metal:fill-slot="additional_info"&gt;
&nbsp;&nbsp;&nbsp; Make sure to check out our &lt;a href="/specials"&gt;specials&lt;/a&gt;.
&nbsp; &lt;/b&gt;
&lt;/p&gt;</pre>

<p>When you render this template the side bar will include the extra information that you provided in the slot:</p>

<pre>&lt;div&gt;
&nbsp; Links
&nbsp; &lt;ul&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/products"&gt;Products&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/support"&gt;Support&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/contact"&gt;Contact Us&lt;/a&gt;&lt;/li&gt;
&nbsp; &lt;/ul&gt;
&nbsp; &lt;b&gt;
&nbsp;&nbsp;&nbsp; Make sure to check out our &lt;a href="/specials"&gt;specials&lt;/a&gt;.
&nbsp; &lt;/b&gt;
&lt;/div&gt;</pre>

<p>Notice how the span element that defines the slot is replaced with the b element that fills the slot.</p>

<h3>Customizing Default Presentation</h3>

<p>A common use of slot is to provide default presentation which you
can customize. In the slot example in the last section, the slot
definition was just an empty span element. However, you can provide
default presentation in a slot definition. For example, consider this
revised sidebar macro:</p>

<pre>&lt;div metal:define-macro="sidebar"&gt;
&nbsp; &lt;div metal:define-slot="links"&gt;
&nbsp; Links
&nbsp; &lt;ul&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/products"&gt;Products&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/support"&gt;Support&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/contact"&gt;Contact Us&lt;/a&gt;&lt;/li&gt;
&nbsp; &lt;/ul&gt;
&nbsp; &lt;/div&gt;
&nbsp; &lt;span metal:define-slot="additional_info"&gt;&lt;/span&gt;
&lt;/div&gt;</pre>

<p>Now the sidebar is fully customizable. You can fill the links slot
to redefine the sidebar links. However, if you choose not to fill the
links slot then you'll get the default links, which appear inside the
slot definition.</p>

<p>You can even take this technique further by defining slots inside of
slots. This allows you to override default presentation with a fine
degree of precision. Here's a sidebar macro that defines slots within
slots:</p>

<pre>&lt;div metal:define-macro="sidebar"&gt;
&nbsp; &lt;div metal:define-slot="links"&gt;
&nbsp; Links
&nbsp; &lt;ul&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/products"&gt;Products&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/support"&gt;Support&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a href="/contact"&gt;Contact Us&lt;/a&gt;&lt;/li&gt;
&nbsp;&nbsp;&nbsp; &lt;span metal:define-slot="additional_links"&gt;&lt;/span&gt;
&nbsp; &lt;/ul&gt;
&nbsp; &lt;/div&gt;
&nbsp; &lt;span metal:define-slot="additional_info"&gt;&lt;/span&gt;
&lt;/div&gt;</pre>

<p>If you wish to customize the sidebar links you can either fill the <em>links</em> slot to completely override the links, or you can fill the <em>additional_links</em> slot to insert some extra links after the default links. You can nest slots as deeply as you wish.</p>

<h2>Combining METAL and TAL</h2>

<p>You can use both METAL and TAL statements on the same elements. For example:</p>

<pre>&lt;ul metal:define-macro="links"
&nbsp;&nbsp;&nbsp; tal:repeat="link context/getLinks"&gt;
&nbsp; &lt;li&gt;
&nbsp;&nbsp;&nbsp; &lt;a href="link_url"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tal:attributes="href link/url"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tal:content="link/name"&gt;link name&lt;/a&gt;
&nbsp; &lt;/li&gt;
&lt;/ul&gt;</pre>

<p>In this case, <span class="visualHighlight">getLinks</span> is a (imaginary) Script that assembles a list of link objects, possibly using a Catalog query.</p>

<p>Since METAL statements are evaluated before TAL statements, there
are no conflicts. This example is also interesting since it customizes
a macro without using slots. The macro calls the <span class="visualHighlight">getLinks</span> Script to determine the links. You can thus customize your site's links by redefining the <span class="visualHighlight">getLinks</span> Script at different locations within your site.</p>

<p>It's not always easy to figure out the best way to customize look
and feel in different parts of your site. In general you should use
slots to override presentation elements, and you should use Scripts to
provide content dynamically. In the case of the links example, it's
arguable whether links are content or presentation. Scripts probably
provide a more flexible solution, especially if your site includes link
content objects.</p>

<h2>Whole Page Macros</h2>

<p>Rather than using macros for chunks of presentation shared between
pages, you can use macros to define entire pages. Slots make this
possible. Here's an example macro that defines an entire page:</p>

<pre>&lt;html metal:define-macro="page"&gt;
&nbsp; &lt;head&gt;
&nbsp;&nbsp;&nbsp; &lt;title tal:content="context/title"&gt;The title&lt;/title&gt;
&nbsp; &lt;/head&gt;

&nbsp; &lt;body&gt;
&nbsp;&nbsp;&nbsp; &lt;h1 metal:define-slot="headline"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tal:content="context/title"&gt;title&lt;/h1&gt;

&nbsp;&nbsp;&nbsp; &lt;p metal:define-slot="body"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This is the body.
&nbsp;&nbsp;&nbsp; &lt;/p&gt;

&nbsp;&nbsp;&nbsp; &lt;span metal:define-slot="footer"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;p&gt;Copyright 2008 Fluffy Enterprises&lt;/p&gt;
&nbsp;&nbsp;&nbsp; &lt;/span&gt;

&nbsp; &lt;/body&gt;
&lt;/html&gt;</pre>

<p>This macro defines a page with three slots: <em>headline</em>, <em>body</em>, and <em>footer</em>. Notice how the <em>headline</em> slot includes a TAL statement to dynamically determine the headline content.</p>

<p>You can then use this macro in templates for different types of
content, or different parts of your site. For example here's how a
template for news items might use this macro:</p>

<pre>&lt;html metal:use-macro="container/master_page/macros/page"&gt;

&nbsp; &lt;h1 metal:fill-slot="headline"&gt;
&nbsp;&nbsp;&nbsp; Press Release:
&nbsp;&nbsp;&nbsp; &lt;span tal:replace="context/getHeadline"&gt;Headline&lt;/span&gt;
&nbsp; &lt;/h1&gt;

&nbsp; &lt;p metal:fill-slot="body"
&nbsp;&nbsp;&nbsp;&nbsp; tal:content="context/getBody"&gt;
&nbsp;&nbsp;&nbsp; News item body goes here
&nbsp; &lt;/p&gt;

&lt;/html&gt;</pre>

<p>This template redefines the <em>headline</em> slot to include the words "Press Release" and call the <span class="visualHighlight">getHeadline</span> method on the current object. It also redefines the <em>body</em> slot to call the <span class="visualHighlight">getBody</span> method on the current object.</p>

<p>The powerful thing about this approach is that you can now change the <em>page</em>
macro and the press release template will be automatically updated. For
example you could put the body of the page in a table and add a sidebar
on the left and the press release template would automatically use
these new presentation elements.</p>

<p class="discreet">Based on the <a href="http://www.zope.org/Documentation/Books/ZopeBook/">Zope Book</a>, Â©

<a href="http://www.zope.com/">Zope Corporation</a></p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.2.1.4.
                Advanced Usage
            </h1>

            <p class="documentDescription">In
this part we'll look at some more advanced features of the Template
Attribute Language, including a more in-depth look at the TAL
Expression Syntax (TALES).</p>
    
            <div>
                
                    <div><h2>Mixing and Matching Statements</h2>

<p>    As you have seen in the example template, you can put more

    than one TAL statement on the same tag.  There are three

    limits you should be aware of, however:</p>

<ol><li>

<p>Only one of each kind of statement can be used on a single

    tag.  Since HTML does not allow multiple attributes with the

    same name, you can't have two <code>tal:define</code> on the same tag.</p>

</li><li>

<p>Both of <code>tal:content</code> and <code>tal:replace</code> cannot be used on

    the same tag, since their functions conflict.</p>

</li><li>

<p>The order in which you write TAL attributes on a tag does

    not affect the order in which they execute.  No matter how

    you arrange them, the TAL statements on a tag always execute

    in the following order: <code>define</code>, <code>condition</code>, <code>repeat</code>,

    <code>content</code> / <code>replace</code>, <code>attributes</code>.</p>

</li></ol><p>    To get around these limits, you can add another tag and

    split up the statements between the tags.  If there is no

    obvious tag type that would fit, use <code>span</code> or <code>div</code>.</p>

<p>    For example, if you want to define a variable for each

    repetition of a paragraph, you can't place the <code>tal:define</code>

    on the same tag as the <code>tal:repeat</code>, since the definition

    would happen before all of the repetitions.  Instead, you

    would write either of the following:</p>

<pre>      &lt;div tal:repeat="ph phrases"&gt;
        &lt;p tal:define="n repeat/ph/number"&gt;
        Phrase number &lt;span tal:replace="n"&gt;1&lt;/span&gt; is
        &lt;b tal:content="ph"&gt;Phrase&lt;/b&gt;.&lt;/p&gt;
      &lt;/div&gt;

      &lt;p tal:repeat="ph phrases"&gt;
        &lt;span tal:define="n repeat/ph/number"&gt;
        Phrase number &lt;span tal:replace="n"&gt;1&lt;/span&gt; is
        &lt;b tal:content="ph"&gt;Phrase&lt;/b&gt;".&lt;/span&gt;
      &lt;/p&gt;</pre>

<p class="discreet">Note: the definition of "n" is actually not much

useful in this example because we could have directly used

"repeat/ph/number" in the replace attribute which only occurs once, but

it serves our purpose.</p>

<h2>Statements with Multiple Parts</h2>

<p>    If you need to set multiple attributes on a tag, you

    can't do it by placing multiple <code>tal:attributes</code> statements

    on the tag, and splitting them across tags is useless.</p>

<p>    Both the <code>tal:attributes</code> and <code>tal:define</code> statements can

    have multiple parts in a single statement.  You separate the

    parts with semicolons (<code>;</code>), so any semicolon appearing in an

    expression in one of these statements must be escaped by

    doubling it (<code>;;</code>).  Here is an example of setting both the

    <code>src</code> and <code>alt</code> attributes of an image:</p>

<pre>      &lt;img src="default.jpg"
           tal:attributes="src item/icon; alt item/id"&gt;</pre>

<p>    Here is a mixture of variable definitions:</p>

<pre>      &lt;span tal:define="global logo context/logo.gif; ids context/objectIds"&gt;</pre>

<p><strong>Note:</strong> in Plone 4 or newer you can use <em>context/items</em> instead of <em>context/objectIds</em>.</p>

<h2>String Expressions</h2>

<p>    String expressions allow you to easily mix path expressions

    with text.  All of the text after the leading <code>string:</code> is

    taken and searched for path expressions.  Each path

    expression must be preceded by a dollar sign (<code>$</code>).  If it

    has more than one part, or needs to be separated from the

    text that follows it, it must be surrounded by braces (<code>{}</code>).

    Since the text is inside of an attribute value, you can only

    include a double quote by using the entity syntax <code>&amp;quot;</code>.  Since dollar signs are used to signal path

    expressions, a literal dollar sign must be written as two

    dollar signs (<code>$$</code>). For example:</p>

<pre>      &lt;span tal:replace="string:Just text."/&gt;
      &lt;span tal:replace="string:Â© $year, by Me."/&gt;
      &lt;span tal:replace="string:Three ${vegetable}s, please."/&gt;
      &lt;span tal:replace="string:Your name is ${user/getUserName}!"/&gt;
      &lt;span tal:replace="string:She answered &amp;quot;$answer&amp;quot;."/&gt;
      &lt;span tal:replace="string:This product costs $price $$."/&gt;</pre>

<h2>Nocall Path Expressions</h2>

<p>    An ordinary path expression tries to render the object

    that it fetches.  This means that if the object is a function,

    Script, Method, or some other kind of executable thing, then

    the expression will evaluate to the result of calling the object.

    This is usually what you want, but not always.  For example,

    if you want to put a DTML Document into a variable so that

    you can refer to its properties, you can't use a normal path

    expression because it will render the Document into a string.</p>

<p>    If you put the <code>nocall:</code> expression type prefix in front of a

    path, it prevents the rendering and simply gives you the

    object.  For example:</p>

<pre>      &lt;span tal:define="doc nocall:context/aDoc"
            tal:content="string:${doc/id}: ${doc/title}"&gt;
      Id: Title&lt;/span&gt;</pre>

<p>    This expression type is also valuable when you want to define

    a variable to hold a function or class from a module, for use

    in a Python expression.</p>

<h2>Other Builtin Variables</h2>

<p>    You have already seen some examples of the builtin variables

    <code>template</code>, <code>user</code>, <code>repeat</code>, and <code>request</code>.

    Here is a more complete list of the other builtin variables and

    their uses:</p>

<dl><dt>nothing </dt><dd>A false value, similar to a blank string, that

      you can use in <code>tal:replace</code> or <code>tal:content</code> to erase a

      tag or its contents.  If you set an attribute to <code>nothing</code>,

      the attribute is removed from the tag (or not inserted),

      unlike a blank string. Equivalent to <code>None</code> in Python.</dd><dt>default </dt><dd>A special value that doesn't change anything

      when used in <code>tal:replace</code>, <code>tal:content</code>, or

      <code>tal:attributes</code>.  It leaves the template text in place.</dd><dt>options </dt><dd>The <em>keyword</em> arguments, if any, that were

      passed to the template.</dd><dt>attrs </dt><dd>A dictionary of attributes of the current tag in

      the template.  The keys are the attributes names, and the

      values are the original values of the attributes in the

      template.</dd><dt>root </dt><dd>The root Zope object.  Use this to get

      Zope objects from fixed locations, no matter where your

      template is placed or called.</dd><dt>context </dt><dd>The object on which the template is being called.

      This is often the same as the <em>container</em>, but can be

      different if you are using acquisition.  Use this to get

      Zope objects that you expect to find in different places

      depending on how the template is called.</dd><dt>here </dt><dd>An (older) alias for <em>context</em>. </dd><dt>container </dt><dd>The container (usually a Folder) in which the

      template is kept.  Use this to get Zope objects from

      locations relative to the template's permanent home. </dd><dt>request </dt><dd>Contains the complete information about the current HTTP request that Zope is processing. See <a class="external-link" href="http://wiki.zope.org/zope2/REQUESTX">this page in the zope.org wiki</a> for further info about the request object. </dd><dt>modules </dt><dd>The collection of Python modules available to

      templates.  See the section on writing Python expressions. </dd><dt>view </dt><dd>For templates called from a Zope 3-style view

<em>only</em>, this variable refers to the associated view class. This

may then contain functions and variables prepared explicitly for the

template to output </dd></dl><h2>Alternate Paths</h2>

<p>    The path <code>template/title</code> is guaranteed to exist every time

    the template is used, although it may be a blank string.

    Some paths, such as <code>request/form/x</code>, may not exist during

    some renderings of the template.  This normally causes an

    error when the path is evaluated.</p>

<p>    When a path doesn't exist, you often have a fallback path or

    value that you would like to use instead.  For instance, if

    <code>request/form/x</code> doesn't exist, you might want to use <code>context/x</code>

    instead.  You can do this by listing the paths in order of

    preference, separated by vertical bar characters (<code>|</code>):</p>

<pre>      &lt;h4 tal:content="request/form/x | context/x"&gt;Header&lt;/h4&gt;</pre>

<p>    Two variables that are very useful as the last path in a list

    of alternates are <code>nothing</code> and <code>default</code>.  Use <code>nothing</code> to

    blank the target if none of the paths is found, or <code>default</code>

    to leave the example text in place.</p>

<p>    You can also test the existence of a path directly with the

    <code>exists:</code> expression type prefix.  A path expression with

    <code>exists:</code> in front of it is true if the path exists, false

    otherwise.  These examples both display an error message only

    if it is passed in the request:</p>

<pre>      &lt;h4 tal:define="err request/form/errmsg | nothing"
          tal:condition="err" tal:content="err"&gt;Error!&lt;/h4&gt;

      &lt;h4 tal:condition="exists:request/form/errmsg"
          tal:content="request/form/errmsg"&gt;Error!&lt;/h4&gt;</pre>

<h2>Dummy Elements</h2>

<p>    You can include page elements that are visible in the

    template but not in generated text by using the builtin

    variable <code>nothing</code>, like this:</p>

<pre>      &lt;tr tal:replace="nothing"&gt;
        &lt;td&gt;10213&lt;/td&gt;&lt;td&gt;Example Item&lt;/td&gt;&lt;td&gt;$15.34&lt;/td&gt;
      &lt;/tr&gt;</pre>

<p>    This can be useful for filling out parts of the page that

    will take up more of the generated page than of the template.

    For instance, a table that usually has ten rows will only

    have one row in the template.  By adding nine dummy rows, the

    template's layout will look more like the final result.</p>

<h2>Inserting Structure</h2>

<p>    Normally, the <code>tal:replace</code> and <code>tal:content</code> statements

    quote the text that they insert, converting <code>&lt;</code> to <code>&amp;lt;</code>,

    for instance.  If you actually want to insert the unquoted

    text, you need to precede the expression with the <code>structure</code>

    keyword.  Given a variable <code>copyright</code> with a string value of "Â© 2008 By &lt;b&gt;Me&lt;/b&gt;", the following two

    lines:</p>

<pre>      &lt;span tal:replace="copyright"&gt;Copyright 2008&lt;/span&gt;
      &lt;span tal:replace="structure copyright"&gt;Copyright 2008&lt;/span&gt;</pre>

<p>    ...will generate "Â© 2001 By &lt;b&gt;Me&lt;/b&gt;"

    and "Â© 2001 By <strong>Me</strong>", respectively.</p>

<p>    This feature is especially useful when you are inserting a

    fragment of HTML that is stored in a property or generated by

    another Zope object.  For instance, you may have news items

    that contain simple HTML markup such as bold and italic text

    when they are rendered, and you want to preserve this when

    inserting them into a "Top News" page.  In this case, you

    might write:</p>

<pre>      &lt;p tal:repeat="article topnewsitems"
         tal:content="structure article"&gt;A News Article&lt;/p&gt;</pre>

<h2><a name="basic-python-expressions" id="basic-python-expressions"></a>Basic Python Expressions</h2>

<p>    A Python expression starts with <code>python:</code>, followed by an

    expression written in the Python language. Python is a simple and expressive programming language.  If you

    have never encountered it before, you should read one of the

    excellent tutorials or introductions available at the official website

    <a href="http://www.python.org/">http://www.python.org</a>.</p>

<p>    A Page Template Python expression can contain anything that

    the Python language considers an expression.  You can't use

    statements such as <code>if</code> and <code>while</code>, and Zope's security

    restrictions are applied.</p>

<h4>Comparisons</h4>

<p>      One place where Python expressions are practically

      necessary is in <code>tal:condition</code> statements.  You usually

      want to compare two strings or numbers, and there isn't any

      other way to do that. You can use the comparison operators

      <code>&lt;</code> (less than), <code>&gt;</code> (greater than), <code>==</code> (equal to), and

      <code>!=</code> (not equal to).  You can also use the boolean

      operators <code>and</code>, <code>not</code>, and <code>or</code>.  For example:</p>

<pre>        &lt;p tal:repeat="widget widgets"&gt;
          &lt;span tal:condition="python:widget.type == 'gear'"&gt;
          Gear #&lt;span tal:replace="repeat/widget/number"&gt;1&lt;/span&gt;:
          &lt;span tal:replace="widget/name"&gt;Name&lt;/span&gt;
          &lt;/span&gt;
        &lt;/p&gt;</pre>

<p>      Sometimes you want to choose different values inside a

      single statement based on one or more conditions.  You can

      do this with the <code>test</code> function, like this:</p>

<pre>        You &lt;span tal:define="name user/getUserName"
              tal:replace="python:test(name=='Anonymous User', 'need to log in', default)"&gt;
              are logged in as
              &lt;span tal:replace="name"&gt;Name&lt;/span&gt;
            &lt;/span&gt;

        &lt;tr tal:define="oddrow repeat/item/odd"
            tal:attributes="class python:test(oddrow, 'oddclass', 'evenclass')"&gt;</pre>

<h4>Using other Expression Types</h4>

<p>      You can use other expression types inside of a Python

      expression.  Each type has a corresponding function with

      the same name, including <code>path()</code>, <code>string()</code>, <code>exists()</code>,

      and <code>nocall()</code>.  This allows you to write expressions such

      as:</p>

<pre>        "python:path('context/%s/thing' % foldername)"
        "python:path(string('context/$foldername/thing'))"
        "python:path('request/form/x') or default"</pre>

<p>      The final example has a slightly different meaning than the

      path expression "request/form/x | default", since it will

      use the default text if "request/form/x" doesn't exists

      <em>or</em> if it is false.</p>

<h2>Getting at Zope Objects</h2>

<p>    Much of the power of Zope involves tying together specialized

    objects.  Your Page Templates can use Scripts, SQL

    Methods, Catalogs, and custom content objects.

    In order to use them, you have to know how to

    get access to them.</p>

<p>    Object properties are usually attributes, so you can get a

    template's title with the expression "template.title". Most

    Zope objects support acquisition, which allows you to

    get attributes from "parent" objects.  This means that the

    Python expression "context.Control_Panel" will acquire the

    Control Panel object from the root folder.  Object methods

    are attributes, as in "context.objectIds" and "request.set".

    Objects contained in a folder can be accessed as attributes

    of the folder, but since they often have Ids that are not

    valid Python identifiers, you can't use the normal notation.

    For example, instead of writing "context.penguin.gif", you must

    write "getattr(context, 'penguin.gif')".</p>

<p>    Some objects, such as <code>request</code>, <code>modules</code>, and Zope Folders

    support item access.  Some examples of this are:</p>

<pre>      request['URL'], modules['math'], and context['thing']</pre>

<p>    When you use item access on a Folder, it doesn't try to

    acquire the name, so it will only succeed if there is

    actually an object with that Id contained in the folder.</p>

<p>Path expressions allow you to

    ignore details of how you get from one object to the next.

    Zope tries attribute access, then item access.

    You can write "context/images/penguin.gif" instead of

    "python:getattr(context.images, 'penguin.gif')", and

    "request/form/x" instead of "python:request.form['x']".</p>

<p>    The tradeoff is that path expressions don't allow you to

    specify those details.  For instance, if you have a form

    variable named "get", you must write

    "python:request.form['get']", since "request/form/get" will

    evaluate to the "get" <em>method</em> of the form dictionary.</p>

<h2>Using Scripts</h2>

<p>    Script objects are often used to encapsulate business logic

    and complex data manipulation.  Any time that you find

    yourself writing lots of TAL statements with complicated

    expressions in them, you should consider whether you could do

    the work better in a script.</p>

<p>    Each script has a list of parameters that it expects to be

    given when it is called.  If this list is empty, then you can

    use the script by writing a path expression.  Otherwise, you

    will need to use a Python expression, like this:</p>

<pre>      "python:context.myscript(1, 2)"
      "python:context.myscript('arg', foo=request.form['x'])"</pre>

<p>    If you want to return more than a single bit of data from a script to a page template, it is a good idea to return it in

    a dictionary.  That way, you can define a variable to hold

    all the data, and use path expressions to refer to each bit.

    For example, supposing we have a <code>getPerson</code> script which returns a dictionary like <code>{'name':'Fred', 'age':25}</code>:</p>

<pre>      &lt;span tal:define="person context/getPerson"
            tal:replace="string:${person/name} is ${person/age}"&gt;
      Name is 30&lt;/span&gt; years old.</pre>

<h2>Calling DTML</h2>

<p>DTML is another templating language made available by Zope, mostly

replaced by ZPT nowadays, but still in use. You can read more about it

in <a href="http://www.zope.org/Documentation/Books/ZopeBook/current/DTML.stx">the relevant chapter of the Zope Book</a>.</p>

<p>    Unlike Scripts, DTML Methods don't have an explicit parameter

    list.  Instead, they expect to be passed a client, a mapping,

    and keyword arguments.  They use these to construct a

    namespace.</p>

<p>    When Zope's ZPublisher publishes a DTML object, it passes the

    context of the object as the client, and the REQUEST as the

    mapping.  When one DTML object calls another, it passes

    its own namespace as the mapping, and no client.</p>

<p>    If you use a path expression to render a DTML object, it will

    pass a namespace with <code>request</code>, <code>context</code>, and the template's

    variables already on it.  This means that the DTML object

    will be able to use the same names as if it were being

    published in the same context as the template, plus the

    variable names defined in the template.</p>

<h2>Python Modules</h2>

<p>    The Python language comes with a large number of modules,

    which provide a wide variety of capabilities to Python

    programs.  Each module is a collection of Python functions,

    data, and classes related to a single purpose, such as

    mathematical calculations or regular expressions.</p>

<p>    Several modules, including "math" and "string", are available

    in Python Expressions by default.  For example, you can get

    the value of <em>pi</em> from the math module by writing "python:math.pi".

    To access it from a path expression, however, you need to use

    the <code>modules</code> variable.  In this case, you would use "modules/math/pi".

    Please refer to the Zope Book or a DTML reference guide for more

    information about these modules.</p>

<p>    The "string" module is hidden in Python expressions by the "string"

    expression type function, so you need to access it through

    the <code>modules</code> variable.  You can do this directly in an expression

    in which you use it, or define a global variable for it, like this:</p>

<pre>      tal:define="global mstring modules/string"
      tal:replace="python:mstring.join(slist, ':')"</pre>

<p>    Modules can be grouped into packages, which are simply

    a way of organizing and naming related modules.  For instance,

    Zope's Python-based Scripts are provided by a collection of

    modules in the "PythonScripts" subpackage of the Zope "Products"

    package.  In particular, the "standard" module in this package

    provides a number of useful formatting functions that are

    standard in the DTML "Var" tag.  The full name of this module

    is "Products.PythonScripts.standard", so you could get access to it

    using either of the following statements:</p>

<pre>      tal:define="pps modules/Products.PythonScripts.standard"
      tal:define="pps python:modules['Products.PythonScripts.standard']"</pre>

<p>    Most Python modules cannot be accessed from Page Templates, DTML, or

    Scripts unless you add Zope security assertions to them.  That's

    outside the scope of this document, and is covered by the <a href="http://www.zope.org/Documentation/Books/ZDG/current/Security.stx">Zope

    Security Guide</a>.</p>

<h2>Special HTML attributes<br></h2>

<p>The HTML boolean attributes <cite>checked<em>,</em></cite> <cite>selected</cite>, <em>nowrap</em>, <em>compact</em>, <em>ismap</em>, <em>declare</em>, <em>noshade</em>, <em>disabled</em>, <em>readonly</em>, <em>multiple</em>, <em>selected</em> and <em>noresize</em> are treated

differently by <cite>tal:attributes</cite>. The value is treated as true or false (as

defined by <cite>tal:condition</cite>). The attribute is set to <cite>attr=âattrâ</cite> in the true

case and omitted otherwise. If the value is <cite>default</cite>, then it is treated as

true if the attribute already exists, and false if it does not. For example,

each of the following lines:</p>

<div class="highlight-python">

<pre>&lt;input type="checkbox" checked tal:attributes="checked default"&gt;
&lt;input type="checkbox" tal:attributes="checked string:yes"&gt;
&lt;input type="checkbox" tal:attributes="checked python:42"&gt;</pre>

</div>

<p>will render as:</p>

<div class="highlight-python">

<pre>&lt;input type="checkbox" checked="checked"&gt;</pre>

</div>

<p>while each of these:</p>

<div class="highlight-python">

<pre>&lt;input type="checkbox" tal:attributes="checked default"&gt;
&lt;input type="checkbox" tal:attributes="checked string:"&gt;
&lt;input type="checkbox" tal:attributes="checked nothing"&gt;</pre>

</div>

<p>will render as:</p>

<div class="highlight-python">

<pre>&lt;input type="checkbox"&gt;</pre>

</div>

<p class="discreet">This article contains information and examples from the <a class="external-link" href="http://docs.zope.org/zope2/zope2book/source/index.html">Zope Book</a>, Â© <a class="external-link" href="http://docs.zope.org/zope2/zope2book/source/Contributions.html">Zope Developers Community.<br></a></p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.2.1.5.
                Global Template Variables
            </h1>

            <p class="documentDescription">Plone defines a few useful global variables to use them in your templates</p>
    
            <div>
                
                    <div><p>While
writing templates for Plone, you will notice a set of variables you use
more often, like the URL of the portal or the currently authenticated
member.</p>

<p>For your convenience, Plone defines a few global template variables
that are pulled into main_template via global_defines. Some of the most
useful ones are:</p>

<dl><dt>portal </dt><dd>The portal object. </dd><dt>portal_url </dt><dd>The url of the portal. </dd><dt>member</dt><dd>The current user (<code>None</code> if user is anonymous)</dd><dt>checkPermission </dt><dd>A function to check if the current user has a certain permission in the current context, e.g. <code>checkPermission('View portal content', context)</code>.</dd><dt>isAnon</dt><dd>True if the current user is not logged in. </dd><dt>is_editable </dt><dd>True if the current user has edit permissions in the context.<br></dd><dt>default_language </dt><dd>The default language of the portal.</dd><dt>here_url </dt><dd>The URL of the current object. </dd></dl><p>To see the full list list of these variables, see <a class="external-link" href="http://dev.plone.org/plone/browser/Plone/branches/3.2/Products/CMFPlone/browser/interfaces.py#L199">the docstring for <code>globalize()</code> in the interface <code>Products.CMFPlone.browser.interfaces.IPlone</code></a>.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.2.1.6.
                Customizing AT Templates
            </h1>

            <p class="documentDescription">This
tutorial describes the steps to produce a fully-customized view of an
Archetypes object. This is applicable to tweaking little details of the
default AT behavior as well as gutting and re-building the view from
scratch. (contributed by Floyd May)</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-5">

            <h1>
                5.2.1.6.1.
                Introduction
            </h1>

            <p class="documentDescription">Goals, Pre-Requisites, and Tools</p>
    
            <div>
                
                    <div><p>
So you think Archetypes' way of automagically generating HTML to view
your object isn't pretty enough? Well, you've come to the right place!
I'm going to teach you how to dress up those boring, drab views and
make them <em>shine</em>!</p>
<h2>    Goals: What will I learn?</h2>

<ul><li>How Archetypes generates views for content objects</li>
<li>How much control Archetypes gives you</li>
<li>How to change the HTML output for a particular field by creating a custom widget template</li>
<li>How to use the Archetypes template framework to make minor changes to the default AT-generated view</li>
<li>How to customize the HTML output for the entire view of an Archetypes object by using the <code>title</code>,<code>body</code>,<code>folderlisting</code>, and <code>footer</code> macros</li>

</ul><h2>    Pre-Requisites: What do I need to know?</h2>

<ul><li>How to read and write Python code</li>
<li>How to read and write Zope Page Templates (ZPT)</li>
<li>How to create Archetypes-based products (ArchGenXML is acceptable)</li>

</ul><h2>    Tools: What do I need to have installed?</h2>

<ul><li>Plone 2.0 or 2.1</li>
<li>Archetypes (included by default in Plone 2.1)</li>
<li><a href="http://plone.org/documentation/manual/theme-reference/buildingblocks/skin/templates/customizing-at-templates/atviewtutorial.tgz">The ATViewTutorial product</a> - this product has examples of the concepts in this tutorial
</li>

</ul></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-5">

            <h1>
                5.2.1.6.2.
                What Makes It Tick?
            </h1>

            <p class="documentDescription">This
page describes how Archetypes uses different templates to generate
HTML, and how AT-based template customization can be applied.</p>
    
            <div>
                
                    <div><p>Archetypes has a very clever system for generating HTML pages for AT-based objects.  The same set of templates generates <strong>all</strong> of the content areas for <strong>all</strong> AT-based objects.  This buys you the following benefit, useful for site consistency:</p>

<ul><li>All the pages look the same.</li>

</ul><p>However, it also has the following drawback:</p>

<ul><li>All the pages look the same.</li>

</ul><p>Different types of content need to be displayed differently.
Let's dig into how Archetypes does things, so we can figure out how to
make your content types <em>shine</em>!</p>
<h2>The <code>base_view</code> Template</h2>
<p>    The <code>base_view</code> template (found in the archetypes skin) handles selecting the appropriate

    macros from the appropriate templates, and using those macros to display content objects.

    If you look at this piece of code from 'base_view':
</p><pre>        &lt;tal:block define="portal_type python:here.getPortalTypeName().lower().replace(' ', '_');
                           view_template python:'%s_view' % portal_type;
                           view_macros python:path('here/%s/macros|nothing' % view_template);
                           macro view_macros/css | nothing"
                   condition="macro"&gt;
</pre>

<p>You can see that it defines the variable <code>view_template</code> as the object's Portal Type Name converted to lowercase, with spaces replaced with underscores (_), followed by <code>_view</code>.  So, MyType's view template, for instance, would be called <code>mytype_view</code>.</p>
<p>Now, before we move on, I must warn you: don't edit <code>base_view</code>.  Seriously.  Don't.<a href="http://plone.org/documentation/manual/theme-reference/buildingblocks/skin/templates/customizing-at-templates/what-makes-it-tick#ref1">[1]</a></p>
<p>No, really.  Don't customize <code>base_view</code>.  If you think you need to customize <code>base_view</code>, first, well... don't.  Keep reading the tutorial.  If you're certain, after reading the tutorial, that you need to customize <code>base_view</code>, again, <strong>don't!</strong>  Write a clear, concise example indicating why, after reading this tutorial, you believe you should customize <code>base_view</code>, and send it to the <code>archetypes-users</code> mailing list.  If you <em>really do</em> need to customize <code>base_view</code>,
you've found a shortcoming in Archetypes, and the people on the list
will inform you if that's the case. So, repeat after me: "Don't
customize <code>base_view</code>."  Good!</p>
<p>Now, there are six important macros to be aware of. These six macros
give you the power to insert template code that is customized for your
class. These macros are:</p>
<dl><dt><code>js</code></dt>
<dd>A macro to insert javascript into the <code>&lt;head&gt;</code> tag of the generated HTML page</dd>
<dt><code>css</code></dt>
<dd>A macro to insert CSS includes and style code into the <code>&lt;head&gt;</code> tag of the page</dd>
<dt><code>header</code></dt>
<dd>The macro that defines the topmost portion of the content area.  By default, this macro has an <code>&lt;h1&gt;</code> tag that contains the title, and links for printing, emailing, etc. on the right. </dd>
<dt><code>body</code></dt>
<dd>The macro that defines the "body" area of the content.  This is where the fields and their values are displayed.</dd>
<dt><code>folderlisting</code></dt>
<dd>This macro shows a list of the child content for the object.  Don't confuse this with <code>folder_contents</code>, this is what the <code>view</code> tab shows for folderish objects.  Folderish objects use both the <code>body</code> macro and the <code>folderlisting</code> macro.</dd>
<dt><code>footer</code></dt>
<dd>This is where AT puts the byline.</dd>
</dl><p><img src="plone-theme-references_archivos/at-folderish-screenshot.jpg" alt="This image shows the areas generated by the header, body, and folderlisting macros"></p>
<p>As you can see, the <code>header</code> macro generates what's outlined in the area marked ''header'' in red, the <code>body</code> macro generates the content just beneath it, and the <code>folderlisting</code> macro generates the listing of the objects within the folderish object.</p>
<p>The <code>base_view</code> template automatically pulls the appropriate macro from the custom view template (<code>mytype_view</code>, from our earlier ad-hoc example), or from the next template that we are going to explore: <code>base</code>.</p>
<h2>The <code>base</code> Template</h2>
<p>    The <code>base</code> template contains four of the six macros that <code>base_view</code> looks for:</p>

<ul><li><code>header</code></li>
<li><code>body</code></li>
<li><code>folderlisting</code></li>
<li><code>footer</code></li>

</ul><p>The only reason why I mention <code>base</code> is so that you
know where AT's default behavior comes from. This is important if you
only want to change a little bit of a type's view. It's often helpful
to copy the macro from <code>base</code> into your custom view template, and then start tweaking and customizing.</p>
<h2>Widgets</h2>
<p>    Widgets are what Archetypes uses to display fields.  Widgets have two parts:</p>
<dl><dt>The widget class</dt>
<dd>This class defines data and behavior for the widget. In most cases,
you'll never need to create a custom 'Widget'-derived class. See
Archetypes/Widget.py for examples.</dd>
<dt>The widget template</dt>
<dd>This is a ZPT that provides three macros: <code>view</code>, <code>edit</code>, and <code>search</code>.
These macros display the field. Some of the macros depend on certain
variables being defined in the calling template, so pay close
attention. Most often, you'll only need to provide a custom widget
template, and not a custom widget class.</dd>
</dl><p>There are all kinds of widgets out there to do all kinds of things.  The <a href="http://plone.org/products/archetypes/documentation/manual/quickref">Archetypes Quick Reference Manual</a> covers the details for the various widgets in Archetypes.</p>
<p><a name="ref1" id="ref1">[1]</a> Unless you're wiggy.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-5">

            <h1>
                5.2.1.6.3.
                Customizing Widgets
            </h1>

            <p class="documentDescription">This
page shows you how to customize widgets, and gives some examples of
what kinds of neat tricks can be done with widget customization.</p>
    
            <div>
                
                    <div><div id="parent-fieldname-text" class="kssattr-atfieldname-text kssattr-templateId-widgets/rich kssattr-macro-rich-field-view">

<p>As we've already said, widgets are what Archetypes uses to display individual fields.  Archetypes' built-in templates, <code>base_view</code>,<code>base</code>, and <code>widgets/field</code>

use each field and the field's associated widget (specified in the

schema) to determine which widget template to use. However, you can

override a widget's template, as we will show below. Furthermore, you

can create a whole new widget class, which will have data and

operations specific to the display of your custom data type. Read the

next section to determine how much widget hacking you need to do.</p>

<h2>How to Determine If You Need to Create A Custom Widget Class</h2>

<p> If you cannot find a widget in Archetypes or in a readily-available

third-party product that does what you need, use the following set of

questions to determine if you can just customize the <strong>template</strong> versus creating a new <strong>widget class</strong>.  If you answer "no" to the following questions, a custom template is all you need:</p>

<ul><li>Does the display of your field require helper functions to do

conversions or formatting that would be difficult or cumbersome in

TALES?</li><li>Do you have multiple AT-based classes where some fields in those classes share all of the the following characteristics?

<ul><li>The same data type</li><li>Similar, needs for display</li><li>One or more attributes that are class-specific that apply to the

display (i.e. the most appropriate place to set these attributes is in

the schema definition)</li></ul></li><li>Does your custom data type need some super-specific marshalling

when edited or searched that you can't get from any standard AT widget

class?</li><li>Do you need to override or change the way that Archetypes handles the processing of the <code>edit</code> form for a particular field?</li></ul><p>If you answered yes to most of the questions, then you might need to

create a Widget class. If the questions aren't clear, take a look at

the <a href="http://plone.org/tutorial/richdocument">RichDocument tutorial</a> .  If you've got a specific enough use-case (like RichDocument) that you <em>need</em> custom widget classes, you're probably able to make it happen just by the sheer fact that you <em>know</em> you need them. <a href="http://localhost:8080/samplecontent/test-page#ref1">[1]</a></p>

<h2>Customizing Widget Templates</h2>

<p> Creating custom widget templates is not hard, so don't be afraid. I

assume if you're reading this far, you've already determined that you

don't need a custom widget class, and just need to tinker a little bit

with how things are done by default.</p>

<p>First, you should understand what you have control over by

customizing a widget template itself. You're controlling the display of

the widget's <em>data</em>, but not its <em>label</em>.  For a StringField called <code>myfield</code>, the default display is something like:</p>

<p><strong>myfield:</strong> some value</p>

<p>The only thing we can control is the display of what comes after "<strong>myfield:</strong>",

which is just the data contained within the field itself (we'll talk

about how to customize the display of labels later). However, if we

customize the template, we can insert <em>all kinds</em> of nifty HTML into there!  So, let's look at StringWidget's template, 'widget/string':</p>

<p>It's pretty straight-forward.  As you can see, there are three important macros in a widget template:</p>

<ul><li><code>view</code></li><li><code>edit</code></li><li><code>search</code></li></ul><p>Don't concern yourself with the <code>edit</code> and <code>search</code> macros; remember, we're customizing the <em>view</em>.  Let's start by creating a new template called <code>my_string_widget</code> <a href="http://localhost:8080/samplecontent/test-page#ref2">[2]</a>.  Start like this:</p>

<p>Notice how we use the same pass-through macro call in the <code>edit</code> macro that the <code>string</code> template originally uses in the <code>search</code> macro.  It's important to remember the following concept: <strong>Widget templates must define all three macros:</strong> <code>view</code>, <code>edit</code>, and <code>search</code>.  Also, notice how there is no display code for the label; that's handled elsewhere.  If you're wondering where the <code>accessor</code>

variable comes from, that's part of the widget display code. The widget

class defines the following local variables that are accessible inside

widget templates:</p>

<dl><dt><code>accessor</code></dt><dd>The accessor method for the field.  Call it to retrieve the value of the field.</dd><dt><code>fieldName</code></dt><dd>The name of the field.</dd><dt><code>widget</code></dt><dd>The widget object for the field.</dd><dt><code>field</code></dt><dd>The instance of the field class itself.</dd><dt><code>mode</code></dt><dd>Will be <code>view</code> or <code>edit</code>, based on the action being taken.  For our purposes, it should always be <code>view</code>.</dd></dl><p>Now, let's modify the way that our StringField displays.  For brevity, I'll just show the <code>view</code> macro:</p>

<p>Then, we should tell our type's schema to point at the new template:</p>

<pre>    StringField('myfield',
        widget=StringWidget(
            label='Myfield',
            label_msgid='ATViewTutorial_label_myfield',
            description_msgid='ATViewTutorial_help_myfield',
            i18n_domain='ATViewTutorial',
            macro='my_string_widget',
        )
    ),
</pre>

<p>Be sure to restart Zope and reinstall using <code>portal_quickinstaller</code>.  Now, our StringField, when rendered, looks like this:</p>

<p><img class="image-inline" src="plone-theme-references_archivos/image_preview_004.jpeg" alt="Custom Widget"></p>

<p>Yes, folks, it's <em>just that easy</em>.</p>

<p><a name="ref1" id="ref1">[1]</a> Again, this probably only applies to wiggy.</p>

<p><a name="ref2" id="ref2">[2]</a> Notice I'm breaking AT's convention here. You

don't have to do that, but I find it more convenient and understandable

to add a <code>_widget</code> to the names of my widget templates.</p>

</div>

<div class="relatedItems">&nbsp;</div></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-5">

            <h1>
                5.2.1.6.4.
                Total Control: The View Template
            </h1>

            <p class="documentDescription">This page describes how you can control every portion of the HTML output in the content area by creating a custom view template.</p>
    
            <div>
                
                    <div><div id="parent-fieldname-text" class="kssattr-atfieldname-text kssattr-templateId-widgets/rich kssattr-macro-rich-field-view">

<p>Okay,

so you've hacked up some custom widget templates, and they're basking

in the glory of your newfound power, yet you're still not satisfied.

You want to control it <strong>all</strong>!  Well, <em>I've</em> got the information for <em>you</em>!</p>

<h2>Archetypes and Type-Specific View Templates</h2>

<p> Archetypes automatically recognizes templates with specific names,

and uses the code within those templates to display your AT-based

object. All of this magic happens within the <code>base_view</code> template.  To create a custom view template, convert your type name to lowercase (the name that's listed in <code>portal_types</code>, or what's returned from <code>myObject.portal_type</code>).  Now, replace spaces with underscores ( _ ).  Finally, add <code>_view</code> to the end of the name, and you've <em>almost</em> got a custom view template.</p>

<p>See below for examples of type names and their corresponding view templates.</p>













<table><tbody><tr><th valign="middle" align="left">

<p> Type Name</p>

</th><th valign="middle" align="left">

<p>  View Template Name</p>

</th></tr><tr><td valign="middle" align="left">

<p> My Type</p>

</td><td valign="middle" align="left">

<p>  <code>my_type_view</code></p>

</td></tr><tr><td valign="middle" align="left">

<p> SomeTypeV2</p>

</td><td valign="middle" align="left">

<p>  <code>sometypev2_view</code></p>

</td></tr></tbody></table><p>Now, to remedy that "almost" part of the above paragraph, define one or more of the following macros in your template:</p>

<ul><li><code>header</code></li><li><code>body</code></li><li><code>folderlisting</code></li><li><code>footer</code></li></ul><p>Voila! You've got a custom view template. To see how this works,

create a simple template (named appropriately, of course) that contains

the following code:</p>

<pre>          Foo

          Foo

          Foo

          Foo</pre>

<p>And, just like magic, you should see, rendered in your content area:</p>

<p><img class="image-inline" src="plone-theme-references_archivos/image_preview_002.jpeg" alt="The Infamous &quot;Foo&quot; View"></p>

<h2>But Wait!  Where Are All My Fields?</h2>

<p> So now you want your data back. You said you wanted total control,

and now you don't want total control. But the point of this tutorial

isn't control, it's <em>shine</em>. So, let's explore how to mix and

match existing AT templates with your custom code to make a shiny

template that renders exactly how <em>you</em> want it.</p>

<p>First, keep the above "Foo" template around. It's very useful when

you aren't quite sure which of the four macros is generating a portion

of the content area. Simply comment out one or more of the macros, and

you'll see which macro generates what portion.</p>

<p>Now, do you remember when I talked about using the <code>base</code>

template as a starting point for creating custom templates? Well,

that's what we'll do. Let's start by customizing the footer. The <code>footer</code> macro in the following template is copied directly from 'base':</p>

<pre><div>

Get the byline - contains details about author and modification date.</div>
</pre>

<p>Now, let's add something below the byline, say, some important information that applies to every instance of your custom type::</p>

<pre><div>

Get the byline - contains details about author and modification date.</div>
<p>Important information that applies to every instance of my custom type.</p>
</pre>

<p>Notice that all we had to do was copy the macro from <code>base</code> , and add the <code>

&lt;p&gt;</code> tag with some text in it.  Notice that, for example, we could have used <code>tal:content="here/getCustomFooterData"</code> in the <code>&lt;/p&gt;

&lt;p&gt;</code> tag if we had defined a <code>getCustomFooterData()</code> method in our class.</p>

<p>Now, let's apply this concept to the <code>body</code> macro, and play around with displaying fields.  First, we'll start by coping the <code>body</code> from <code>base</code> into our template.</p>

<p>Now, we'll change up some things by adding a little bit of code into the macro.  First, notice that the <code>tal:repeat</code>

is repeating over all the fields that are not metadata. Therefore, if

you want to do something for every field, put it inside this macro. You

could (conceivably) rearrange the macro so that the <code>tal:repeat</code> loop is inside another containing block, and put TAL code before and after the display of the fields, or make use of the <code>first</code> and <code>last</code> <code>repeat</code> variables to achieve the same thing.  So, let's do two things to customize our <code>body</code> macro:</p>

<ul><li>Surround all the fields with a <code>&lt;/p&gt;

&lt;div&gt;</code> that has a custom CSS class, <code>my-custom-at-body</code></li><li>Surround each field with a <code>

&lt;div&gt;</code> that has a different custom CSS class, <code>my-custom-at-field</code></li></ul><div class="my-custom-at-body">

<div class="my-custom-at-field">&nbsp;</div>

</div>

<p>These changes, as I'm sure you've figured out, aren't going to make

much of a difference (if any) in the look of the rendered page without

actually writing some custom CSS code. We now introduce the <code>css</code> macro:</p>

<pre>&lt;link href="#" type="text/css" rel="stylesheet" /&gt;
&lt;div class="my-custom-at-body"&gt;
&lt;div class="my-custom-at-field"&gt;&amp;nbsp;&lt;/div&gt;
&lt;/div&gt;</pre>

<p>Now, we can define a CSS stylesheet called <code>my_custom_css.css</code> that contains our custom CSS code:</p>

<pre>    .my-custom-at-body {
        border: thin dashed;
        background-color: #cccccc;
        padding-top: 1em;
    }

    .my-custom-at-field {
        background-color: #ffffff;
    }</pre>

<p>Archetypes inserts the <code>css</code> macro into the '' tag of the

rendered page, making our custom CSS code, linked files, and includes

available within the page. Our end-result would look something like

this:</p>

<p><img class="image-inline" src="plone-theme-references_archivos/image_preview_003.jpeg" alt="Custom Body Macro"></p>

<p>If we had created custom widget templates, those would be applied to the rendered page as well.</p>

</div>

<h2>Customizing Labels</h2>

<div id="parent-fieldname-text" class="kssattr-atfieldname-text kssattr-templateId-widgets/rich kssattr-macro-rich-field-view">

<p>There's still one element of control that we're missing: we still

can't override the display of a field label. By customizing the display

of the label, we can insert images, links, etc. into the page instead

of the default label.</p>

<p>The macro included in our custom view template below will do that magic for us:</p>

<pre>&lt;link href="#" type="text/css" rel="stylesheet" /&gt;
&lt;div class="my-custom-at-body"&gt;
&lt;div class="my-custom-at-field"&gt;&amp;nbsp;&lt;/div&gt;
&lt;/div&gt;
&lt;label&gt;Now presenting... Field1!&lt;/label&gt;</pre>

<p>Notice that I've only overridden the default label for fields labeled "myfield".  The <code>label</code> macro in <code>widgets/field</code> is where the default behavior can be found.  The final result looks like this:</p>

<p><img class="image-inline" src="plone-theme-references_archivos/image_preview.jpeg" alt="Customized Label"></p>

<p>Also, don't forget that you have the power to omit <code>head</code>,<code>body</code>,<code>folderlisting</code>, and <code>footer</code>

by simply writing in do-nothing macros into your view template.

Furthermore, you can reach into your object and retrieve field values

without using the widget framework.</p>

</div></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-5">

            <h1>
                5.2.1.6.5.
                Conclusion
            </h1>

            <p class="documentDescription">Some final notes about customizing Archetypes view templates</p>
    
            <div>
                
                    <div><p>So, now you should know all of the following information:</p>

<ul><li>How to identify which parts of an Archetypes view template are generated by the <code>header</code>,<code>body</code>,<code>folderlisting</code>, and <code>footer</code> macros</li>
<li>How to create a custom view template that overrides one or more of the <code>header</code>,<code>body</code>,<code>folderlisting</code>, and <code>footer</code> macros</li>
<li>How to create a custom widget template that works in the Archetypes framework</li>
<li>How to create a custom <code>body</code> template that uses Archetypes' widget rendering templates</li>
<li>How to inject custom CSS code and links to custom CSS files into your view template</li>

</ul><h2>Some Final Notes</h2>
<p> I want to cover a few details about how to apply all of these
tools. Some wise guy somewhere said something like, "To a man whose
only tool is a hammer, every problem tends to look like a nail." Your
success with Archetypes is very contingent upon selecting the
appropriate tool for your specific problem. So, use the following
outline of the basic AT page layout as a guideline to determine what
should be customized:</p>

<ul><li><code>header</code> macro
<ul><li>Title (or id if no title is present)</li>
<li>Document actions (e.g. print, send to)</li>

</ul></li>
<li><code>body</code> macro
<ul><li>List of fields
<ul><li>Field label (from the <code>label</code> macro in the view template, if one exists)</li>
<li>Field value (from the widget template's <code>view</code> macro)</li>

</ul></li>

</ul></li>
<li><code>folderlisting</code> macro
<ul><li>List of links to each sub-object</li>

</ul></li>
<li><code>footer</code> macro
<ul><li>byline</li>

</ul></li>

</ul><p>So, based on which parts of this standard layout you need to
customize, use the appropriate macro. Keep the infamous "Foo" template
around to help you with debugging. See the next page for a reference on
customizing Archetypes view templates.
</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-5">

            <h1>
                5.2.1.6.6.
                Reference
            </h1>

            <p class="documentDescription">A reference for customizing Archetypes view templates</p>
    
            <div>
                
                    <div><h2>View Templates</h2>
<p>    View templates are named according to the <code>portal_type</code> of the class.  To create the name for a view template, follow these steps to create the name of the template:</p>

<ol><li>Change the <code>portal_type</code> to lowercase.</li>
<li>Replace all spaces with underscores (<code>_</code>).</li>
<li>Append <code>_view</code> to the end of the name.</li>

</ol><p>Archetypes will automatically locate templates with names
created according to the above steps, and will make use of the macros
defined within the template. View templates can define one or more of
the following macros:</p>
<dl><dt><code>css</code></dt>
<dd>A macro for inserting type-specific CSS code, including <code>&lt;link&gt;</code>
tags pointing to custom CSS files. There is no default macro for this
within Archetypes; Archetypes uses the existing CSS styles in Plone to
render AT-based objects.</dd>
<dt><code>header</code></dt>
<dd>This macro, by default, generates the <code>&lt;h1&gt;</code> tag containing the object's title and the document actions (print, rss, e.g.)</dd>
<dt><code>body</code></dt>
<dd>The location where the fields and values are displayed by default.
When rendering fields using the existing widget mechanism, be sure to <code>tal:define</code> the variable <code>field</code> as the current field; the widget templates depend on this variable being set.</dd>
<dt><code>folderlisting</code></dt>
<dd>This is the folder listing display when viewing the <code>view</code> tab of a folderish object.  This is <strong>not</strong> the same as the <code>contents</code> view.</dd>
<dt><code>footer</code></dt>
<dd>By default, this is where Archetypes puts the byline.</dd>
<dt><code>label</code></dt>
<dd>This template generates field labels.</dd>
</dl><p>For any of these macros that is not defined in the custom view
template, Archetypes will use the default behavior in its place, taken
from <code>base</code> or <code>widgets/field</code>.</p>
<h2>Widget Templates</h2>
<p>    Use custom widget templates by naming them in the schema - insert a <code>macro</code> parameter into the widget's constructor in the schema, and set the value to the name of the template.  For example, <code>macro="my_widget_template"</code>.  Widget templates must have the following three macros:</p>

<ul><li><code>view</code></li>
<li><code>edit</code></li>
<li><code>search</code></li>

</ul><p>Widget templates have the following local variables available within TALES expressions:</p>
<dl><dt><code>accessor</code></dt>
<dd>The accessor method for the current field.  The code <code>&lt;p tal:content="accessor" /&gt;</code> will cause the field's value to be written within the <code>&lt;p&gt;</code> tag.</dd>
<dt><code>fieldName</code></dt>
<dd>The name of the field.</dd>
<dt><code>widget</code></dt>
<dd>The widget object for the field.</dd>
<dt><code>mode</code></dt>
<dd>Will always be <code>view</code> for view templates, but is useful for, say, error checking.
</dd>
</dl></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.2.1.7.
                How to customise view or edit on archetypes content items 
            </h1>

            <p class="documentDescription">Explains one way to customise the view or edit templates without having to change the action of an object. </p>
    
            <div>
                
                    <div id="parent-fieldname-text" class="kssattr-atfieldname-text kssattr-templateId-widgets/rich kssattr-macro-rich-field-view">

<h2 class="Heading">Reasons/Use Cases<br></h2>

<p>I

usually like to customise as little as possible so that more of my page

templates are just like the plone default templates. I find this helps

when I move to a new version and also makes doing styling using CSS

easier.</p>

<p>Another use case is if I want to generate a form using

the schema but I need it to do different things based on which button

is pushed, you can accomplish this with putting named buttons on the

form in combination by using portal_formcontroller to override what

happens on a submit. E.g. importing data from CSV, in a seperate

schemata I have a form.button.Import button and on this schemata I only

show this button and the cancel button (instead of save, nex previous

etc.) and then I customise the portal_formcontroller action (and

validation) so content_edit (the script that does the saving) goes to a

script that does the importing before going back to the view action.</p>

<h2 class="Heading">Archetypes base_view and base_edit</h2>

<p>Both

of these templates have several macros which are gotten by from other

page templates. They are setup in such a way that they will look for a

template named with the content type for these macros and then default

to the generic archetypes macros. I.e. say you have a content type

'Newsletter' base_view looks for a template named 'newsletter_view' if

it finds it and it contains the right macros it will use those instead

of the default 'view_macros' (found in 'portal_skins/archetypes' skin

folder.</p>

<p>Below is a skeleton example of a custom view template showing the different things you can customise. See base.pt</p>

<pre>&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"

      lang="en"

      metal:use-macro="here/main_template/macros/master"

      i18n:domain="plone"&gt;

&lt;body&gt;



&lt;metal:main fill-slot="main"&gt;

        &lt;!-- header, H1 with title in it --&gt;

        &lt;metal:header define-macro="header"&gt;

        

        &lt;/metal:header&gt;

        

        &lt;!-- body macro where all the fields are --&gt;

        &lt;metal:body define-macro="body"&gt;

                

        &lt;/metal:body&gt;

        

        &lt;!-- folderlisting that shows sub-objects if there are any --&gt;

        &lt;metal:folderlisting define-macro="folderlisting"&gt;

                

                

        &lt;/metal:folderlisting&gt;

        

        &lt;!-- footer, by line created date etc. --&gt;

        &lt;metal:footer define-macro="footer"&gt;

                

        &lt;/metal:footer&gt;

        

&lt;/metal:main&gt;

&lt;/body&gt;

&lt;/html&gt;

</pre>

<p>Below is an skeleton of a custom edit template:</p>

<pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"

      xml:lang="en"

      lang="en"

      xmlns:tal="http://xml.zope.org/namespaces/tal"

      xmlns:metal="http://xml.zope.org/namespaces/metal"

      xmlns:i18n="http://xml.zope.org/namespaces/i18n"

      i18n:domain="plone"&gt;



  &lt;metal:head define-macro="topslot"&gt;

  &lt;/metal:head&gt;

  

  &lt;metal:head define-macro="javascript_head"&gt;

  &lt;/metal:head&gt;



  &lt;body&gt;

        &lt;!-- header, h1 of Edit &lt;Type&gt;, schemata links and webdav lock message --&gt;

        &lt;metal:header define-macro="header"&gt;



        &lt;/metal:header&gt;

        

        &lt;!-- typedesription, typeDescription from the content type --&gt;

        &lt;metal:typedescription define-macro="typedescription"&gt;



        &lt;/metal:typedescription&gt;



        &lt;!-- body, editform , fields, buttons, the default macro 

             contains a number of slots which usually provide enough

             ways to customise so often I use that macro and just 

             fill the slots

        --&gt;

        &lt;metal:body define-macro="body"&gt;

            &lt;metal:default_body use-macro="here/edit_macros/macros/body"&gt;

              &lt;!-- inside the fieldset but above all the fields --&gt;

              &lt;metal:block fill-slot="extra_top"&gt;

              &lt;/metal:block&gt;

              

              &lt;!-- listing of the fields, usually I won't customise this

              &lt;metal:block fill-slot="widgets"&gt;

              &lt;/metal:block&gt;

              --&gt;



              &lt;!-- below the fields above the formControls (hidden fields for refernce stuff is above buttons) --&gt;

              &lt;metal:block fill-slot="extra_bottom"&gt;

              &lt;/metal:block&gt;



              &lt;!-- within the formControls these are the default previous, next, save, cancel buttons --&gt;

              &lt;metal:block fill-slot="buttons"&gt;

              &lt;/metal:block&gt;



              &lt;!-- within the formControls a slot for extra buttons --&gt;

              &lt;metal:block fill-slot="extra_buttons"&gt;

              &lt;/metal:block&gt;



            &lt;/metal:default_body&gt;

        &lt;/metal:body&gt;



        

        &lt;!-- footer, by line created date etc. --&gt;

        &lt;metal:footer define-macro="footer"&gt;

        

        &lt;/metal:footer&gt;



  &lt;/body&gt;



&lt;/html&gt;



</pre>

<p class="Heading">See the templates into <span class="visualHighlight">Products.Archetypes:skins/archetypes</span>

for examples about how does Archetypes work by default: get

the field lists, hook up translation, handle form processing and more.

Using them as a base and customizing only the neccessary bits can make

the job much easier than starting from scratch.</p>

<h2 class="Heading">How to do it<br></h2>

<p>Lets say your content type is '<strong>Newsletter</strong>'</p>

<h3 class="Subheading">Steps for View<br></h3>

<ol><li>Create a page template (either file system of in ZMI) called 'newsletter_view'</li><li>Use

the skeleton and comment out the macros you wish to keep the same. I.e.

the ones you want to use from view_macros template (in

portal_skins/archetypes)<br></li><li>Put your code into the relevant macros/slots.</li><li>Test and you are done.</li></ol><h3 class="Subheading">Steps for Edit</h3>

<ol><li>Create a page template called 'newsletter_edit'</li><li>Use the skeleton and then comment out the macros you wish to use the default for. (from edit_macros).</li><li>Put your code into the relevant macros/slots.</li><li>Test and you are done.</li></ol></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.2.2.
                Where to find what you need
            </h1>

            <p class="documentDescription">Where the skin lives in Plone and in your own theme product.</p>
    
            <div>
                
                    <div><h2>Through the Web</h2>

<p>You can customize all page templates, skins and CSS very easily through the web.</p>

<ul class="listlevel1WW8Num1"><li><a id="imn9"></a><a id="bkmimn9"></a><a id="x8lo"></a><a id="bkmx8lo"></a>Site Setup &gt; Zope Management Interface &gt; portal_skins</li></ul><p><a id="zga5"></a><a id="bkmzga5"></a>Locate the item you want to change, click the customize button and a copy will be dropped into the custom layer for you.</p>

<p>You can also add new page templates, Python scripts and files (for
CSS and JavaScript) to the custom layer by using the drop-down list in
the ZMI. In most cases, though, you will find it easier to locate a
template you want to base your new template on, customize it and then
rename it through the ZMI.</p>

<p>Don't forget that, if you're hunting for something, the Find tab in the ZMI can be very useful.</p>

<h2 id="toc2">Plone Default Skin on the File System</h2>

<p>All the page templates, style sheets, scripts and JavaScript for the Plone Default skin can be found in the CMFPlone product:</p>

<dl><dt>[your products directory]/CMFPlone/skins</dt>

      <dd>You'll
see there are a number of directories corresponding to specific skin
layers. Most of this should be self-explanatory, but its worth
remembering that only the generic templates live in plone_templates. If
you want to track down a specific content view (e.g., document_view)
then you'll need to look in plone_content.</dd></dl><h2 id="toc3">In your own Theme Product</h2>

<dl><dt><img class="image-right" src="plone-theme-references_archivos/your_theme_egg_skin_cutdown.gif" alt="The skins folder in your theme product">/skins/[your theme namespace].[your theme name]_custom_templates | custom_images | styles</dt>

      <dd>These
directories will form your skin layers. Your templates, images, and
style sheets can go here. If you asked it to, the plone3_theme paster
template will have provided blank style sheets to override the Plone
Default ones. </dd>

      <dt>/skins.zcml</dt>

      <dd>When your Zope instance starts up, this turns your directories into skin layers</dd>

      <dt><img class="image-right" src="plone-theme-references_archivos/your_theme_egg_skin_cutdown1.gif" alt="Subsidiary files used for installing and setting up the Skin">/profiles/default/skins.xml | cssregistry.xml | jsregistry.xml</dt>

      <dd>When
your theme is installed in your Plone site, these set up the hierarchy
of skin layers, and register your style sheets and JavaScript with the
registries</dd></dl><div id="Section17Cregion">&nbsp;</div></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.2.3.
                Style Sheets
            </h1>

            <p class="documentDescription">Style Sheets</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.2.3.1.
                The Custom Style Sheet and Base Properties
            </h1>

            <p class="documentDescription">You can do a great deal by simply overriding  Plone's existing styles. There's a stylesheet available for just this purpose.</p>
    
            <div>
                
                    <div><p>You'll find an empty stylesheet called ploneCustom.css in</p>

<ul><li>[your products directory]/CMFPlone/skins/plone_styles or</li><li>Site Setup &gt; Zope Management Interface &gt; portal_skins &gt; plone_styles</li></ul><p>This
stylesheet is always loaded last on a page, and can be used, therefore,
to override any other styles. There's an excellent and comprehensive
tutorial on this here:</p>

<ul><li><a href="http://plone.org/documentation/manual/tutorial/working-with-css">http://plone.org/documentation/tutorial/working-with-css</a></li></ul><p>&nbsp;</p>

<h2>DTML</h2>

<p>You'll see that ploneCustom.css has a .dtml extension, and the 

CSS inside is wrapped in</p>

<pre>/* &lt;dtml-with base_properties&gt; */
 .......
/* &lt;/dtml-with&gt; */</pre>

<p>DTML is another Zope templating language, which in this case is deployed so 

that particular variables can be picked up from a properties sheet 

(base_properties.props) - for example:</p>

<pre>#portal-column-one {
    vertical-align: top;
    <em>width: &lt;dtml-var columnOneWidth missing="16em"&gt;;

</em>    border-collapse: collapse;
    padding: 0;
}</pre>

<p> <br>We wouldn't recommend using this technique as it is likely to be phased 

out, but it is as well to know that it is there. You can sometimes get caught 

out if you're customizing ploneCustom.css and accidentally delete the 

top or bottom "dtml-with" statement, or forget to add the .dtml extension.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.2.3.2.
                CSS
            </h1>

            <p class="documentDescription">Getting familiar with Plone's style sheets</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-5">

            <h1>
                5.2.3.2.1.
                CSS Quick Start
            </h1>

            <p class="documentDescription">instructions for finding and modifying Plone's base_properties and CSS.</p>
    
            <div>
                
                    <div><h2>Purpose, Prerequisites &amp; Audience<br></h2>

<p>This tutorial describes the use of CSS (Cascading Style Sheets) in
Plone 3.x and is intended for site customizers who are familiar with
CSS and have administrative privileges on a Plone site. The approach
here is strictly for making through-the-web modifications to
stylesheets.</p>

<p>No previous knowledge of Python, Plone or Zope is required and
examples will walk those new to Plone through every step required to
make CSS modifications to Plone.&nbsp; If you have set up a Plone site
but are otherwise new to Plone, this tutorial is for you.&nbsp; If you
are a web designer who needs to work as part of a Plone team, this
tutorial might help clarify how CSS is used in Plone.</p>

<h2>Using the Right Tools</h2>

<p>By far, the most popular website CSS introspector tool is Mozilla's <a href="http://getfirebug.com/">Firebug</a> tool. No matter the level of your experience, Firebug is the ultimate CSS debugging tool and all themers should use it.</p>

<p>The basic idea is that you can step through the HTML that frames
your Plone pages, see the CSS that is applied to the HTML. You can even
change the CSS settings on the fly to experiment with the layout of
your site. For help on using Firebug, <a href="http://www.evotech.net/blog/2007/06/introduction-to-firebug/">click here</a>.</p>

<h2>Introduction</h2>

<p>Plone's extensive use of CSS gives customizers a great amount of
control over the appearance of a Plone site.&nbsp; The quickest way to
get a
sense for this is to look at a Plone site with styles disabled in your
browser.&nbsp; In Firefox you can disable styles with "View &gt; Page
Style &gt; No
Style".&nbsp; (Try this now.)&nbsp; Clearly, CSS is very heavily used
which makes for an excellent separation of form and content.</p>

<p>Custom styling of a Plone site can be performed in one of the following ways:</p>

<ol><li>modifying 'base_properties'&nbsp;</li><li>overriding existing style by adding styling information to ploneCustom.css</li><li>adding, deleting or reordering stylesheets</li></ol><p>This tutorial will describe techniques 1 and 2.</p>

<p class="callout">Note that serious customizations of the Plone interface are best done by <a class="external-link" href="http://plone.org/documentation/manual/theme-reference/buildingblocks/skin/how-to/how-to-create-a-plone-3-theme-product-on-the-filesystem">creating custom products</a>.&nbsp;
These allow you to encapsulate all of your style and template changes
in one place, save them and reapply them elsewhere.&nbsp; The
instructions here apply to 'quick and dirty' customizations for an
individual site.</p>

<h2>Navigating the ZMI<br></h2>

<p>The following folders in the ZMI (Zope Management Interface) allow you control what stylesheets are used and their contents:</p>

<dl><dt>ZMI &gt; portal_CSS<br></dt><dd>Controls the registration and ordering of stylesheets within Plone.&nbsp; </dd><dt>&nbsp;ZMI &gt; portal_skins &gt; custom</dt><dd>&nbsp;Location for locally customized versions of the stylesheets found in <strong>ZMI &gt; portal_skins &gt; plone_styles</strong>.</dd><dt>ZMI &gt; portal_skins &gt; plone_styles<br></dt><dd>Location of default base_properties and stylesheets. </dd></dl><h2>Simple Customizations<br></h2>

<h3>Enabling development mode</h3>

<p>Before beginning any CSS customization you should turn on

debug-/development mode.&nbsp; This will guarantee that caching and

compression of CSS is disabled.</p>

<p>Here is how you enable

debug-/development mode:</p>

<ol><li>log on to your Plone site as the 'admin' user or with your manager account<br></li><li>add '/manage' to the URL to access the ZMI</li><li>navigate to <strong>ZMI &gt; portal_css</strong></li><li>click the Debug/development mode checkbox</li><li>click the "Save" button</li></ol><p class="callout">When
you are finished making your CSS modifications you should disable
debug-/development mode as it does impact the performance of your Plone
site.</p>

<h3>Modifying base_properties</h3>

<p>Plone provides a set of base_properties that control some of Plone's

color, font, logo and border defaults.&nbsp; These properties allow you to

modify the basic look-and-feel of a site without working directly with

Plone's CSS files and provides the simplest way to do basic

customization.&nbsp; Individual property names are reasonably

self-explanatory (linkColor, borderStyle, <em>etc.</em>) and accept standard CSS style values.</p>

<p> Here is how you modify the base_properties:</p>

<ol><li>enable development mode</li><li>navigate to <strong>ZMI &gt; portal_skins &gt; plone_styles &gt; base_properties</strong></li><li>click the Customize button</li><li>modify individual properties using CSS style values</li><li>click the "Save Changes" button (at the bottom of the page)</li></ol><p>Section 3 of this tutorial provides more detailed descriptions of each of the base properties.</p>

<h3>Making CSS modifications</h3>

<p>The next step beyond base_property modifications is overriding
Plone's CSS with custom CSS of your own.&nbsp; Plone provides the
ploneCustom.css stylesheet for site customizations.&nbsp; The difficult
part of this for newcomers to plone is figuring out the CSS selectors
that are used within Plone.</p>

<p>For many people, the Firebug or Web Developer Firefox extensions
provide the easiest way to inspect the style associated with HTML
elements in a web page.&nbsp; Either of these provides easy access to
the CSS selectors and style information needed to create a custom
stylesheet.</p>

<p class="callout">Note that the .css files in ZMI &gt; portal_skins
&gt; plone_styles are actualy dtml templates, meaning that they can
utilize base_properties to make global changes via variables.&nbsp;
This means that they may contain references to base_properties
alongside standard CSS as in the following example from public.css:</p>

<pre><code>h1, h2 {

    border-bottom: <strong>&amp;dtml-borderWidth;</strong> <strong>&amp;dtml-borderStyle;</strong> <strong>&amp;dtml-globalBorderColor;</strong>;

    font-weight: normal;

}</code>d</pre>

<p>Here is how you add CSS customizations to your Plone site:</p>

<ol><li>enable development mode</li><li>navigate to <strong>ZMI &gt; portal_skins &gt; plone_styles &gt; ploneCustom.css</strong><br></li><li>click the Customize button</li><li>add CSS <br></li><li>click the "Save Changes" button (at the bottom of the page)<br></li></ol><p>Sections
4 and 5 of this tutorial describe Plone's stylesheets and the CSS
selectors associated with various elements of the Plone interface.</p>

<h2>Restoring default styling</h2>

<p>When you first start playing with base_properties and stylesheets
you will want the freedom to make lots of changes knowing that you can
easily get back to the default settings.&nbsp; Plone makes this easy by
always keeping custom versions of base_properties and stylesheets in a
separate folder. When Plone assembles the CSS stylesheets it looks for
custom versions first and uses these when found.&nbsp; If custom
versions are not found it uses the default versions.&nbsp; To restore
default settings you only need to delete the custom versions.</p>

<p>Here is how you restore default styling to your Plone site:</p>

<ol><li>enable development mode</li><li>navigate to <strong>ZMI &gt; portal_skins &gt; custom</strong><br></li><li>check <strong>base_properties</strong> and/or <strong>ploneCustom.css</strong> (or anything else you've modified)<br></li><li>click the "Delete" button<br></li></ol></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-5">

            <h1>
                5.2.3.2.2.
                CSS Customization Examples
            </h1>

            <p class="documentDescription">Examples of Plone 3.0.x customization through base_properties and CSS.</p>
    
            <div>
                
                    <div><p>The
following examples are provided to get you started making style changes
to your site.&nbsp; They are not intended to be complete
examples.&nbsp; In each case we will take an existing website to use as
our target and make change that imitate the target style.&nbsp;
Finishing up the styling is left as an exercise for the student.</p>

<h2>Example 1:&nbsp; <em>'Austin Neon'</em> style<br></h2>

<p>One of the easiest ways to see what the base_properties control is
to create a 'dark' style for your site.&nbsp; As an example of where
this style is appropriate we will use <a href="http://www.austinneon.com/">Austin Neon</a>
as our target site.&nbsp; As always, the Firebug extension for Firefox
is invaluable for inspecting the style in our target site.&nbsp; If you
haven't already, please install and familiarize yourself with Firebug
before attempting to discover how the target site is styled.</p>

<h3>Initial base_properties settings</h3>

<p>The first step will be to modify our Plone site's base_properties as
outlined in section 1.&nbsp; The following screenshot shows
base_properties that come close to mimicing the colors that are found
in our target site.&nbsp; Go ahead and make these changes to your
base_properties now.&nbsp;</p>

<p><img class="image-inline" src="plone-theme-references_archivos/neon_base_properties.png" alt="neon_base_properties"></p>

<h3>Further styling with CSS</h3>

<p>TODO</p>

<h2>Example 2:&nbsp; <em>'New York Times'</em> style<br></h2>

<p>Anyone wish to make a contribution here?</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-5">

            <h1>
                5.2.3.2.3.
                base_properties
            </h1>

            <p class="documentDescription">Description of all base_properties in Plone 3.0.x</p>
    
            <div>
                
                    <div><p>The following list of base_properties are used for styling throughout Plone.&nbsp; They can be edited through the ZMI at<strong><br></strong></p>

<p><strong>ZMI &gt; portal_skins &gt; plone_styles &gt; base_properties</strong></p>

<h2>Plone 3.0.x base_properties</h2>

<dl><dt>logoName</dt><dd>the file name of the portal logo</dd>

<dt>fontFamily</dt><dd>the font family used for all text that is not headers</dd>

<dt>fontBaseSize</dt><dd>the base font size that everything is calculated from</dd>

<dt>fontColor</dt><dd>the main font color</dd>

<dt>fontSmallSize</dt><dd>used for various elements like buttons and discreet text</dd>

<dt>discreetColor</dt><dd>the font color of discreet text</dd>

<dt>backgroundColor</dt><dd>the background color</dd>

<dt>linkColor</dt><dd>the color used on normal links</dd>

<dt>linkActiveColor</dt><dd>color used on active links</dd>

<dt>linkVisitedColor</dt><dd>color used on visited links</dd>

<dt>borderWidth</dt><dd>the width of most borders in Plone</dd>

<dt>borderStyle</dt><dd>the style of the border lines, normally solid</dd>

<dt>borderStyleAnnotations</dt><dd>style of border lines on comments etc</dd>

<dt>globalBorderColor</dt><dd>the border color used on the main tabs, the portlets etc</dd>

<dt>globalBackgroundColor</dt><dd>background color for the selected tabs, portlet headings etc</dd>

<dt>globalFontColor</dt><dd>the color of the font in the tabs and in portlet headings</dd>

<dt>headingFontFamily</dt><dd>font family for h1/h2/h3/h4/h5/h6 headlines</dd>

<dt>contentViewBorderColor</dt><dd>the content view tabs border color</dd>

<dt>contentViewBackgroundColor</dt><dd>the content view tabs background color</dd>

<dt>contentViewFontColor</dt><dd>the font color used in the content view tabs</dd>

<dt>inputFontColor</dt><dd>the font color used for input elements</dd>

<dt>textTransform</dt><dd>whether to lowercase text in portlets, tabs etc.</dd>

<dt>evenRowBackgroundColor</dt><dd>the background color of even rows in listings</dd>

<dt>oddRowBackgroundColor</dt><dd>the background color of even rows in listings</dd>

<dt>notifyBorderColor</dt><dd>border color of notification elements like the status message, the calendar focus</dd>

<dt>notifyBackgroundColor</dt><dd>background color of notification elements like the status message, the calendar focus</dd>

<dt>lpBackgroundColor</dt><dd>background color of information pop-ups (currently not used)</dd></dl></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-5">

            <h1>
                5.2.3.2.4.
                Default CSS Stylesheets
            </h1>

            <p class="documentDescription">Description of the default CSS stylesheets in Plone 3.0.x.</p>
    
            <div>
                
                    <div><p>Plone's
default stylesheets are described below along with list of the CSS
selectors defined in each.&nbsp; The stylesheets are presented in the
same order they are defined in <strong>ZMI &gt; portal_css</strong> so that style defined in stylesheets lower on the page will override style defined in earlier stylesheets.</p>

<h2>member.css</h2>

<p>Styles for workflow states of logged in users.</p>

<pre>.state-private { ... }
.state-visible { ... }
.state-published { ... }
.state-pending { ... }
.state-expired { ... }
.syndicated { ... }</pre>

<h2>RTL.css</h2>

<p>Right-to-Left styles for Arabic and Hebrew.</p>

<h2>base.css</h2>

<p>Styles for base elements (HTML tags).</p>

<pre>body { ... }
table { ... }
a { ... }
img { ... }
p { ... }
p img { ... }
hr { ... }
h1, h2, h3, h4, h5, h6 { ... }
h1 a{ ... }
h1 { ... }
h2 { ... }
h3 { ... }
h4 { ... }
h5 { ... }
h6 { ... }
ul { ... }
ol { ... }
li { ... }
dt { ... }
dd { ... }
abbr, acronym, .explain { ... }
abbr .explain { ... }
q { ... }
blockquote { ... }
code, tt { ... }
pre { ... }
ins { ... }
del { ... }
</pre>

<h2>public.css</h2>

<p>Lots of styles for public-facing elements.</p>

<pre>/* Accessibility elements, applied by JS */
body.largeText { ... }
body.smallText { ... }

/* Padding for the columns */
#portal-column-one .visualPadding { ... }
#portal-column-two .visualPadding { ... }

/* Content area */
h1, h2 { ... }
body.kssActive h2.inlineEditable:hover, body.kssActive h1.inlineEditable:hover { ... }
h3, h4, h5, h6 { ... }

.documentFirstHeading { ... }
.documentContent { ... }
.documentContent ul { ... }
.documentContent ol { ... }

/* Links with differently colored link underlines - only for content */
.documentContent p a { ... }
.documentContent p a:visited { ... }
.documentContent p a:active { ... }
#content a:target { ... }
.documentContent li a { ... }
.documentContent li a:visited { ... }
.documentContent li a:active { ... }
.documentContent dd a { ... }
.documentContent dd a:visited { ... }
.documentContent dd a:active { ... }
/* End links */

#visual-portal-wrapper { ... }

/* Logo properties */
#portal-logo img { ... }

/* The skin switcher at the top, only shows up if you have multiple skins available */
#portal-skinswitcher { ... }
#portal-skinswitcher a { ... }
#portal-top { ... }

/* Site-wide action menu - font size, contact, index, sitemap etc */
#portal-siteactions { ... }
#portal-siteactions li { ... }
#portal-siteactions li a { ... }
#portal-siteactions li.selected a { ... }
#portal-siteactions li a:hover { ... }

/* Searchbox style and positioning */
#portal-searchbox { ... }
#portal-advanced-search { ... }
#portal-advanced-search a { ... }

/* Search results elements */
dl.searchResults dt { ... }
form.searchPage { ... }
input.searchPage { ... }
form.searchPage input.searchButton { ... }

/* LiveSearch styles */
.LSRes { ... }
#LSHighlight, .LSHighlight { ... }
.LSRow { ... }
.LSRow a { ... }
.LSDescr { ... }
.LSResult { ... }
.LSShadow { ... }
.livesearchContainer { ... }
* html .livesearchContainer { ... }
#livesearchLegend { ... }
* html #livesearchLegend { ... }

/* Workaround for Internet Explorer's broken z-index implementation */
.LSIEFix { ... }
.LSBox { ... }
#LSNothingFound { ... }
.LSBox label { ... }

/* The global section tabs. */
#portal-globalnav { ... }
#portal-globalnav li { ... }
#portal-globalnav li a { ... }
#portal-globalnav li.selected a { ... }
#portal-globalnav li a:hover { ... }
/* Bar with personalized menu (user preferences, favorites etc) */
#portal-personaltools { ... }
#portal-personaltools .portalUser { ... }
/* Used on all descriptions relevant to those not logged in */
#portal-personaltools .portalNotLoggedIn { ... }
#portal-personaltools li { ... }
#portal-personaltools li a { ... }
#portal-personaltools .visualIconPadding { ... }
.visualCaseSensitive { ... }
#portal-languageselector { ... }
#portal-languageselector li { ... }
/* The path bar, including breadcrumbs and add to favorites */
#portal-breadcrumbs { ... }
#portal-breadcrumbs a { ... }
.breadcrumbSeparator { ... }
.addFavorite { ... }
.documentEditable { ... }
#content-news h1 { ... }

/* Only h5/h6 headlines in the content area should have the discreet color */
#content h5, #content h6 { ... }
.newsItem { ... }
.newsImage { ... }
.newsImageContainer { ... }
.newsContent { ... }
.newsContent ul, .newsContent li { ... }
.newsAbout { ... }
.newsAbout li { ... }
.newsFooter { ... }
.newsFooter li { ... }
.documentActions { ... }
.documentActions ul { ... }
.documentActions li { ... }
.documentActions a { ... }

/* Status messages */
dl.portalMessage { ... }
dl.portalMessage a { ... }
dl.portalMessage dt { ... }
dl.portalMessage dd { ... }
dl.warning dt { ... }
dl.error dt { ... }
dl.warning dd { ... }
dl.error dd { ... }

/* The summary text describing the document */
.documentDescription { ... }
.documentByLine { ... }
dl.searchResults span.documentByLine { ... }
#category ul { ... }
#category ul li { ... }
.discussion { ... }
.even { ... }
.odd { ... }
.visualHighlight { ... }
.discreet { ... }
.pullquote { ... }
.callout { ... }
.notify, .documentEditable * .notify { ... }
.card { ... }
.card a { ... }
.portrait { ... }
.portraitPhoto { ... }

/* The table used for listings - horizontal and vertical variants */
table.listing, .stx table { ... }
table.listing th, .stx table th { ... }
table.listing .top { ... }
table.listing .listingCheckbox { ... }
table.listing td, .stx table td { ... }
table.listing a { ... }
table.listing a:hover { ... }
table.listing img { ... }
table.listing td a label, .stx table td a label { ... }

/* Vertical addition class */
table.vertical { ... }
table.vertical th { ... }
table.vertical td { ... }

/* grid addition class */
table.grid td { ... }

/* plain table class with light gray borders */
table.plain, table.plain td, table.plain th { ... }

/* Batch selector */
.listingBar { ... }
.listingBar span.previous, .listingPrevious { ... }
.listingBar span.next, .listingNext { ... }
.listingBar img { ... }
.listingBar a { ... }
.tileItem { ... }
.tileHeadline { ... }
.tileHeadline a { ... }
.tileBody { ... }
.tileImage { ... }
.eventDetails { ... }

/* Useful deviations from regular style on elements */

/* List classes without markers */
ul.visualNoMarker, ol.visualNoMarker { ... }
ul.discreet { ... }
textarea.proportional { ... }
.productCredits { ... }
#portal-footer { ... }
#portal-footer p { ... }
#portal-footer a { ... }
#portal-footer a:visited { ... }
#portal-footer a:hover { ... }
#portal-colophon { ... }
#portal-colophon ul { ... }
#portal-colophon ul li { ... }
#portal-colophon ul li a { ... }

.feedButton { ... }
.poweredBy { ... }

/* Sitemap styles */
#portal-sitemap { ... }
#portal-sitemap a { ... }
#portal-sitemap a:hover { ... }
#portal-sitemap .navTreeLevel1 { ... }
#portal-sitemap .navTreeLevel2 { ... }

/* Album view classes */
.photoAlbumEntry { ... }
.photoAlbumEntry img { ... }
.photoAlbumEntryWrapper { ... }
.photoAlbumEntry a { ... }
.photoAlbumFolder { ... }
.photoAlbumEntryTitle { ... }

/* Link types */
a.link-parent { ... }
#content .link-category { ... }
#content .link-user { ... }
#content .link-comment { ... }
#content .link-anchor { ... }
#content .link-presentation { ... }
#content .link-wiki-add { ... }

/* Handling external/internal links, we first set the icon on all links, then
remove it from the ones that are local - for both http and https */
#content a[href ^="http:"], #content a.link-external { ... }
#content a[href ^="https:"], #content a.link-https { ... }
#content a[href ^="&amp;dtml-portal_url;"] { ... }

/* Protocol-specific links */
#content a[href ^="mailto:"], #content a.link-mailto { ... }
#content a[href ^="news:"], #content a.link-news { ... }
#content a[href ^="ftp:"], #content a.link-ftp { ... }
#content a[href ^="irc:"], #content a.link-irc { ... }
#content a[href ^="callto:"], #content a.link-callto { ... }
#content a[href ^="webcal:"], #content a.link-webcal { ... }
#content a[href ^="feed:"], #content a.link-feed { ... }

#content .link-plain { ... }

/* For ghosted elements */
.visualGhosted { ... }

/* Fullscreen */
body.fullscreen #portal-logo, body.fullscreen #portal-siteactions { ... }
body.fullscreen #portal-globalnav { ... }
body.fullscreen #portal-searchbox { ... }

/* Kupu image alignment classes */
.image-left { ... }
.image-inline { ... }
.image-right { ... }
dd.image-caption { ... }
dl.captioned { ... }

/* Dashboard */
#dashboard-info-message { ... }
#dashboard { ... }
#dashboard-portlets1,
#dashboard-portlets2,
#dashboard-portlets3 { ... }
#dashboard-portlets4 { ... }
#dashboard-portlets1 a,
#dashboard-portlets2 a,
#dashboard-portlets3 a,
#dashboard-portlets4 a { ... }
#dashboard-portlets1 dl.portlet,
#dashboard-portlets2 dl.portlet,
#dashboard-portlets3 dl.portlet,
#dashboard-portlets4 dl.portlet { ... }
div.managedPortlet.portlet { ... }
#dashboard select { ... }
.portletAssignments { ... }
#dashboard-portlets1 div.managedPortlet a,
#dashboard-portlets2 div.managedPortlet a,
#dashboard-portlets3 div.managedPortlet a,
#dashboard-portlets4 div.managedPortlet a { ... }
#dashboard-portlets1 div.managedPortlet span a,
#dashboard-portlets2 div.managedPortlet span a,
#dashboard-portlets3 div.managedPortlet span a,
#dashboard-portlets4 div.managedPortlet span a{ ... }
#dashboard-actions { ... }
#dashboard-actions ul { ... }
#dashboard-actions ul li { ... }
#dashboard-actions ul li.portalUser { ... }

/* manage portlets */
.section div { ... }
</pre>

<h2>columns.css</h2>

<p>Styles for table-based columns also known as "left slot", "right slot", etc.</p>

<pre>#portal-columns { ... }
#portal-column-one { ... }
#portal-column-content { ... }
#portal-column-two { ... }
body.fullscreen #portal-column-one, body.fullscreen #portal-column-two { ... }
body.fullscreen #portal-column-content { ... }</pre>

<h2>authoring.css</h2>

<p>Styles associated with authoring elements visible to content providers.</p>

<pre>/* Editable border */
.contentViews { ... }
.contentViews li { ... }
.contentViews li a { ... }
.contentViews .selected a { ... }
.contentViews li a:hover { ... }
.configlet .contentViews { ... }

/* begin ECMAScript Content Action Menus */
.contentActions { ... }
.contentActions ul, .contentActions li { ... }
.contentActions li { ... }
.contentActions a { ... }
.contentActions span.subMenuTitle { ... }
.contentActions a span.subMenuTitle { ... }
.actionMenu { ... }
.actionMenu .actionMenuHeader { ... }
.actionMenu.activated .actionMenuHeader { ... }
.actionMenu .actionMenuHeader a { ... }
.arrowDownAlternative { ... }
.actionMenu .actionMenuContent { ... }
.actionMenu.activated .actionMenuContent { ... }
.actionMenu.activated .actionMenuContent { ... }
.actionMenu.deactivated .actionMenuContent { ... }
.actionMenu .actionMenuContent ul { ... }
.actionMenu .actionMenuContent li { ... }
.actionMenu .actionMenuContent li a { ... }
.actionMenu .actionMenuContent .selected { ... }
.actionMenu .actionMenuContent li a:hover { ... }
.actionMenu .actionMenuContent .actionSeparator a { ... }
#templateMenu li a { ... }
/* end ECMAScript Content Action Menus */

ul.configlets { ... }
ul.configlets li { ... }
ul.configlets li a { ... }
ul.configlets li a:visited { ... }
ul.configlets li a:active { ... }
ul.configlets li label { ... }
ul.configletDetails { ... }
ul.configletDetails li { ... }
ul.configletDetails li a { ... }
ul.configletDetails li label { ... }

/* Additional STX workaround classes */
.stx table p { ... }
.stx table { ... }
.stx table td { ... }

.reviewHistory { ... }
.comment { ... }
.comment h1, .comment h2, .comment h3, .comment h4, .comment h5, .comment h6 { ... }
.comment h3 a { ... }
.commentBody { ... }
.spacer { ... }

/* Collapsible elements */
dl.collapsible { ... }
dl.collapsible dt.collapsibleHeader { ... }
dl.collapsible dd.collapsibleContent { ... }

/* for IE the following isn't needed, that's why the css2 selector is used */
dl.collapsible dd.collapsibleContent &gt; dl { ... }
dl.expandedInlineCollapsible dt.collapsibleHeader, dl.expandedBlockCollapsible dt.collapsibleHeader { ... }
dl.collapsedBlockCollapsible { ... }
dl.collapsedBlockCollapsible dt.collapsibleHeader { ... }
dl.collapsedInlineCollapsible dd.collapsibleContent, dl.collapsedBlockCollapsible dd.collapsibleContent { ... }
dl.collapsedInlineCollapsible { ... }
dl.collapsedInlineCollapsible dt.collapsibleHeader { ... }

.configlet .documentEditable { ... }
.documentEditable .documentContent { ... }
.label { ... }
.optionsToggle { ... }

#portal-column-content fieldset &gt; * input:focus, #portal-column-content fieldset &gt; * textarea:focus { ... }

.highlightedSearchTerm { ... }
dl.searchResults .highlightedSearchTerm { ... }
.noInheritedRoles { ... }
.currentItem { ... }
tr.dragging td { ... }
.draggingHook { ... }
.notDraggable { ... }

.managePortletsLink { ... }
ul.formTabs { ... }
li.formTab { ... }
li.formTab a { ... }
li.formTab a { ... }
li.firstFormTab a { ... }
li.lastFormTab a { ... }
li.formTab a.selected { ... }
li.formTab a:hover { ... }
li.formTab a.notify { ... }
li.formTab a.required span { ... }
li.formTab a.notify:hover { ... }
.formPanel { ... }
.formPanel.hidden { ... }
div.formControls input.hidden { ... }
</pre>

<h2>portlets.css</h2>

<p>Styles associated with components of individual portlets.</p>

<pre>/* Main portlet elements */
.portlet { ... }
.portlet a { ... }
.portlet a.tile { ... }

.portletItem a:visited, .portletFooter a:visited { ... }
.portletHeader { ... }
.portletHeader a { ... }
.portletItem { ... }
.portletItem ol { ... }
.portletItemDetails { ... }
.portletFooter { ... }

/* Elements that enable layout with rounded corners */
.portletTopLeft { ... }
.portletTopRight { ... }
.portletBottomLeft { ... }
.portletBottomRight { ... }

/* Calendar elements - used in the calendar rendering */
.dayPopup { ... }
.date { ... }
.portletCalendar { ... }
.portletCalendar dt { ... }
.portletCalendar dd { ... }
.portletCalendar a { ... }
.portletCalendar a:hover { ... }
.ploneCalendar { ... }
.ploneCalendar td { ... }
.ploneCalendar .weekdays th { ... }
.ploneCalendar .event { ... }
.ploneCalendar .todayevent { ... }
.ploneCalendar .todaynoevent { ... }

.managePortletsLink { ... }
div.portlets-manager div.section { ... }
div.managedPortlet { ... }
.managedPortlet .portletHeader { ... }
.managedPortlet a { ... }
.managedPortletActions { ... }
.managedPortletActions a { ... }
.managedPortletActions a.up,
.managedPortletActions a.down { ... }
.managedPortletActions a.delete { ... }

/* Table of Contents styling - essentially a portlet with smaller fonts and aligned right + limited in width */
.toc { ... }
</pre>

<h2>controlpanel.css</h2>

<p>Styles associated with the Plone control panel.</p>

<pre>.inlineDisplay { ... }

table.controlpanel-listing { ... }
table.controlpanel-listing td, table.controlpanel-listing th { ... }
table.controlpanel-listing dl { ... }
table.controlpanel-listing dd { ... }
table.controlpanel-listing dl dt a .trigger{ ... }
table .controlpanel-listing td { ... }
table.controlpanel-listing td.checker{ ... }
table.controlpanel-listing th.smallcolumn { ... }

.chooser-right { ... }

.rule-element { ... }
.rule-element dl { ... }
.rule-element dl dd { ... }
.rule-updown, .rule-operations { ... }
</pre>

<h2>print.css</h2>

<p>Print styles for CSS2-capable browsers.&nbsp; Much of this
stylesheet has to do with hiding components that an inappropriate for
printed documents.</p>

<h2>deprecated.css</h2>

<p>Styles for deprecated elements that will disappear from plone in a future release.</p>

<h2>navtree.css</h2>

<p>Styles associated with the navigation tree.</p>

<pre>.portletNavigationTree { ... }
.navTree { ... }
.navTree li { ... }
.navTreeItem { ... }
.navTreeItem a, dd.portletItem .navTreeItem a { ... }
.navTreeItem a:hover, dd.portletItem .navTreeItem a:hover { ... }
.navTreeCurrentItem { ... }
li.navTreeCurrentItem { ... }
li.navTreeCurrentItem a, li.navTreeCurrentItem a:hover { ... }

.navTreeLevel0 { ... }
.navTreeLevel1 { ... }
.navTreeLevel2 { ... }
.navTreeLevel3 { ... }
.navTreeLevel4 { ... }
.navTreeLevel5 { ... }<code>

</code></pre>

<h2>invisibles.css</h2>

<p>Styles for invisible and accessibility elements.</p>

<pre>/* List classes without markers */
ul.visualNoMarker, ol.visualNoMarker { ... }
.visualOverflow { ... }
.visualOverflow pre, .visualOverflow table, .visualOverflow img { ... }

/* Accessibility and visual enhancement elements */
.hiddenStructure { ... }
.contentViews .hiddenStructure, .contentActions .hiddenStructure { ... }
.hiddenLabel { ... }

/* Helper element to work with CSS floats */
.visualClear { ... }

/* Hiding helper elements for old browsers */
.netscape4 { ... }
</pre>

<h2>forms.css</h2>

<p>Styles associated with forms.</p>

<pre>textarea { ... }
input { ... }

input[type=checkbox] { ... }

#searchGadget { ... }

button { ... }
select { ... }
form { ... }
fieldset { ... }
legend { ... }
label { ... }
optgroup { ... }
option { ... }
optgroup &gt; option { ... }

dl.enableFormTabbing dd { ... }

#login-form { ... }
#login-form .field { ... }
#login-form input { ... }
#login-form input.context { ... }

#forgotten-password { ... }

.standalone, .documentEditable * .standalone { ... }
.context, .formControls .actionButtons .button, .documentEditable * .context { ... }
.destructive, .documentEditable * .destructive { ... }
input.searchButton { ... }
.searchSection { ... }
.searchSection label:hover { ... }

/* The edit form elements */
.field { ... }
.field .field { ... }
.fieldRequired { ... }
.fieldUploadFile { ... }
.fieldTextFormat { ... }
.formHelp { ... }
.formHelp:hover { ... }
div.error { ... }
.error .fieldRequired { ... }

/* Styles to make the editing widgets look more like their view counterparts */
#archetypes-fieldname-title input, input#form\.title { ... }
#archetypes-fieldname-description textarea, textarea#form\.description { ... }
input.inputLabelActive { ... }

textarea#form\.description { ... }

tr.selected { ... }

.kupu-save-message { ... }
</pre>

<h2>ploneKss.css</h2>

<p>Not accessible from ZMI &gt; portal_skins &gt; plone_styles.</p>

<h2>ploneCustom.css</h2>

<p>This is where your locally modified styles should go.&nbsp; By default, no styles are defined in this stylesheet.</p>

<h2>kupustyles.css</h2>

<p>Not accessible from ZMI &gt; portal_skins &gt; plone_styles.</p>

<h2>kupuplone.css</h2>

<p>Not accessible from ZMI &gt; portal_skins &gt; plone_styles.</p>

<h2>kupudrawerstyles.css</h2>

<p>Not accessible from ZMI &gt; portal_skins &gt; plone_styles.</p></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.2.4.
                Skin Layers
            </h1>

            <p class="documentDescription">Skin layers</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.2.4.1.
                Skin Layers
            </h1>

            <p class="documentDescription">Templates, scripts, images, CSS and JavaScript files are organized with skin layers.</p>
    
            <div>
                
                    <div><blockquote class="pullquote">

<p>Note: in the context of components, "layer" has a slightly different meaning.</p>

</blockquote>

<p>A

skin is comprised of a series of skin layers. On the file system, each

layer is a directory. In the Zope Management Interface (ZMI), each

layer appears in portal_skins as a separate folder (containing page

templates, style sheets or Python scripts).</p>

<p><img class="image-inline" src="plone-theme-references_archivos/portal_skins_zmi_snip.html" alt=""></p>

<p>These

have two uses.</p>

<ul><li>Firstly they keep things organized. If you take a look at the
Plone Default Skin (part of which is shown in portal_skins in the
screenshot above) you'll see that they've separated out templates,
scripts, styles and images into separate skin layers.<br></li><li>More importantly

they have an order of precedence. This means that an item named

main_template in the top layer will be found and used before an item

named main_template in the bottom layer. We will go into this in more detail

on the next page.</li></ul><p>To
create a skin layer through the web, simply add a new folder. On the
file system, add a directory to your skins directory. You will also
need to add a small amount of configuration to ensure that your
directory is found and registered as a skin layer on installation.</p>

<p>Firstly, in [your theme package]/skins.zcml</p>

<pre>&lt;cmf:registerDirectory
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name="[Your Skin Directory Name]"/&gt;
</pre>

<p>Next, in [your theme package]/profiles/default/skins.xml</p>

<pre>&lt;object name="[Your Skin Directory Name]"
&nbsp;&nbsp;&nbsp; meta_type="Filesystem Directory View"
&nbsp;&nbsp;&nbsp; directory="[your namespace].[your theme name]:skins/[Your Skin Directory Name]"/&gt;</pre>

<p>and</p>

<pre>&lt;skin-path name="[your skin name]" based-on="Plone Default"&gt;
&nbsp; &lt;layer name="[Your Skin Directory Name]"
&nbsp;&nbsp;&nbsp;&nbsp; insert-after="custom"/&gt;
&nbsp;&lt;/skin-path&gt;
</pre>

<p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.2.4.2.
                Customizing through Order of Precedence
            </h1>

            <p class="documentDescription">How skin layers work and how they can be used in customization.</p>
    
            <div>
                
                    <div><p>If
you've worked with Plone 2, you'll be familiar with this type of
customization. As we mentioned earlier, the order of layers in a skin
determines which page templates, CSS files and Python scripts are
processed first.</p>

<p><a id="tqd0"></a><a id="bkmtqd0"></a>To inspect the order of precedence:</p>

<ul class="listlevel1WW8Num1"><li>Site &gt; Zope Management Interface &gt; portal_skins</li>

      <li>click the Properties tab</li></ul><p>You
should see the layers of the Plone Default skin listed there. Layers
such as 'plone_templates' come from the main Plone theme but there will
also be layers providing templates from specific add-on products (the
visual editor kupu for instance).</p>

<p><img class="image-right" src="plone-theme-references_archivos/order_of_precedence.html" alt="screenshot of Skin layers in the ZMI">When
asked to process a specific template, Plone will work from the top of
this list downwards, looking in each layer in turn to retrieve the
template.</p>

<p>At the top is a custom layer; any template placed in here will be
found and used first. So, to create your own version of a Plone
template or CSS file, give it the same name as the Plone version but
put it in the custom layer.</p>

<p>This is the simplest approach, but just ensuring that your version
lives in a layer higher in the order of precedence in a skin than the
main Plone theme layers will be enough to ensure that Plone finds it
first and ignores the original version.</p>

<p>This technique can be used in two ways</p>

<dl><dt>using the custom folder</dt>

<dd>through the Zope Management Interface, you can add your own
versions of templates, style sheets etc to the custom folder. This
always comes at the top, so you can be sure your versions will be found
first.</dd>

<dt>adding your own skin layers</dt>

<dd>in your own theme product on the file system, create one or two
skin layers, and ensure that on installation these layers are put just
below the custom folder in the order or precedence. There's more
information on how to do this in the next section.</dd></dl><p>Probably the most comprehensive description of skins, layers and order or precedence can be found in the first two sections of <a href="http://docs.neuroinf.de/PloneBook/ch7.rst">Chapter 7 of The Definitive Guide to Plone</a> (note that most of this book refers to Plone 2, but these sections are still relevant for Plone 3).</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.2.4.3.
                Making and Naming your own Skin
            </h1>

            <p class="documentDescription">How do you actually create a Skin?</p>
    
            <div>
                
                    <div><h2>Through the ZMI</h2>

<ul><li>Go to Site Setup &gt; Zope Management Interface &gt; portal_skins</li><li>Click the Properties tab<br></li><li>Choose Add New and give your skin a name</li><li>You can now type in a list of the layers you want to use, in the order you want to use them</li><li>Finally, at the bottom of the page, set your new skin as the default<br></li></ul><h2>On the File System</h2>

<p>If you use the plone3_theme paster template, code will be provided
which, when your theme product is installed, will register your skin
directories as skin layers and put these together into a new skin.</p>

<p>The paster template gives you the option of basing your skin on
Plone Default. That is, when you install the theme in your site, the
Plone skin layers will be added to yours - but below yours in the order
of precedence. This is a good idea, you can then re-use bits of Plone
Default without duplicating it, and overwrite the bits you don't want.</p>

<p>

The key steps are:</p>

<ol><li>Register your skin directories as Filesystem Directory Views,
so that they can become skin layers. This happens in two places:[your
theme package]/skins.zcml and [your theme
package]/profiles/default/skins.xml<br><pre>&lt;cmf:registerDirectory
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name="[Your Skin Directory Name]"/&gt;
</pre>

<pre>&lt;object name="[Your Skin Directory Name]"
&nbsp;&nbsp;&nbsp; meta_type="Filesystem Directory View"
&nbsp;&nbsp;&nbsp; directory="[your namespace].[your theme name]:skins/[Your Skin Directory Name]"/&gt;</pre>

</li><li>Add and organize your skin layers into a skin in [your theme package]/profiles/default/skins.xml<br><pre>&lt;skin-path name="[your skin name" based-on="Plone Default"&gt;
&nbsp; &lt;layer name="[Your Skin Directory Name]"
&nbsp;&nbsp;&nbsp;&nbsp; insert-after="custom"/&gt;
&nbsp;&lt;/skin-path&gt;</pre>

</li><li>Set your skin as the default skin in [your theme
package]/profiles/default/skins.xml by wrapping this node around the
nodes in the previous two examples.<br><pre>&lt;object name="portal_skins" allow_any="False" cookie_persistence="False"
&nbsp;&nbsp; default_skin="[your skin name]"&gt;
    .........
&lt;/object&gt;
</pre>

</li></ol><h2>&nbsp;About the Skin Name</h2>

<p>The name of your skin is required in a few places in your theme
product. It is worth knowing where and why, so, for reference, the
occurrences are listed here.</p>































<table id="Table17Ctable" class="listing"><tbody><tr><td>

<p><a id="bxr2"></a><a id="bkmbxr2"></a>Where</p>

</td><td>

<p>Attributes/Directives used</p>

</td><td>

<p>Use</p>

</td></tr><tr><td>

<p>profiles/default/skins.xml</p>

</td><td>

<p>&lt;skin_path name="[your skin name]"</p>

</td><td>

<p>Used to name your set of skin layers.</p>

</td></tr><tr><td>

<p>profiles/default/skins.xml</p>

</td><td>

<p>&lt;object name="portal_skins"</p>

<p> default_skin="[your skin name]"&gt;</p>

</td><td>

<p>Used to set your set of skin layers as the default skin.</p>

</td></tr><tr><td>

<p>browser/configure.zcml</p>

</td><td>

<p>&lt;interface â¦</p>

<p> name="[your skin name]"</p>

<p> /&gt;</p>

</td><td>

<p>Used to name the theme specific interface (see <a href="http://plone.org/documentation/manual/theme-reference/buildingblocks/skin/components">Components</a> section)</p>

</td></tr><tr><td>

<p>profiles/default/viewlets.xml</p>

</td><td>

<p>&lt;order manager="plone.portalfooter" skinname="[your skin name]"</p>

<p> &gt;</p>

</td><td>

<p>Used to specify the theme when reordering viewlets in viewlet managers</p>

<p>(see <a href="http://plone.org/documentation/manual/theme-reference/buildingblocks/skin/components">Components</a> section)</p>

</td></tr></tbody></table></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                5.3.
                Components
            </h1>

            <p class="documentDescription">The page furniture, viewlets, portlets, and their managers. How to make your own and where to find the bits you need.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.3.1.
                Component Wiring and ZCML
            </h1>

            <p class="documentDescription">About components and how they are wired together</p>
    
            <div>
                
                    <div><p><img class="image-right" src="plone-theme-references_archivos/component.gif" alt="diagram of a component">Components
are powerful and flexible tools in Plone 3, but a little more abstract
than page templates or Python scripts. As the diagram on the right
attempts to show, they are normally combinations of Python classes and
page templates wired together in Zope Configuration Language (ZCML) and
given a name.</p>

<p>There are two important things to remember about components</p>

<dl><dt>Components are compounds of classes, templates, interfaces, permissions etc.</dt>

<dd>To track components down you need to look in .zcml files

first, locate their names, and that will lead you to the classes and

templates that contribute to them.</dd>

<dt>Components come into existence when your Zope Instance is started up</dt>

<dd>Provided Zope has read the .zcml file, a component will be
available to use. You can't overwrite existing components, better to
create your own, reusing some of the parts.<br></dd></dl><h2>Parts of a Component</h2>

<p>A component comes into being via a ZCML "directive" (there's an
example of one of these below). The directive will have a series of
"attributes" which will point to the various parts that go into its
creation. These parts have four main functions.</p>

<ol><li>To <strong>identify</strong> the component (in the case of a viewlet this will usually be done with a "name" attribute).</li><li>To <strong>compute </strong>the
information the component is supposed to display (this is usually done
with a Python class, and pointed to with a "class" attribute). For
example, in the case of the navigation tree, this would be working out
which part of the tree should be displayed for each page.<br></li><li>To <strong>display</strong> the information the component's class has computed (this is usually done with a page template).</li><li>To <strong>restrict</strong>
the display of the component. In the case of a viewlet, this could be
restricting it to display only to certain logged-in users (by using the
"permission" attribute) or restricting it to display only with specific
content types (by using the "for" attribute). <br></li></ol><p>

There's more about this in the <a href="http://plone.org/documentation/manual/theme-reference/buildingblocks/components/componentparts">component parts</a> section.</p>

<h2>Zope Configuration Language (ZCML)</h2>

<p>The <a href="http://worldcookery.com/files/ploneconf05-five/step2.html">Five Tutorial on WorldCookery.com</a> will walk you through ZCML, and there are plenty of examples in tutorials on the plone documentation site.</p>

<p>Here's a sample ZCML directive conjuring up the presentation viewlet
(which simply provides a link to a presentation version of a page):</p>

<pre>&lt;configure    xmlns="http://namespaces.zope.org/zope"
    xmlns:browser="http://namespaces.zope.org/browser"&gt;  
    &lt;browser:viewlet      
         name="plone.presentation"      
         for="Products.ATContentTypes.interface.IATDocument"      
         manager="plone.app.layout.viewlets.interfaces.IAboveContentBody"      
         class=".presentation.PresentationViewlet"      
         permission="zope2.View"      
    /&gt;
&lt;/configure&gt;</pre>

<p>There are three things to note:</p>

<ul><li>Like any kind of XML, ZCML uses namespaces - watch out for
these if you're writing your own ZCML file. For theme components,
you'll mostly use the browser namespace.</li><li>ZCML attributes often refer to interfaces rather than actual content types, classes or components (see the <em>for</em> and <em>manager</em> attributes in the example above).  You'll find more about interfaces in a <a href="http://plone.org/documentation/manual/theme-reference/buildingblocks/components/componentparts/interfaces">later section</a>.</li><li>Look
at the class attribute and you'll see it begins with a leading dot.
This means you can find it in the same directory as the ZCML file
itself. If it isn't within the same directory you'll need to give the
full name.</li></ul><p>You can get detailed information about ZCML directives in the ZCML Reference section of the Zope 3 API - <a href="http://apidoc.zope.org/++apidoc++/">http://apidoc.zope.org/++apidoc++/</a>.  If you want to be very disciplined and tidy, consult the ZCMLStyleGuide <a href="http://wiki.zope.org/zope3/ZCMLStyleGuide">http://wiki.zope.org/zope3/ZCMLStyleGuide</a>.</p>

<p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.3.2.
                Viewlets, Portlets and Other Components
            </h1>

            <p class="documentDescription">Types of component.</p>
    
            <div>
                
                    <div><h1 id="toc0">Viewlet</h1>

<p>This is a new feature in Plone 3 and is used to provide aspects of
the page furniture - those elements of the page which generally don't
change throughout the site. These are organized by another type of
component - a Viewlet Manager.</p>

<p>For more information you can look at</p>

<ul><li><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet/anatomy">Anatomy of a Viewlet</a> section in this reference manual</li><li>

      <a href="http://plone.org/documentation/tutorial/customizing-main-template-viewlets">

        http://plone.org/documentation/tutorial/customizing-main-template-viewlets

      </a>

    </li><li><a href="http://plone.org/documentation/tutorial/customization-for-developers/viewlets/">http://plone.org/documentation/tutorial/customization-for-developers/viewlets/</a></li></ul><h2>Portlet</h2>

<p>Portlets in Plone are boxes of information, usually in the right or
left column of a page, containing aggregated content or additional
information, which may or may not be directly relevant to the content
item being displayed. Behind the scenes these used to be constructed
from ordinary page templates, but now, in Plone 3, they are wired
together as components and are managed by another component - a Portlet
Manager.</p>

<p>For more information take a look at:</p>

<ul><li>The <a href="http://plone.org/documentation/manual/theme-reference/elements/portlet/anatomy">Anatomy of a Portlet</a> section of this manual</li><li><a href="http://plone.org/documentation/how-to/override-the-portlets-in-plone-3.0/">http://plone.org/documentation/how-to/override-the-portlets-in-plone-3.0/</a></li><li><a href="http://plone.org/documentation/tutorial/customization-for-developers/portlet-renderers/">http://plone.org/documentation/tutorial/customization-for-developers/portlet-renderers/</a> (for a much more technical explanation)</li><li><a href="http://plone.org/documentation/how-to/adding-portlet-managers">http://plone.org/documentation/how-to/adding-portlet-managers</a></li></ul><h2>View (Browser View)</h2>

<p>We gave one definition of the term "view" above in the <a href="http://plone.org/documentation/manual/theme-reference/buildingblocks/skin">skin section</a>.
However, behind the scenes, in the context of components, View has a
more technical meaning. It refers to a component which is usually made
up of a Python class or a template or both and, put simply, processes
the data from a content item before it reaches the page. There's a <a href="http://plone.org/plone-developer-reference/patterns/views/">technical explanation</a> in the Plone Developer Manual.</p>

<p> You'll sometimes see it referred to as BrowserView or
&lt;browser:page&gt; and in templates you'll see a browser view's name
prefaced by @@. We look at browser views again in the section on <a href="http://plone.org/documentation/manual/theme-reference/page">putting a page together</a>.</p>

<blockquote class="pullquote">

<p class="callout">Note that the term browser and the browser namespace
are used to demarcate presentational components â that is, those bits
of code which go to make up elements which will find their way to a web
browser at some point.</p>

</blockquote>

<h2>Resource (Browser Resource) &amp; ResourceDirectory</h2>

<p>Although we've indicated that the skin and layers are the usual home
of page templates, images and style sheets, it is also possible to turn
them into components by registering them in ZCML. In this case you'll
see them referred to like this ++resource++[resource name]. The same
can be done for a directory containing templates and style sheets.</p>

<p>âOh greatâ, I can hear you saying, âso which should I use, components or skins?â  Go to the section <a href="http://plone.org/documentation/manual/theme-reference/buildingblocks/components/skinorcomponents">Skin or Components?</a>
for a discussion of the pros and cons. At the time of writing we
suggest the simpler option is to keep your templates, images and style
sheets in your skin. We're just mentioning browser resources so that
you know what they are if you encounter them.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.3.3.
                Customizing or Creating New
            </h1>

            <p class="documentDescription">You
can customize through the web, but on the file system, the way to
customize or create components for your theme is to wire up new ones.</p>
    
            <div>
                
                    <div><h2>Through the Web</h2>

<p>Just as for Skins and Layers, it is possible to customize the
templates used by components through the Zope Management Interface.</p>

<ul class="listlevel1WW8Num1"><li>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</li></ul><p>You will need to know the name of your component (plone.presentation for instance). The <a href="http://plone.org/documentation/manual/theme-reference/elements/elementsindex">Elements</a> section of this manual will help if the name isn't obvious.  You can only rewrite the template, which might be limiting.</p>

<h2 id="toc2">On the File System</h2>

<p>You can achieve much more if you are building your own theme product
on the file system, and in this case the approach is slightly different.</p>

<p>Rather than overwrite a component (as you could for skins), it is
far easier to create your own version. This involves some rewiring or
new wiring in your own .zcml file, but is actually simpler than it
sounds.</p>

<p>Here's an example of the presentation viewlet - as it is used by Plone:</p>

<pre>&lt;browser:viewlet
      name="plone.presentation"
      for="Products.ATContentTypes.interface.IATDocument"
      manager="plone.app.layout.viewlets.interfaces.IAboveContentBody"
      class=".presentation.PresentationViewlet"
      permission="zope2.View"
      /&gt;</pre>

<p> Imagine, for your purposes, you need to use a new class to get this
viewlet as you want. In your own configure.zcml file, give it a new
name and wire in your own class.</p>

<pre>&lt;browser:viewlet
 <em>     name="[your namespace].[your presentation viewlet]"

     </em> for="Products.ATContentTypes.interface.IATDocument"
      manager="plone.app.layout.viewlets.interfaces.IAboveContentBody"
      <em>class=".[your viewlet module].[your viewlet class]"

</em>      permission="zope2.View"
      /&gt;</pre>

<ul><li>Remember that the dot in front of your class namespace
indicates that it can be found in the same directory as this
configure.zcml file.</li><li>If you're not sure where your configure.zcml file lives, consult the <a title="Where to find what you need" href="http://plone.org/documentation/manual/theme-reference/buildingblocks/components/locations">Where to Find What you Need</a> page of this section. <br></li></ul></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.3.4.
                Component Parts
            </h1>

            <p class="documentDescription">Further information on some of the parts that go to make up components.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.3.4.1.
                Interfaces and why they matter
            </h1>

            <p class="documentDescription">Interfaces
are a bit techie and something a non-developer would probably rather
not think about. However, they are an important part of component
wiring, so it is as well to know a bit about what they are and do.</p>
    
            <div>
                
                    <div><h2>Interfaces as Markers</h2>

<p>ZCML attributes often refer to interfaces rather than actual classes
- for instance the example below wires up the presentation viewlet for
content types that have the IATDocument interface.</p>

<pre>&lt;browser:viewlet
      name="plone.presentation"
      <em>for="Products.ATContentTypes.interface.IATDocument"</em>
      manager="plone.app.layout.viewlets.interfaces.IAboveContentBody"
      class=".presentation.PresentationViewlet"
      permission="zope2.View"
      /&gt;</pre>

<p>In effect this is saying that the presentation viewlet is available
for any content type which is ATDocument-like or behaves like an
ATDocument. So, in this case, the interface is a marker.</p>

<p>The convenience of this is that a content type can have one (or
more) interfaces, and several content types can share the same one. If
you develop a new content type and mark it with the IATDocument
interface, you can use this presentation viewlet with it - no extra
wiring required.</p>

<h2 id="toc2">Components and Interfaces</h2>

<p>Components themselves can be marked with an interface - the
technical term is "provides". Note that in the presentation viewlet
example, the viewlet manager is referred to by its interface, not its
name:</p>

<pre> manager="plone.app.layout.viewlets.interfaces.IAboveContentBody"</pre>

<p>To track down the actual component, look in the configure.zcml file
in the same directory as the interfaces. For instance, in
plone/app/layout/viewlets/configure.zcml you'll see the interface has
been wired up with a Python class to create a viewlet manager component:</p>

<pre>      &lt;browser:viewletManager
        name="plone.abovecontentbody"
        provides=".interfaces.IAboveContentBody"
        permission="zope2.View"
        class="plone.app.viewletmanager.manager.OrderedViewletManager"
        /&gt;</pre>

<h2 id="toc3">How to spot an interface</h2>

<p>It is usually fairly easy to spot a reference to an interface. By
convention, their names will be prefixed with an "I", and they will
live in an interface or interfaces namespace. If you investigate
interfaces.py or interface.py in any egg or product, you won't find
very much code, but you'll often find useful information â
effectively it is documentation about what a component providing (i.e.
marked by) that interface should do. For example:</p>

<pre>class IAboveContentBody(IViewletManager):
    """A viewlet manager that sits above the content body in view templates    """</pre>

<p>If you've used the plone3_theme paster template, you'll find you
have a ready-made interfaces.py file to which you can add your own
interfaces if you need to create them.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.3.4.2.
                Python Classes
            </h1>

            <p class="documentDescription">You'll
have noticed that Python classes are often part of the wiring of
Components, and you will find that you can't really avoid understanding
a little bit about them, particularly if you want to make your own
viewlets.</p>
    
            <div>
                
                    <div><p>Having
to deal with something as advanced as Python classes can be daunting
for the non-developer. The good news is that using Python classes will
be more a case of copying and changing little bits of code than writing
anything from scratch.</p>

<h2>What's a Class?</h2>

<p>It's best to think of a class as a discrete piece of code containing
a collection of methods ('actions' of some sort) and attributes
('variables' which can hold a value).</p>

<p>In the case of components, the main purpose of a class is to compute
the pieces of information a component needs to display. The class for
the logo viewlet is a good example. You can find it in:</p>

<ul><li>[your egg location]/plone/app/layout/viewlets/common.py - look for LogoViewlet</li></ul><p>After
a bit of preparatory work, the LogoViewlet class first finds out the
name of the image that is to be used for the logo (and is defined in
the base_properties property sheet):</p>

<pre>logoName = portal.restrictedTraverse('base_properties').logoName
</pre>

<p>Then it works out the logo's vital statistics, size, alt text etc and turns this into an HTML anchor tag:</p>

<pre>self.logo_tag = portal.restrictedTraverse(logoName).tag()
</pre>

<p>Finally, just in case you might need it, it looks up the title of the site:</p>

<pre>self.portal_title = self.portal_state.portal_title()</pre>

<p>In the page template associated with this viewlet you can get hold
of this information (self.logo_tag, self.portal_title) using the
variable "view":</p>

<pre>&lt;img src="logo.jpg" alt=""
         tal:replace="structure view/logo_tag" /&gt;</pre>

<h2>Do I have to use Classes?</h2>

<p>Viewlets tend to be wired up with a Python class which points to a
template. So, even though you might only want to create a new template,
you'll find that you have to write a class to point to your new
template. The <a href="http://plone.org/documentation/manual/theme-reference/elements">Elements</a>
section of this manual should help you by giving you a snippet of code
for each element to copy and paste into your own product.</p>

<p>Here's an example. The standard logo template doesn't actually make
use of view/portal_title. So if you wanted to incorporate this into
your logo in some way, then you would need to write your own template
and then also your own class:</p>

<pre>from plone.app.layout.viewlets.common import LogoViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile

class [your class name](LogoViewlet):
    render = ViewPageTemplateFile('[your template name]')</pre>

<ul class="listlevel1WW8Num1"><li>

<p>First, pull in ("import") all the bits and pieces with which to build your class using  from â¦.. import â¦â¦ .</p>

</li>

      <li>Next, define your class. The important thing here is
to base it on a pre-existing class so that you don't have to start from
scratch. Put the name of the pre-existing class in brackets after your
class name (make sure that you've imported it first). Don't forget the
colon!</li>

      <li>Finally, rewrite any of the methods or attributes you need.  Here, we've just rewritten the <em>render</em> method to display our own template.</li></ul><p>
Note: indenting is very important in Python code, the convention is to
use four spaces (rather than a tab). If you are having problems, double
check the indentation first.</p>

<ul><li> <a href="http://wiki.python.org/moin/HowToEditPythonCode">http://wiki.python.org/moin/HowToEditPythonCode</a></li></ul><p>If you're feeling brave or want to know more, a straightforward introduction is here:

      <a href="http://www.diveintopython.org/object_oriented_framework/defining_classes.html"><br></a></p>

<ul><li><a href="http://www.diveintopython.org/object_oriented_framework/defining_classes.html">Dive Into Python - Defining Classes

        </a></li></ul><dl><dd>

      <br></dd></dl></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                5.3.4.3.
                Permission
            </h1>

            <p class="documentDescription">The permission attribute can be used to restrict visibility of a component.</p>
    
            <div>
                
                    <div><p>When
a user logs in to a site, they will be given a role ('manager' or
'editor' for instance). This role is, effectively, a set of
permissions, giving them particular rights over particular aspects of
the site.</p>

<p>To find out more about permissions consult the Understanding Permissions and Security Tutorial:</p>

<ul><li><a href="http://plone.org/documentation/tutorial/understanding-permissions/">http://plone.org/documentation/tutorial/understanding-permissions/</a></li></ul><p>In
the case of components, the permission attribute allows the site to
decide whether a user has a right to see, or interact with a component.
Most viewlets have the permission Zope2.View or Zope2.Public, which are
permissions assigned to everyone, even anonymous visitors. However,
look at the Lock Info viewlet:</p>

<pre>&lt;browser:viewlet
        name="plone.lockinfo"
        manager=".interfaces.IAboveContent"
        class="plone.locking.browser.info.LockInfoViewlet"
        permission="cmf.ModifyPortalContent"
        for="plone.locking.interfaces.ITTWLockable"
        /&gt;
</pre>

<p>By using cmf.ModifyPortalContent, this viewlet is restricted only to
those who have the right to edit content (those who don't wouldn't be
interested in whether an item was locked or not).</p>

<p>The list of available permissions is buried rather deeply in the
Five product which comes with your installation of Zope - look in
permissions.zcml for the most up-to-date list.</p>

<p>&nbsp;</p>

















































































































































<table class="MsoTableGrid"><tbody><tr><td>

<p>zope2.Public</p>

</td><td>

<p>Public, everyone can access</p>

</td></tr><tr><td>

<p>zope2.Private</p>

</td><td>

<p>Private, only accessible from trusted code</p>

</td></tr><tr><td>

<p>zope2.AccessContentsInformation</p>

</td><td>

<p>Access contents information</p>

</td></tr><tr><td>

<p>zope2.ChangeImagesFiles</p>

</td><td>

<p>Change Images and Files</p>

</td></tr><tr><td>

<p>zope2.ChangeConfig</p>

</td><td>

<p>Change configuration</p>

</td></tr><tr><td>

<p>zope2.ChangePermissions</p>

</td><td>

<p>Change permissions</p>

</td></tr><tr><td>

<p>zope2.CopyOrMove</p>

</td><td>

<p>Copy or Move</p>

</td></tr><tr><td>

<p>zope2.DefinePermissions</p>

</td><td>

<p>Define permissions</p>

</td></tr><tr><td>

<p>zope2.DeleteObjects</p>

</td><td>

<p>Delete objects</p>

</td></tr><tr><td>

<p>zope2.FTPAccess</p>

</td><td>

<p>FTP access</p>

</td></tr><tr><td>

<p>zope2.ImportExport</p>

</td><td>

<p>Import/Export objects</p>

</td></tr><tr><td>

<p>zope2.ManageProperties</p>

</td><td>

<p>Manage properties</p>

</td></tr><tr><td>

<p>zope2.ManageUsers</p>

</td><td>

<p>Manage users</p>

</td></tr><tr><td>

<p>zope2.Undo</p>

</td><td>

<p>Undo changes</p>

</td></tr><tr><td>

<p>zope2.View</p>

</td><td>

<p>View</p>

</td></tr><tr><td>

<p>zope2.ViewHistory</p>

</td><td>

<p>View History</p>

</td></tr><tr><td>

<p>zope2.ViewManagementScreens</p>

</td><td>

<p>View management screens</p>

</td></tr><tr><td>

<p>zope2.WebDAVLock</p>

</td><td>

<p>WebDAV Lock items</p>

</td></tr><tr><td>

<p>zope2.WebDAVUnlock</p>

</td><td>

<p>WebDAV Unlock items</p>

</td></tr><tr><td>

<p>zope2.WebDAVAccess</p>

</td><td>

<p>WebDAV access</p>

</td></tr><tr><td>

<p>cmf.ListFolderContents</p>

</td><td>

<p>List folder contents</p>

</td></tr><tr><td>

<p>cmf.ListUndoableChanges</p>

</td><td>

<p>List undoable changes</p>

</td></tr><tr><td>

<p>cmf.AccessInactivePortalContent</p>

</td><td>

<p>Access inactive portal content</p>

</td></tr><tr><td>

<p>cmf.ManagePortal</p>

</td><td>

<p>Manage portal</p>

</td></tr><tr><td>

<p>cmf.ModifyPortalContent</p>

</td><td>

<p>Modify portal content</p>

</td></tr><tr><td>

<p>cmf.ManageProperties</p>

</td><td>

<p>Manage properties</p>

</td></tr><tr><td>

<p>cmf.ListPortalMembers</p>

</td><td>

<p>List portal members</p>

</td></tr><tr><td>

<p>cmf.AddPortalFolders</p>

</td><td>

<p>Add portal folders</p>

</td></tr><tr><td>

<p>cmf.AddPortalContent</p>

</td><td>

<p>Add portal content</p>

</td></tr><tr><td>

<p>cmf.AddPortalMember</p>

</td><td>

<p>Add portal member</p>

</td></tr><tr><td>

<p>cmf.SetOwnPassword</p>

</td><td>

<p>Set own password</p>

</td></tr><tr><td>

<p>cmf.SetOwnProperties</p>

</td><td>

<p>Set own properties</p>

</td></tr><tr><td>

<p>cmf.MailForgottonPassword</p>

</td><td>

<p>Mail forgotten password</p>

</td></tr><tr><td>

<p>cmf.RequestReview</p>

</td><td>

<p>Request review</p>

</td></tr><tr><td>

<p>cmf.ReviewPortalContent</p>

</td><td>

<p>Review portal content</p>

</td></tr><tr><td>

<p>cmf.AccessFuturePortalContent</p>

</td><td>

<p>Access future portal content</p>

</td></tr></tbody></table><p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.3.5.
                Making Components Theme Specific
            </h1>

            <p class="documentDescription">You may want to make components only available for your particular theme. To do this you will need an interface.</p>
    
            <div>
                
                    <div><p>As
components come into being as soon as Zope starts up and reads the
.zcml files, they are available for every Plone site you have in a Zope
instance. You might not want this to happen.</p>

<h2 id="toc1">A Theme Interface</h2>

<p>You can specify that your components are available only for your
theme with a marker interface and a layer attribute in ZCML. Here's a
rewired version of the presentation viewlet:</p>

<pre>&lt;browser:viewlet
      <em>name="[your namespace].[your presentation viewlet]"

     </em> for="Products.ATContentTypes.interface.IATDocument"
      manager="plone.app.layout.viewlets.interfaces.IAboveContentBody"
      <em>class=".[your viewlet module].[your viewlet class]"

      layer=".interfaces.IThemeSpecific"</em>
      permission="zope2.View"
      /&gt;</pre>

<p class="callout">Note: Don't confuse the layer attribute with a skin
layer. Here, layer refers to the whole theme rather than just one slice
of it.</p>

<p>There are two methods for creating a theme interface:</p>

<h3 id="toc2">Using plone.theme</h3>

<p>In Plone 3.0, plone.theme is used:</p>

<ul class="listlevel1WW8Num1"><li>A marker interface is defined in [your theme package]/browser/interfaces.py:</li></ul><pre>from plone.theme.interfaces import IDefaultPloneLayer

class IThemeSpecific(IDefaultPloneLayer):
    """Marker interface that defines a Zope 3 browser layer.    """</pre>

<ul class="listlevel1WW8Num1"><li>and this is registered in ZCML in [your theme package]/browser/configure.zcml</li></ul><pre>&lt;interface
        interface=".interfaces.IThemeSpecific"
        type="zope.publisher.interfaces.browser.IBrowserSkinType"
        name="[your skin name]"
        /&gt;</pre>

<p class="discreet">Note: [your skin name] crops up here; refer back to the skins section if you are wondering what this is.</p>

<h3 id="toc3">Using plone.browserlayer</h3>

<p>In Plone 3.1, plone.browserlayer is available to you.</p>

<ul class="listlevel1WW8Num1"><li>Create your interface (e.g. in [your theme package]/browser/interfaces.py)</li></ul><pre>from zope.interface import Interface
    class IThemeSpecific(Interface):
        """A layer specific to my product        """</pre>

<ul class="listlevel1WW8Num1"><li>Register this in the configuration (in [your theme package]/profiles/default/browserlayer.xml):</li></ul><pre>&lt;layers&gt;
 &lt;layer name="[your skin name]"
   interface="[your namespace].[your theme name].browser.interfaces.IThemeSpecific"
 /&gt;
&lt;/layers&gt;</pre>

<p>If you generate your file system product or egg using the
plone3_theme paster template, then the basics will be done for you
(using the plone.theme method), you will simply need to track down the
interface to find its name. Look in</p>

<ul><li>[your theme package]/browser/interfaces.py or configure.zcml</li></ul><p>and you should find it with the name IThemeSpecific. When you refer to it, use its path</p>

<pre>layer=".interfaces.IThemeSpecific"</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.3.6.
                Skin or Components?
            </h1>

            <p class="documentDescription">You’ll
have noticed that you can turn any template or css file, or any
directory containing these into a component. So why bother with the
Skin building block?</p>
    
            <div>
                
                    <div><p>The product created by the plone3_theme paster template does the following:</p>

<ul class="listlevel1WW8Num1"><li><strong>overrides and rewrites</strong> of the standard Plone Default templates and CSS files go in the <strong>Skin</strong> section â the skins directory.</li>

      <li><strong>new</strong> style sheets and images go in the <strong>Components</strong> section â the browser directory.</li></ul><p>This
manual suggests putting all your templates, style sheets and images in
the Skin section - leaving just the viewlet and portlet templates in
the components. There are a few reasons for this</p>

<ul><li>it is simpler to do this when you're just starting out</li><li>it follows the way in which Plone Default is constructed</li><li>it
makes it quick and easy to adjust your theme on-the-fly after it's
installed. At that point, you can make further customizations of the
Skin through the Zope Management Interface.<br></li></ul><p>At the time of writing there's a <a href="http://www.openplans.org/projects/ootb-plone-themes/lists/ootb-plone-themes-discussion/archive/2008/05/1209686168874/forum_view">big discussion</a> going on about this very question.</p>

<p>&nbsp;</p>

<p>If you want to strip the browser resources out of the product created by the plone3_theme paster template</p>

<ul><li>remove the images and stylesheets directories in the [your theme package]/browser</li><li>remove the &lt;browser:resourceDirectory /&gt; entries in [your theme package]/browser/configure.zcml</li><li>remove the register stylesheet entry for main.css in [your theme package]/profiles/default/cssregistry.xml</li><li>if
you have already installed your product you may need to check the CSS
registry in the Zope Management Interface (portal_css) and delete the
main.css entry there too<br></li></ul><p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.3.7.
                Where to find what you need
            </h1>

            <p class="documentDescription">Where to put components in your own product and how to track them down in the Zope Management Interface and on the file system.</p>
    
            <div>
                
                    <div><h2 id="toc1">Through the Web</h2>

<p>The templates for most components can be customized through the web:</p>

<ul class="listlevel1WW8Num1"><li>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</li></ul><p>The <a href="http://plone.org/documentation/manual/theme-reference/elements/elementsindex">Elements</a> section can help you identify the component you need.</p>

<h2 id="toc2">Plone Default Components on the File system</h2>

<p>If you're planning to wire up your own components, you may need to
track down the relevant files of existing components to copy. This can
be tricky. They are packaged up into a number of different eggs, so you
need first to locate where your eggs are stored, and then work out
which of these contains the component elements you need.</p>

<ul class="listlevel1WW8Num1"><li>To work out where your eggs are stored, look at the <a href="http://plone.org/documentation/manual/theme-reference/whereiswhat/egglocation">Where is What</a> section of this manual?</li>

      <li>The <a href="http://plone.org/documentation/manual/theme-reference/elements/elementsindex">Elements</a> section of this manual will help you track down the egg containing the component you need.</li></ul><h2 id="toc3">In your own Theme Product</h2>

<dl><dt> <img class="image-right" src="plone-theme-references_archivos/your_theme_egg_components_cutdown.gif" alt="The browser folder in your theme product">/browser/viewlet.py | viewlet.pt</dt>

      <dd>An example viewlet component</dd>

      <dt>/browser/interfaces.py</dt>

      <dd>This is used to create your theme interface</dd>

      <dt>/profiles/default/viewlets.xml</dt>

      <dd>Use this file to order your viewlets within viewlet managers</dd>

      <dt>/browser/configure..zcml</dt>

      <dd>Use this file to wire up your components</dd>

      <dt>/browser/templates | styles</dt>

      <dd>These
directories can be used for templates, styles, and images. You will
need to register these as directories as resources in configure.zcml</dd></dl></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                5.4.
                Configuration
            </h1>

            <p class="documentDescription">How to write a configuration file and where to put it.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.4.1.
                Profiles
            </h1>

            <p class="documentDescription">Configuration and profiles</p>
    
            <div>
                
                    <div><p>Configuration
refers to the default behaviour of a site (for instance, whether you
allow people to sign up to your site, or how dates are displayed).
You're likely to want some of this behaviour to be embedded in your
theme.</p>

<p>There is also some overlap between Components, Skins, and
Configuration. For instance, the order of skin layers and the order in
which viewlets appear within a viewlet manager are considered aspects
of configuration.</p>

<h2 id="toc1">Profile</h2>

<p>A profile is a set of configuration files. Each file is written in
fairly simple XML and refers to a particular group of components or
page elements. There are two different types of profile, base profiles
and extension profiles. For theme purposes you will only ever need to
use an extension profile (i.e., a profile that extends the
configuration of an existing site).</p>

<p>A profile comes into being when it is wired up by ZCML. Here's the version created by the plone3_theme paster template:</p>

<pre>&lt;genericsetup:registerProfile
 name="default"
 title="[your skin name]"
 directory="profiles/default"
 description='Extension profile for the "[your skin name]" Plone theme.'
 provides="Products.GenericSetup.interfaces.EXTENSION"
/&gt;</pre>

<p>You'll see that it points at a directory for the location of the XML
files and indicates that it is an extension profile by using an
interface.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.4.2.
                Generic Setup XML
            </h1>

            <p class="documentDescription">The language used to define profiles.</p>
    
            <div>
                
                    <div><p>The
XML used for profile files is straightforward. There's no DTD
available, but there are plenty of examples to reuse or adapt for your
purposes. If all of this seems too much, the good news is that you can
get Generic Setup to write the files for you by exporting the
configuration from an existing site. There's more information on how to
do this on the Generic Setup Tool page.</p>

<p>The root node of an XML profile is usually an object:</p>

<pre>&lt;object name="portal_javascripts" meta_type="JavaScripts Registry"&gt;
     .......
&lt;/object&gt;</pre>

<p>which corresponds to a particular site tool (in this case the
JavaScripts registry). Sub-nodes represent sub-objects and XML
attributes correspond to the attributes of those classes.</p>

<pre>&lt;javascript cacheable="True" compression="none" cookable="True"
            enabled="True" expression="" id="jquery.js" inline="False"/&gt;</pre>

<p>So, in this case, the sub-node represents an entry in the JavaScripts registry and its tick boxes.</p>

<p><img class="image-inline" src="plone-theme-references_archivos/portal_js_snippet.gif" alt="screenshot of the javascripts registry in the ZMI"></p>

<p>In the very unlikely event that you need to work out for yourself
what attributes to use, you'll need to investigate the API (or the
interfaces and classes) of the tool in question. Use <a href="http://api.plone.org/">http://api.plone.org</a> or dig into the source code.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.4.3.
                The Generic Setup Tool
            </h1>

            <p class="documentDescription">The Generic Setup tool is used to apply your profiles to your site.</p>
    
            <div>
                
                    <div><p>You can find the Generic Setup tool here</p>

<ul class="listlevel1WW8Num1"><li>Site Setup &gt; Zope Management Interface &gt; portal_setup</li></ul><p>You
can run the tool manually, but for theme purposes, if you have created
a product using the plone3_theme paster template, Generic Setup will be
triggered automatically when you install your theme in your site.</p>

<p>You'll find more extensive information about the Generic Setup Tool in this tutorial:</p>

<ul class="listlevel1WW8Num1"><li><a href="http://plone.org/tutorial/genericsetup/exports-snapshots-and-comparisons">Understanding and Using Generic Setup on plone.org</a> </li></ul><p>However, there are two useful facts to know about it.</p>

<h2 id="toc1">No Undo</h2>

<p>Although you can uninstall your theme using portal_quickinstaller,
at present, you can't undo the profiles Generic Setup applied during
installation. For the most part, this isn't a problem, but it can get
confusing - if, for instance, you are experimenting with the order of
your viewlets and have tried several versions of viewlets.xml in
successive installations. In this case, exporting a profile (explained
below) can help you make sense of what you've done.</p>

<h2 id="toc2">Exporting Profiles</h2>

<p>You can export the current configuration of your site as a set of
XML files. This can be helpful if you're not quite sure what you've
done, if you're searching for a profile to base your own configuration
on, or if you just want the Generic Setup Tool to write out a
configuration for you.</p>

<ul class="listlevel1WW8Num1"><li>Site Setup &gt; Zope Management Interface &gt; portal_setup</li>

      <li>Click the Export tab</li>

      <li>Select the steps you wish to export<br></li>

      <li>Click the Export Selected Steps button</li><li>You'll be given a zip file with the relevant XML files<br></li></ul><p>It isn't always obvious which export step you need to get the exact configuration you want, you may need to experiment.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                5.4.4.
                Where to find what you need
            </h1>

            <p class="documentDescription">How configuration works through the web and how to track down files on the file system.</p>
    
            <div>
                
                    <div><h2>Through the Web</h2>

<p>There are a number of different routes to configure your site through the web. The <a href="http://plone.org/documentation/manual/theme-reference/elements/elementsindex">Elements</a> section of this manual should give you pointers on where to look to configure particular page elements. In general</p>

<ul class="listlevel1WW8Num1"><li>Site Setup leads you to configlets for the site settings<br></li>

      <li>Site
Setup &gt; Zope Management Interface will lead you to the style sheet
and JavaScript registry (portal_css and portal_javascripts)</li>

      <li>Adding /@@viewlet_manager to a URL will enable you to order viewlets</li></ul><h2 id="toc2">Plone Default Configuration on the File System</h2>

<p>You will find most of the configuration files you need in:</p>

<ul class="listlevel1WW8Num1"><li>[your products location]/CMFPlone/profiles/default</li></ul><p>However,
be aware that some configuration files may be located in third-party
products. For instance, if you want to add some styles to the visual
editor, Kupu, as part of your theme, then you will need kupu.xml which
you'll find in [your products location]/kupu/plone/profiles/default.</p>

<p>There's an alternative to hunting around the file system, and that's to use the Generic Setup Tool to export the profile.</p>

<h2 id="toc3">In your own Theme Product</h2>

<dl><dt><img class="image-right" src="plone-theme-references_archivos/your_theme_egg_config_cutdown.gif" alt="The configuration directory in your theme product">/profiles/default/</dt>

      <dd>This
directory holds the XML for Generic Setup. The plone3_theme paster
template will have provided you with some ready-made files - for
setting up your skin layers, registering your style sheets and
JavaScript, and ordering your viewlets. </dd>

      <dt>/profiles/default/import_steps.xml</dt>

      <dd>Is an essential file for installation, you shouldn't need to change this.</dd>

      <dt>/profiles/default/cssregistry.xml | jssregistry.xml</dt>

      <dd>will
register any style sheets and JavaScript in your skin. You will have to
edit these yourself if you have any css or Javascript files to add. </dd>

      <dt>/profiles/default/skins.xml</dt>

      <dd>Will
drop your skin layers into the right order of precedence. You won't
need to change this unless you've renamed, removed, or added
directories in the skins directory of your theme egg. </dd>

      <dt>/profiles/default/viewlets.xml</dt>

      <dd>will
determine in what order viewlets appear in viewlet managers. You will
need to edit this yourself if you want to add your own viewlets.</dd>

      <dt> /profiles.zcml</dt>

      <dd>When your Zope instance starts up, this file makes the profile available for Generic Setup to use.</dd></dl></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-1">

            <h1>
                6.
                Putting a Page Together
            </h1>

            <p class="documentDescription">How do all these bits and pieces go together to make up a web page? And, more importantly, how do you get content onto the page?</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-2">

            <h1>
                6.1.
                Content to Template
            </h1>

            <p class="documentDescription">Content to Template</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                6.1.1.
                Content to Template
            </h1>

            <p class="documentDescription">How content reaches a Page Template.</p>
    
            <div>
                
                    <div><p>There are three ways in which content from your content items can reach a page.</p>

<ul><li>directly from a content item</li><li>from the catalog</li><li>via a view component (using Python)<br></li></ul><h2>Getting content directly from a content item</h2>

<p>A page template can pull data directly from the content item it is
displaying. Hereâs a snippet of the RSS template, calling the
description field of a Collection content item:</p>

<pre>&lt;description&gt;
    &lt;metal:block define-slot="description"&gt;
       &lt;tal:block content="<em>context/Description</em>"&gt;
          Default rss description goes here
       &lt;/tal:block&gt;
    &lt;/metal:block&gt;
&lt;/description&gt;</pre>

<dl></dl><ul><li><em>context </em>refers to the current content item</li><li><em>Description </em>is the accessor of the description field</li></ul><dl></dl><h3 id="toc2">Accessors</h3>

<p>An accessor is simply the method by which data in a field is
extracted. In most cases the name of an accessor is the field name with
the first letter capitalized and prefaced by 'get' (e.g.,
getStartTime). There's an exception to this rule. The title and
description field, common to most content types, have 'Title' and
'Description' as their accessors (i.e. no 'get', but the first letter
is capitalized).</p>

<h3 id="toc3">Widgets</h3>

<p>This snippet from the news item template does exactly the same thing
but calls a specific display "widget" macro for the field rather than
just the data.</p>

<pre>&lt;p class="documentDescription"&gt;
 &lt;metal:field use-macro="python:here.widget('description',  mode='view')"&gt;
     .....
&lt;/metal:field&gt;
&lt;/p&gt;</pre>

<h2 id="toc4">Getting content from the catalog</h2>

<p>Every content item is catalogued on creation and editing. Some of
its fields are indexed for quick searching and sorting, while the
values of others are stored in what's called the "brains" or "metadata"
for quick access.</p>

<p>Pages pulling together a number of content types - a folder or
collection listing for instance - often get their content from a
catalog query and the brains, rather than waking up every content item
in turn. You'll normally find a variable defined somewhere which holds
the results of a catalog query:</p>

<pre>folderContents here.queryCatalog(contentFilter);</pre>

<p>Then the template will loop through the results and call values from the brains/metadata:</p>

<pre>item_url item/getURL;
item_id item/getId;</pre>

<p>These look pretty much like normal accessors, in fact they are the
names of fields in the catalog brains/metadata. This can get confusing
- if you try to access a field which isn't in the brains/metadata
you'll get an error.</p>

<p>You can see what fields are available to you via</p>

<ul><li>Site Setup &gt; Zope Management Interface &gt; portal_catalog &gt; metadata tab</li></ul><p>If you want to understand more about the catalog, there is a useful, general overview in the <a href="http://www.plope.com/Books/2_7Edition/SearchingZCatalog.stx">Zope book</a>, and a more Plone-specific runthrough in <a href="http://docs.neuroinf.de/PloneBook/ch11.rst#searching-and-categorizing-content">The Definitive Guide to Plone</a> (this book is for Plone 2 only, but the catalog section is still relevant to Plone 3).</p>

<h2>Getting content via Python (using a view component)</h2>

<p>It is often more efficient to use a view to process the data from
the content item (or a group of content items) and then drop it into
the page template. In this case, by "view" we mean a specific component
defined in ZCML.</p>

<p>Hereâs a snippet calling a view to render the sitemap:</p>

<pre>&lt;ul id="portal-sitemap"
    class="navTreeLevel0 visualNoMarker"
    tal:define="view <em>context/@@sitemap_view;</em>"&gt;
     &lt;tal:sitemap replace="structure view/<em>createSiteMap</em>" /&gt;
&lt;/ul&gt;</pre>

<ul><li><em>context/@@sitemap_view</em> is assigned to a variable called (helpfully) 'view'</li><li><em>createSiteMap</em> is a method of @@sitemap_view</li><li>@@ indicates that this is a view component</li></ul><p> Here's the wiring in ZCML that creates @@sitemap_view:</p>

<pre>&lt;browser:page
     for="*"
(thereâs no restriction on where I can be used)
     name="sitemap_view"
(this is my name)
     class=".sitemap.SitemapView"
(this is where you can find the code to deliver my content)
     permission="zope.Public"
(you can see me if you have the Public permission)
     allowed_interface=".interfaces.ISitemapView"
/&gt;</pre>

<p>In summary</p>

<ul><li>the content is processed by a Python class</li><li>ZCML wires this class up into a component</li><li>the template calls this component</li></ul><p>&nbsp;</p>

<p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                6.2.
                Templates and Components to Page
            </h1>

            <p class="documentDescription">Templates and Components to Page</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                6.2.1.
                Templates and Components to Page
            </h1>

            <p class="documentDescription">An overview of how templates, viewlets, and portlets mesh together to create a page.</p>
    
            <div>
                
                    <div><p>Plone's page templates can be frustrating at first. There's no single template which seems to contain everything you need.</p>

<h2 id="toc1">Content Views</h2>

<p>Since each content type is likely to have a different combination of
fields, each content type requires a separate template for display. As
we saw in the <a href="http://plone.org/documentation/manual/theme-reference/page/buildingblocks/skin/templates">templates and templating language</a> section, these usually have _view appended to their name. You can find those for the standard Plone content types in</p>

<ul class="listlevel1WW8Num1"><li>[your zope instance]/Products/CMFPlone/Skins/plone_content.</li></ul><h2 id="toc2">main_template</h2>

<p>Knowing about content views only gets you so far, however. It is the
main template (main_template.pt) which draws the content together with
the page furniture and design. You can find this in</p>

<ul class="listlevel1WW8Num1"><li>[your zope instance]/Products/CMFPlone/skins/plone_templates.</li></ul><p>It
is important to remember that the content view templates aren't
complete in themselves, they merely provide a snippet of content which
is dropped into a "slot" in the main_template - called 'main'.</p>

<p><img class="image-inline" src="plone-theme-references_archivos/maintemplate.html" alt=""></p>

<p class="discreet">If you feel unsure about slots, then have a look back at the <a href="http://plone.org/documentation/manual/theme-reference/page/buildingblocks/skin/templates">templates and templating language section</a>.</p>

<p>Around this main slot, the components - viewlets and portlets come
into play - supplying the page furniture and decoration around the
content. The main template simply pulls these in via viewlet managers
and portlet managers.</p>

<p>Viewlets are so flexible that they can even be pulled into the
content view. The abovecontentbody manager, for instance, is used in a
number of content views, and handles, amongst other things, the
presentation viewlet we looked at in previous sections.</p>

<h2 id="toc3">In more detail</h2>

<p>You might find it helpful to look at an example in context.</p>

<p>Have a look at:</p>

<ul class="listlevel1WW8Num1"><li>Products/CMFPlone/Skins/plone_templates/main_template </li></ul><p>and</p>

<ul class="listlevel1WW8Num1"><li>Products/CMFPlone/Skins/plone_content/document_view</li></ul><h3 id="toc4">About document_view (a content view template)</h3>

<p>1. Although document_view looks like a complete HTML page, ignore
this. Just note that right at the top it calls the main_template.</p>

<pre>metal:use-macro="here/main_template/macros/master"</pre>

<p>The code that gets used from document_view is actually the bit between these tags:</p>

<pre>&lt;metal:main fill-slot="main"&gt; â¦â¦ &lt;/metal:main&gt;</pre>

<p>This gets dropped into a slot in the main_template:</p>

<pre>&lt;metal:bodytext metal:define-slot="main" 
                tal:content="nothing"&gt;
... 
&lt;/metal:bodytext&gt;</pre>

<p> 2. Going back to the fill-slot in the document_view youâll see a
few tags calling the relevant fields from the content type â like
this:</p>

<pre>&lt;metal:field 
       use-macro="python:here.widget('title', mode='view')"&gt;
&lt;/metal:field&gt;</pre>

<p> Youâll also see a few tags like calling viewlet managers which, in turn, will summon up groups of viewlets:</p>

<pre>&lt;div tal:replace="structure provider:plone.abovecontentbody" /&gt;</pre>

<p>These enable you to drop extra bits of page furniture around the
specific content from the fields (e.g., the presentation mode link).</p>

<h3>About the main template</h3>

<p>1. Jump back to main_template and youâll see similar calls to
other viewlet managers managing groups of viewlets for more page
furniture:</p>

<pre>&lt;div tal:replace="structure provider:plone.portaltop" /&gt;</pre>

<p>2.  And calls to portlet managers to pull up the portlets defined for that particular page:</p>

<pre>&lt;tal:block replace="structure provider:plone.leftcolumn" /&gt;</pre>

<p>3. Youâll also see a number of additional slots (define-slot),
which could also be filled (fill-slot) from the content view template
if you wanted. Here's one you could use to add a bit of css:</p>

<pre>&lt;metal:styleslot define-slot="style_slot" /&gt;</pre>

<p>Jump back to your content view template and simply add an additional fill-slot (outside of the main fill-slot):</p>

<pre>&lt;metal:mystyleslot fill-slot="style_slot"&gt;
 ..... 
&lt;/metal:mystyleslot&gt;</pre>

<p>We'll go into other ways of providing styles in more detail in the next section.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                6.2.2.
                How to show full content in folder views 
            </h1>

            <p class="documentDescription">This
how-to only makes sense for folders, smart folder, or other similar
views with a reasonably small number of items. It shows how to display
the full view of content in listings by using the macros already
defined for the content types. The same approach can be used to define
viewlets for layout products like compositepack. </p>
    
            <div>
                
                    <div><p>I was looking for a layout product for the front page of a site I am

working on, and the existing products did not meet my needs out of the

box because they only showed summary views of content rather than the

full view. Instead of writing viewlets for different content types from

scratch, I used the existing view macros of the content types as

follows, in a new folder view I called folder_full_view (this is just a

code snippet):</p>

<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tal:listing condition="folderContents"&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;div tal:repeat="item folderContents"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;tal:block tal:define="here item/getObject;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; actions nothing;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; view here/defaultView;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; object_title item/pretty_title_or_id"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tal:on-error="nothing"&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;div metal:use-macro="here/?view/macros/main"/&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/tal:block&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/div&gt;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/tal:listing&gt;</pre>

<p>The

setting of actions to nothing is so that the action icons are not

displayed for every content item. The on-error="nothing" may not be

necessary for you. I have it because I allow the catalog to return

results for which there is no View permission.</p>

<p>Similarly, for the CompositePack product, I defined a viewlet</p>

<pre>&lt;div class="viewlet default_view"&gt;
&lt;tal:block on-error="nothing"
&nbsp;&nbsp;&nbsp;&nbsp; tal:define="here nocall: context;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; actions nothing;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; view here/defaultView;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; object_title here/pretty_title_or_id"&gt;
&nbsp; &lt;metal:block use-macro="context/global_defines/macros/defines" /&gt;
&nbsp; &lt;div metal:use-macro="context/?view/macros/main"/&gt;
&lt;/tal:block&gt;
&lt;/div&gt;
</pre>

<p>so that complete content can be displayed in a layout.</p>

<p>&nbsp;</p>

<p>Use these ideas at your own risk. Seems to work for me so far.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                6.2.3.
                 How to scale images using PiL in Page Templates 
            </h1>

            <p class="documentDescription">A quick description of how to scale images from an image field using the Python Image Library in your Page Templates using TAL. </p>
    
            <div>
                
                    <div><p>PROBLEM:</p>

<p>I have a custom type with an ImageField.&nbsp; I'm

customizing a folder listing of these types and I wanted a thumbnail of

each image shown in the folder listing.&nbsp; This is very straightforward

using PiL (Python Imaging Library), if you know what to do.&nbsp; I was also

presented with the problem of working with brains rather than the

object itself.</p>

<p>ASSUMPTIONS:</p>

<ul><li>You have PiL installed and working.</li><li>You know how to make a custom Archetype</li></ul><p>OVERVIEW:</p>

<p>When

you get the folder contents for a folder listing, brains objects are

returned and iterated over to produce the list.&nbsp; This is of course,

much more efficient than waking up each object.&nbsp; The problem being, you

cannot get to your Image field in a brain (that I know of).&nbsp; The

following is a snippet from 'folder_listing.pt' showing this.</p>

<pre>&lt;tal:foldercontents define="contentFilter contentFilter|request/contentFilter|nothing;

                            contentsMethod python:test(here.portal_type=='Topic', here.queryCatalog, here.getFolderContents);

                            folderContents folderContents|python:contentsMethod(contentFilter);"&gt;



	&lt;tal:entry tal:repeat="item folderContents"&gt;

	&lt;tal:block tal:define="item_url item/getURL|item/absolute_url;"&gt;</pre>

<p>As

you can see, while iterating over 'item' you're accessing brains-y

things in a brains-y way, like 'item/getURL'.&nbsp; But you'll notice that

you cannot do 'item/my_image' because it's not in the brain.&nbsp; What to

do?! you may wail.&nbsp; Well, you could wake up the objects, get the image

field, and then call the image scaling on it in a pythonic way, but

this is a performance hit, puts python in your TAL, whcih you should

avoid.</p>

<p>Instead you'll just be crafty.&nbsp; You already have

'item_url' and you know the name of your image field (my-image) so put

those together and you'll get right at the image.&nbsp; Try this in your

browser:</p>

<p>http://full/url/to/your/object/my-image</p>

<p>and you should see your image! Translating this into TAL, you would go:</p>

<pre>&lt;img src="#" tal:attributes="src string:${item_url}/my-image" /&gt;</pre>

<p>Now

to add the image scaling bit, and this is where I went wrong.&nbsp; Much of

the Plone documentation about PiL assume you're working with an ATImage

object, but you're not.&nbsp; You're working with an AT ImageField.&nbsp; An AT

ImageField only defines ONE image scale size by default:</p>

<pre>sizes = {'thumb': (80,80)}</pre>

<p>&nbsp;whereas ATImage defines a bunch:</p>

<pre>sizes = {'large'   : (768, 768),

           'preview' : (400, 400),

           'mini'    : (200, 200),

           'thumb'   : (128, 128),

           'tile'    :  (64, 64),

           'icon'    :  (32, 32),

           'listing' :  (16, 16),

          },</pre>

<p>To

make matters worse, notice that the sizes defined for the same size key

are different.&nbsp; Bad dog.&nbsp; No cookie.&nbsp; Anyhow, what this means is that

in order to access the size you want, you have to define it in your

schema in advance, like so:</p>

<pre>    ImageField(

        name='my-image',

        widget=ImageWidget(

            label="My Image",

            description="An image!",

        ),

        storage=AttributeStorage(),

        sizes= {'large'   : (768, 768),

           'preview' : (400, 400),

           'mini'    : (200, 200),

           'thumb'   : (128, 128),

           'tile'    :  (64, 64),

           'icon'    :  (32, 32),

           'listing' :  (16, 16),

          },

    ),

</pre>

<p>Ok, so now that you have defined the sizes you want in your

custom type's schema, you're ready to use it in your Page Template.&nbsp;

Remember the way we accessed it before?</p>

<pre>&lt;img src="#" tal:attributes="src string:${item_url}/my-image" /&gt;</pre>

<p>To access the sizes defined in your schema, just add the name to the end of your image, preceded by an underscore.</p>

<pre>&lt;img src="#" tal:attributes="src string:${item_url}/my-image_mini" /&gt;</pre>

<p>It's

that easy, and it should be.&nbsp; You shouldn't have to access and

therefore wake up your objects!&nbsp; There are also other ways to get at

PiL's image scaling, but this I found was easiest and didn't throw any

bizarro "Unauthorized" or "TypeError: a float is required" errors.</p>

<p>Enjoy!<br>~Spanky</p>

<p>ALSO SEE:</p>

<a class="generated" href="http://plone.org/kb/manual/archetypes-developer-manual/fields/fields-reference">http://plone.org/documentation/manual/archetypes-developer-manual/fields/fields-reference</a><a class="generated" href="http://plone.org/kb/tutorial/richdocument/pil">http://plone.org/documentation/tutorial/richdocument/pil</a></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                6.3.
                CSS and JavaScript to Page
            </h1>

            <p class="documentDescription">CSS and JavaScript to Page</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                6.3.1.
                CSS and JavaScript to Page
            </h1>

            <p class="documentDescription">How style sheets and JavaScript reach the page.</p>
    
            <div>
                
                    <div><p>Style
sheets and JavaScript files are included in the skin section of the
Plone Default theme, so the process of customizing or rewriting in
general follows the concept of order of precedence described in the <a href="http://plone.org/documentation/manual/theme-reference/page/buildingblocks/skin">Skin</a> section of this manual (i.e. placing a replacement in a higher layer in the Skin).</p>

<p>If you create your own style sheet, you can either put it in the
custom folder of portal_skins through the web or in the skins directory
of your theme on the file system.</p>

<p class="discreet">If you like, and are feeling ambitious, you can
turn your stylesheet into a resource type component by putting it in
the browser directory and registering it in ZCML. Indeed, this is done
for you if you create your own theme product using the paster
plone3_template. There are pros and cons to the latter approach, look
back at the <a href="http://plone.org/documentation/manual/theme-reference/page/buildingblocks/components/skinorcomponents">Skin or Components</a> section if you want to explore these further.</p>

<h3 id="toc1">Resource Registries</h3>

<p>Before the CSS and JavaScript reach the page they go through an
extra step. You'll note that there are quite a few style sheets and
JavaScript files available (and not all are always required). So a
Registry tool picks and chooses them as required and merges only those
it needs for speed and efficiency.</p>

<p>There's a detailed tutorial on how to use these registries in the <a class="external-link" href="http://plone.org/documentation/manual/theme-reference/page/css/resource-registries">following section</a>.</p>

<p>including how to use conditions to specify that you only want a
particular resource loaded in a particular context (for instance with a
document view).</p>

<h3>Registering style sheets and JavaScript</h3>

<ul><li>Through the web you can add or remove style sheets and
JavaScript by going to the Zope Management Interface &gt; portal_css or
portal_JavaScripts.</li><li>On the file system, registering style
sheets and JavaScript is part of the Configuration. So you'll need to
look in profiles/default/jssregistry.xml and cssregistry.xml.</li></ul><h3 id="toc2">DTML</h3>

<p>Some of the default Plone style sheet files have a .dtml extension, and the CSS inside is wrapped in</p>

<pre>/* &lt;dtml-with base_properties&gt; */
 .......
/* &lt;/dtml-with&gt; */</pre>

<p>DTML is another Zope templating language, which in this case is
deployed so that particular variables can be picked up from a
properties sheet (base_properties.props) - for example:</p>

<pre>#portal-column-one {
    vertical-align: top;
    <em>width: &lt;dtml-var columnOneWidth missing="16em"&gt;;

</em>    border-collapse: collapse;
    padding: 0;
}</pre>

<p> <br>We wouldn't recommend using this technique as it is likely to
be phased out, but it is as well to know that it is there. You can
sometimes get caught out if you're customizing an existing style sheet
and accidentally delete the top or bottom "dtml-with" statement.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                6.3.2.
                Using the Resource Registries to Control CSS and JavaScript
            </h1>

            <p class="documentDescription">Plone
has two neat tools for managing Cascading Stylesheets and JavaScript in
a handy way. This tutorial explains some whys and hows and even has a
minimal practical example of how it works.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-4">

            <h1>
                6.3.2.1.
                Why do we even have these registries? 
            </h1>

            <p class="documentDescription">Why were the Resource Registries written, what do they do, and why are they useful?</p>
    
            <div>
                
                    <div><p>The ResourceRegistries spring out of ( as most features in Plone )

frustrations with the state of the world before their existence: If you

wanted to add a CSS style sheet or a Javascript library to your Plone

site, beyond using the ploneCustom.css-file, you would have to override

the header templates. This was painful from a maintenance point of

view, and it also didn't allow it happening more than once. There was

no way of Products supplying their own css files without massive

conflicts if more than one Product attempted the same. Having several

style sheets and Javascript files to make things more manageable on the

filesystem was painful too.</p>

<p>With the existence of

ResourceRegistries we were also able to split up Plone's CSS and

Javascript into more manageable parts that can be turned on or off at

the click of a button. We couldn't do this in earlier versions of Plone

as splitting the style sheets would increase the number of separate

http-requests needed to display a page incredibly.</p>

<h3>The resource registries should:</h3>

<ul><li>Make it easier to work with and supply your own Cascading Style Sheets and JavaScripts in Plone</li><li>Make

it possible/easier to add conditions to your Cascading Style Sheets and

JavaScripts so they only apply when you want them to</li><li>Make it

easy for Product authors to supply Cascading Style Sheets and

JavaScripts for their products without&nbsp; getting conflicts with other

products</li><li>Reduce the number of http-requests needed to display a Plone page in a browser</li><li>Pack

Cascading Style Sheets and JavaScripts to reduce the download sizes of

files to users, and the bandwidth usage from serving a Plone site</li><li>Make it easy to change priorities amongst Cascading Style Sheets and JavaScripts</li><li>Make it easy to disable all or parts of Plone's default Cascading Style Sheets and JavaScripts</li></ul><h3>What are the registries?<br></h3>

<p>The

Resource Registries currently consist of two Plone tools living in the

ZMI in the root of your Plone site. They have been part of the Plone

bundle/installers since Plone 2.1. (They can be used with

Plone 2.0.x as well. There is a special readme-file in the product for

installation instructions for Plone 2.0.x)</p>

<h3>How do the registries work?<br></h3>

<p>Each

registry has an ordered list of resources, CSS or JavaScript files,

each with its own set of attributes. Entries in the registries will be

linked automatically in Plone pages in the standard templates when the

browser requests a page. The registries have been configured to have

very sensible defaults â so for almost all use-cases (probably 90%+) it

is merely the matter of adding the id of a resource you want to use.</p>

<p class="callout">NOTE:

For experimentation, for example when reading this document, make sure

to check the "debug/development mode" checkbox on the top of the

configuration panel. (Read more about why in part 2.)</p>

<p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                6.3.2.2.
                Conditions, merging, caching and debugging
            </h1>

            <p class="documentDescription">some more details on how the ResourceRegistries function </p>
    
            <div>
                
                    <div><h2>Conditions</h2>

<p>When a user agent (i.e a browser) makes a page

request, all the resources registered in the registry are evaluated

against their condition field. If the condition is true, the resource

is served to the browser. If the condition evaluates to false, the

resource is not served.</p>

<p>This gives you the ability to

conditionally serve different style sheets or scripts based on logic

like whether the user is logged in, whether you are in the "Human

Resources"-section of your intranet of if the content-type is a

news-item.</p>

<p>Conditions have to be <a class="external-link" href="http://docs.zope.org/zope2/zope2book/source/AppendixC.html#tales-overview">TALES</a> expressions. You can use <a class="external-link" href="http://plone.org/documentation/tutorial/zpt/global-template-variables/">global template variables</a> inside them.<a class="external-link" href="http://plone.org/documentation/how-to/cmf-expressions"></a></p>

<h2>Merging</h2>

<p>Whenever

you click the save-button in a registry, a new set of css or javascript

files are created. The registry will try to assemble the different

resources into bigger lumps/files to server to the browser. This is to

reduce the number of http-requests necessary and can improve

performance considerably.</p>

<h3>The rules for merging resources</h3>

<ol><li>The

registry will only try to merge resources that are adjacent in the

list. Otherwise there's risk that the order of operations in the

browser would be affected (order of code in JavaScript and the order of

the cascade in CSS). This would possibly affect rendering or execution

in the browser in a negative way, and is therefore not available.</li><li>Two adjacent resources are only merged if their condition is exactly the same (more about conditions in the next chapter)</li><li>Two adjacent resources are not merged if they don't have the 'allow merging' checkbox checked <br></li></ol><p>The

magically assembled 'Files' are assigned a new random number as their

name. So you'll find entries like <code>&lt;link rel="stylesheet"

href="plone2341.css" /&gt;</code> in your html source. You can inspect how

the resources will be merged if you click the second tab in the

registry; "composition". It will present you with a list of 'magic'

files, like 'plone2341.css', and nested within them the component

resources they are constructed from. You can click each entry to

inspect what it will look like when served.</p>

<h3>The CSS-composition UI</h3>

<p>&nbsp;</p>

<p><img class="image-inline" src="plone-theme-references_archivos/image_preview.html" alt="The css-registry composition UI"></p>

<p>Each

merged resource will have a small snippet in the source identifying its

origin so that you can get hold of the full unmodified source if you

need.</p>

<p>The comment stuff usually looks like the following.</p>

<pre>/* ----- base.css ----- */
@media screen {
/* http://yourhost/plone/portal_css/base.css?original=1 */
/* */</pre>

<p>&nbsp;</p>

<h2>Caching and HTTP</h2>

<p>The

merged resources are automatically served with HTTP-headers optimized

for being cached a long time. Since the auto-generated number is being

changed every time you save the registry settings, the browser will

request the new 'files' and not use its old cached values anyway. The

scheme is actually rather clever.</p>

<p>The potential problem with

the caching scheme is that the registry doesn't know if you change the

files in the skins directories unless you touch the "save" button in

the registry. This&nbsp; is only an issue while you are working on your CSS

(or JavaScripts) to get them right, but can cause massive confusion if

you make changes and only see cached styles/scripts in the browser. To

avoid this issue, we have added a handy "debug and development" mode to

the registries.</p>

<h2>Debug and development mode</h2>

To enable the debug and development mode, check the corresponding checkbox in the registry configuration page and click "save".

<p>This:</p>

<ul><li>Disables

merging of resources (great for finding bugs and specific declarations

with the inspectors and development tools like Firebug)</li><li>Sets HTTP-headers for not caching so that you get a fresh copy every time<br></li><li>Disables compression</li></ul><p>&nbsp;</p>

<p>These settings affect performance in an adverse way, so make sure to disable the debug mode when your Plone goes live.</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                6.3.2.3.
                Resource Parameters
            </h1>

            <p class="documentDescription">The parameters for a registry entry in the CSS (and JavaScript) registry. </p>
    
            <div>
                
                    <div><p>Each entry in the CSS and JavaScript registries has some parameters that can be tweaked.</p>

<dl><dt>id</dt><dd>The id of the style sheet or JavaScript to be used.
In Plone 3.3 onwards you can specify an externally hosted resource by
entering the full URL here. <br></dd><dt>expression</dt><dd>A <a class="external-link" href="http://docs.zope.org/zope2/zope2book/source/AppendixC.html#tales-overview">TALES</a> expression to be evaluated to check if the style sheet or JavaScript should be included in output or not. You can use <a class="external-link" href="http://plone.org/documentation/tutorial/zpt/global-template-variables">global template variables</a> here.<br></dd>

<dt>conditionalcomment (available from Plone version 3.3 onwards)<br></dt><dd>

A small string to be included in a conditional comment around the resource. For example, entering simply 'IE' in the field will

  result in a conditional comment of:

<br><pre>&lt;!--[if IE]&gt;...&lt;![endif]--</pre>
This behavior is currently enabled for the CSS and JavaScript
registries. The KSS registry is the only registry that does not have
full support for conditional comments. For more information see:
<a class="external-link" href="http://msdn.microsoft.com/en-us/library/ms537512.aspx">  http://msdn.microsoft.com/en-us/library/ms537512.aspx</a></dd><dt>media</dt><dd>The media for which the style sheet should apply, normally empty or  'all'. other possible values are 'screen', 'print' etc. <a href="http://www.w3.org/TR/CSS21/media.html">Read more about the media settings of CSS at w3.org</a>

</dd><dt>rel</dt><dd>Link relation. defaults to 'stylesheet', and should almost always

stay that way. For designating alternative style sheets. This is used

for the toggle between large, medium and small fonts in default Plone.

Don't change this one unless you know what you are doing.</dd><dt>title</dt><dd>the title of an alternate stylesheet.</dd><dt>rendering</dt><dd>How the stylesheet is linked from the html page. This is an

advanced setting. Leave it set to the default 'import' unless you know

the effects of different ways of rendering and linking stylesheets

<dl><dt>import</dt><dd>the default. normal css import </dd><dt>link</dt><dd>works better for old browsers and is needed for alternate stylesheets</dd><dt>inline</dt><dd>render

the stylesheet inline instead of linking it externally. Shouldn't be

used at all! It isn't possible to create sites which validate if you do.<br>                   For more information see: <a href="http://developer.mozilla.org/en/docs/Properly_Using_CSS_and_JavaScript_in_XHTML_Documents">http://developer.mozilla.org/en/docs/Properly_Using_CSS_and_JavaScript_in_XHTML_Documents</a>  

</dd></dl></dd><dt>compression</dt><dd>Whether and how much the resource should be compressed

<dl><dt>none</dt><dd>the original content will not be changed</dd><dt>safe</dt><dd>the content will be compressed in a way which

should be safe for any workarounds for browser bugs. Conditional code

for Internet Explorer is preserved since ResourceRegistries 1.2.3 and

1.3.1. </dd><dt><br></dt><dt>full</dt><dd>the content will be

compressed with some additional rules.For css all comments and most

newlines are removed, this may break special browser hacks, so use with

care. For JavaScript this encodes variables with special prefixes

according to the rules described here (Special Characters):<br><a href="http://dean.edwards.name/packer/usage/">                 http://dean.edwards.name/packer/usage/</a> The source code needs to be written according to those rules, otherwise it's more than likely that it will break.<br></dd><dt>safe-encode</dt><dd> - only available for JavaScript<br>

- 'full-encode' - only available for JavaScript. Additionally encodes

keywords. This heavily compresses the JavaScript, but it needs to be

decoded on the fly in the browser on each load. Depending on the size

of the scripts this could lead to timeouts in Firefox. Use with special

care!</dd><dt>applyPrefix </dt><dd>- only available for CSS.&nbsp;<br>- If your stylesheet uses relative URLs in a <code>url()</code>

    statement, e.g. to refer to another stylesheet or image, you may

    experience problems when using the registry in non-debug-mode, as

    <em>portal_css</em> alters the URL seen by the browser. If so, set this option to <em>True</em> or tick the "Replace

    relative paths in url() statements with absolute paths?" option in the <em>portal_css</em> management screen to replace

    any relative path inside a <code>url()</code> statement with an absolute

    path (prefixed with the Plone site root path) during the resource merging

    stage. This does not modify the original stylesheet. It may have a slight

    performance impact, but it should not be an issue if resources get cached

    properly. It has no effect in debug mode.<br>&nbsp;<br></dd></dl></dd></dl></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                6.3.2.4.
                Practical: Adding a Style Sheet to the Registry Through the Web
            </h1>

            <p class="documentDescription">Basic
operations of the CSS-and Javascript-registries – and a truly minimal
example of how to use them in real life. As a simple example of the
most basic functionality, we'll add and register a minimal stylesheet
that adds to the background of your Plone a terrible red color.
</p>
    
            <div>
                
                    <div><p>To use one of the registries, you have to</p>

<ol><li>Have a resource (for example a File) in your Skin with some CSS
or JavaScript in it (this could, for instance, be in the custom folder
of portal_skins).<br></li><li>Make an entry in the corresponding registry (for example portal_css) with the id of the resource. </li></ol><h2>Make a Style Sheet</h2>

<ul><li>Go to Site Setup &gt; Zope Management Interface and navigate to <em>portal_skins/custom</em></li><li>From the add-item menu, select File</li><li>Give your new file an id of '<em>css-demo.css</em>'</li><li>Paste the following content into the file:<br><pre>body{ background-color : red }</pre>

</li><li>â¦and save it</li></ul><h2>Add it to the CSS Registry<br></h2>

<p>The registries are two tools that live only in the Zope Management
Interface (ZMI); they have no interface in the Plone user-interface
itself. However, you can easily find them when browsing the ZMI of your
Plone site - look for <em>portal_css</em> and <em>portal_javascript</em></p>

<ul><li>Go to Site Setup &gt; Zope Management Interface and click
portal_css.&nbsp; Once
selected, the CSS Registry ( the one we use for this example - the
JavaScript one is almost exactly the same) will present an interface
displaying all the registered resources (in the case of the
CSS Registry, the resources are CSS files).</li><li>Make sure that you tick the debug mode checkbox. This will ensure that you see your changes immediately.<br></li></ul><ul><li>

<p>Scroll to the bottom of the form, where there is a form for adding a style sheet</p>

</li><li>In the id field, enter '<em>css-demo.css</em>'&nbsp; (leave the other values as they are by default for now)</li></ul><ul><li>Voila! â view your Plone site and you'll easily notice its (admittedly quite horrifying) shiny red background color!</li></ul><h2>The Technical Explanation</h2>

<p>Each

entry in the registries has an id that references a resource that can

be found in the current Plone acquisition context. Technically it could be a tool or a utility or

anything that has a name and is available, but most commonly it will

be a File object ( for static CSS and JS) or a DTML Method (for dynamic

variable replacement). The Resource Registries makes no difference as

to what the object is, as long as it can be found and called, rendered

or printed as a string. <br><br></p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                6.3.2.5.
                Practical: Adding a Style Sheet to the Registry in your own Theme Product
            </h1>

            <p class="documentDescription">Style
sheets and JavaScript are added to the registries on installation of
your theme product, via Generic Setup. You simply need to write the
Generic Setup XML.</p>
    
            <div>
                
                    <div><h2>Create your Style Sheet</h2>

<ul><li>Create a normal CSS file [mytheme.css] using your favourite CSS editor.</li><li>You now have two options:<br></li>

<ul><li>The simplest place to put your style sheet is in the skins
directory of your theme product. Paster will have created a styles
directory for you&nbsp; (skins/plonetheme_mytheme_styles). <br></li><li>Paster
will also have created a stylesheets directory for you in the browser
directory of your theme product and will have registered this as a
resource in the configure.zcml file. You can, if you like, put your
style sheet in that directory instead.</li></ul></ul><h2>Write your Generic Setup File</h2>

<p>The relevant files for the configuration of your registries are
profiles/default/cssregistry.xml and profiles/default/jsregistry.xml.
Paster should have created these for you, but if they aren't there,
just make them yourself.</p>

<p>An entry for a style sheet in the skins directory of your theme product, will look like this:</p>

<pre>&lt;?xml version="1.0"?&gt;
&lt;object name="portal_css" meta_type="Stylesheets Registry"&gt;
 &lt;stylesheet title="" cacheable="True" compression="safe" cookable="True"
&nbsp;&nbsp;&nbsp; enabled="1" expression="" id="mytheme.css" media="screen"
&nbsp;&nbsp;&nbsp; rel="stylesheet" rendering="import"/&gt;
&lt;/object&gt;</pre>

<p>Note that the parameters are just the same as the through-the-web
form. You need only give the ID of the style sheet; Plone will find it
as it is part of the skin.</p>

<p>An entry for a style sheet in the browser directory of your theme product will look like this:</p>

<pre>&lt;?xml version="1.0"?&gt;
&lt;object name="portal_css"&gt;
 &lt;stylesheet title=""
&nbsp;&nbsp;&nbsp; id="++resource++plonetheme.mytheme.stylesheets/mytheme.css"
&nbsp;&nbsp;&nbsp; media="screen" rel="stylesheet" rendering="import"
&nbsp;&nbsp;&nbsp; cacheable="True" compression="safe" cookable="True"
&nbsp;&nbsp;&nbsp; enabled="1" expression=""/&gt;
&lt;/object&gt;</pre>

<p>Note the special ++resource++plonetheme.mytheme.stylesheets syntax
to refer to the directory registered as a resource in
browser/configure.zcml</p>

<p>Once written, you can reimport the cssregistry.xml file using the
portal_setup tool in the ZMI to make this change take effect. Make sure
you choose the correct profile (your theme product) before importing
the CSS step. Re-installing your theme product will also work, though
you should be careful to guard against GenericSetup clashes. It's safer
to import the individual step if your theme has been installed
previously.</p>

<h2>Plone Version 3.3 Onwards</h2>

<p>In Plone 3.3 onwards you can also tell the CSS Registry to put conditional comments around your stylesheet:</p>

<pre>&lt;stylesheet title="" cacheable="False" compression="none" cookable="False"
&nbsp;rel="stylesheet" expression="" id="IEFixes.css" media="all" enabled="1"
&nbsp;rendering="import" <strong>conditionalcomment="IE"</strong> /&gt;</pre>

<p>You can also specify an external resource:</p>

<pre>&lt;javascript cacheable="False" compression="none" cookable="False"
 enabled="True" expression="" <strong>id="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"</strong>
 inline="False" insert-before="jquery-integration.js" /&gt;</pre>

<p>&nbsp;If you are using SSL and specifying an external resource, you
may find it necessary to specify both an http and an ssl entry in the
registry. You can use the expression parameter to decide which one will
be used:</p>

<pre>&lt;javascript cacheable="False" compression="none" cookable="False"
 enabled="True" <strong>expression="python:request.get('ACTUAL_URL','').startswith('https://')"</strong>
&nbsp;id="<strong>https://</strong>jqueryjs.googlecode.com/files/jquery-1.2.6.min.js"
 inline="False" insert-before="jquery-integration.js" /&gt;

&lt;javascript cacheable="False" compression="none" cookable="False"
 enabled="True" <strong>expression="python:request.get('ACTUAL_URL','').startswith('http://')"</strong>
&nbsp;id="<strong>http://</strong>jqueryjs.googlecode.com/files/jquery-1.2.6.min.js"
 inline="False" insert-before="jquery-integration.js" /&gt;</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-4">

            <h1>
                6.3.2.6.
                Example Conditions
            </h1>

            <p class="documentDescription">Some examples of limiting Style Sheets by the condition parameter, to help you get started.</p>
    
            <div>
                
                    <div><p>In
these examples we've given the condition as it would appear in
profiles/default/jsregistry.xml and cssregistry.xml. If you are working
through the web, then the text within the inverted commas "...." can
simply be dropped into the condition box for the relevant CSS or
JavaScript file in portal_css or portal_javascripts.</p>

<h2>Content Type</h2>

<p>If your CSS or JavaScript is only relevant to a particular content type:</p>

<pre>expression = "python:object.meta_type == 'ATFolder'" 
</pre>

<h2>View</h2>

<p>You can check a specific browser view for a property (this example is from Products.Maps):</p>

<pre>&lt;javascript 
    cacheable="True" 
    ...
    expression="object/@@maps_googlemaps_enabled_view/enabled 
                                                | nothing" /&gt;</pre>

<p>Here's how to look up one of the global views (see the <a title="Using Other Information about your Site on a Page" class="internal-link" href="http://plone.org/documentation/manual/theme-reference/page/otherinfo">Using Other Information about your Site Section</a> for more about these views). This example delivers the Plone RTL Style Sheet:</p>

<pre>&lt;stylesheet 
    ...
    expression="python:portal.restrictedTraverse
                             ('@@plone_portal_state').is_rtl()"
&nbsp;&nbsp;&nbsp; id="RTL.css" 
    .../&gt;</pre>

<h2>Role</h2>

<p>The following will check whether the visitor is logged in or not -
in this case it delivers the standard member.css if the visitor is not
anonymous:</p>

<pre>&lt;stylesheet 
    ...
    expression="not: portal/portal_membership/isAnonymousUser"
&nbsp;&nbsp;&nbsp; id="member.css" 
    .../&gt;</pre>

<p>This example does the same, but uses the plone_portal_state view</p>

<pre>expression="python: not here.restrictedTraverse
                        ('@@plone_portal_state').anonymous()"</pre>

<h2>Section and/or place in the site</h2>

<p>Note that the body tag of every page has a section and template CSS
class. So you may not need to use the resource registries at all.</p>

<p>However, if you want to change styles for a folder that isn't at the
top level of your site, or, if you want to supply some JavaScript at a
specific point in the site, then you will need to write a script and
call this via the resource-registry expression. The section class on
the body tag in main_template is generated by a Python script
getSectionFromURL. This is a good starting point for your own script.</p>

<p>Here's an example expression and script. This will return True for a
folder of your site with the shortname 'news' and any object within it.
In this case - unlike the default Plone setup - the news folder is one
level down from the top level:</p>

<pre>expression="python: here.getSectionInTree(object,1)=='news'"
</pre>

<pre>## Script (Python) "getSectionInTree"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=object, position
##title=Returns a section name
##
contentPath = object.portal_url.getRelativeContentPath(context)
if not contentPath:
    return ''
else:
    if len(contentPath)-1 &gt;= position:
         return contentPath[position]
    else:
         return ''
</pre>

<p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                6.3.3.
                 How to Add New Class Styles to Kupu 
            </h1>

            <p class="documentDescription"> This document explains how to add and define new custom class styles for use in kupu. </p>
    
            <div>
                
                    <div><p>&nbsp;Pre-requisites: CSS knowledge</p>

<p>1. Go to Site Setup in your Plone

	site.</p>

<p>2. Select the kupu visual editor add-on product configuration icon, as seen below:</p>

<p><img class="image-inline" src="plone-theme-references_archivos/image_preview_003.png" alt="Site-setup kupu"></p>

<p>&nbsp;</p>

<p>3. Scroll down to the paragraph

	styles box.</p>

<p><img class="image-inline" src="plone-theme-references_archivos/image_preview_011.png" alt="Kupu paragraph styles"></p>

<p>4. Add your new paragraph style in

	the box. Format is title|tag or title|tag|className, one per line. For example:</p>

<pre>Smalltext|p|smalltext</pre>

<p>5. Open your ZMI.</p>

<p>6. Make sure that your site is&nbsp;in&nbsp;<a class="external-link" href="http://plone.org/documentation/kb/how-to-make-your-css-changes-take-effect-instantly">debug mode</a>&nbsp;when first making changes. This will allow you to see your changes right away.&nbsp;</p>

<p>7. Go to

	<em>http://yoursite/portal_skins/plone_styles/ploneCustom.css/manage_main</em>.</p>

<p>8. Click the customize button.</p>

<p>9. Enter your new paragraph style

	where it says âadd your custom stuff hereâ.</p>

<pre>.smalltext {font-size: 70%;}</pre>

<p>Note: scroll down the page for

	available elements. See <em>base_properties</em> for definitions of those

	elements.</p>

<p><img class="image-inline" src="plone-theme-references_archivos/copy_of_customcss.html" alt=""></p>

<p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                6.4.
                Using Other Information about your Site on a Page
            </h1>

            <p class="documentDescription">How to get information about the state of your site and other global variables.</p>
    
            <div>
                
                    <div><p>At
some point or other you'll find you need to use the title of your site
in a template; or you'll want your template to deliver something
depending on the roles or permissions of your visitor or user. There
are two approaches for obtaining this information:</p>

<h2>1. Browser Views (recommended)<br></h2>

<p>The first, newer, and recommended approach is to use the methods available in one of three browser views:</p>

<ul class="listlevel1WW8Num1"><li>@@plone_portal_state</li>

      <li>@@plone_context_state</li>

      <li>@@plone_tools</li></ul><p>These are kept in</p>

<ul><li>[your egg location]/plone/app/layout/globals OR<br></li><li>[your egg location]/plone.app.layout-[version]/plone/app/layout/globals<br></li></ul><p>You
can find a description of each method in interfaces.py in that
directory, but the main methods are outlined below. This excerpt from
the main_template in the core Plone Default templates in Plone 4,
demonstrates how these views, or their individual methods, are made
available to every page:</p>

<pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tal:define="portal_state context/@@plone_portal_state;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; context_state context/@@plone_context_state;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lang portal_state/language;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; portal_url portal_state/portal_url;
                  ..."
     ...
&gt;
</pre>

<p>Here's an excerpt from the newsitem_view template in the core Plone
Default templates illustrating how the @@plone_context_state can be
used to establish whether an item is editable or not:</p>

<pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;p tal:define="<strong>is_editable context/@@plone_context_state/is_editable</strong>"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tal:condition="python: not len_text and is_editable"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i18n:translate="no_body_text"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class="discreet"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This item does not have any body text, click the edit tab to change it.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/p&gt;
</pre>

<h2><br></h2>

<h2>2.&nbsp; Global Defines (deprecated)<br></h2>

<p>The second approach has been around for a long time, but is being
phased out (as it is slower) in Plone 3 and has been pretty much
removed in Plone 4. This is to use a set of variables that are
available to every single page.</p>

<p>In Plone 3:</p>

<p>These are called by main_template:</p>

<pre>&lt;metal:block use-macro="here/global_defines/macros/defines" /&gt;</pre>

<p>If you want to investigate them further, you'll  find them in</p>

<ul><li>[your products directory]/CMFPlone/browser/ploneview.py.</li></ul><p>These
variables are used in a number of the default Plone templates in Plone
3 and so they are listed below alongside their equivalent in the
available views.</p>

<p>In Plone 4:</p>

<p>The global_defines macro is not used at all and the variables have
been entirely replaced in all Plone templates. However, should it be
required, the global_defines macro is still available in the core Plone
Default skin layers in the plone_deprecated folder.&nbsp; For more
information on making a Plone 3 theme compatible with Plone 4, consult
the <a class="external-link" href="http://plone.org/documentation/manual/upgrade-guide/version/upgrading-plone-3-x-to-4.0/updating-add-on-products-for-plone-4.0/no-more-global-definitions-in-templates">upgrade guide</a>.</p>

<h2>Available Views and Methods<br></h2>

<h3 id="toc1">About the site</h3>

<p>View @@plone_portal_state</p>















































































<table id="Table17Ctable" class="listing"><thead><tr><td>Method</td><td>What you get</td><td>global defines</td></tr></thead><tbody><tr><td>portal</td><td>Portal Object</td><td>portal</td></tr><tr><td>portal_title</td><td>The title of your site</td><td>portal_title</td></tr><tr><td>portal_url</td><td>The URL of your site</td><td>portal_url</td></tr><tr><td>navigation_root_path</td><td>Path of the navigation root</td><td><br></td></tr><tr><td>navigation_root_url</td><td>The URL of the navigation root</td><td>navigation_root_url</td></tr><tr><td>default_language</td><td>The default language of the site</td><td><br></td></tr><tr><td>language</td><td>The current language</td><td><br></td></tr><tr><td>locale</td><td>The current locale</td><td><br></td></tr><tr><td>is_rtl</td><td>Whether the site is being viewed in an RTL language</td><td>isRTL</td></tr><tr><td>member</td><td>The current authenticated member</td><td>member</td></tr><tr><td>anonymous</td><td>Whether or not the current visitor is anonymous<br></td><td>isAnon</td></tr><tr><td>friendly_types</td><td>Get a list of types that can be deployed by a user</td><td><br></td></tr></tbody></table><h3>About the current context</h3>

<p>View @@plone_context_state</p>































































































































<table id="Table27Ctable" class="listing"><thead><tr><td>

<p>Method</p>

</td><td>

<p>what you get</p>

</td><td>

<p>global defines</p>

</td></tr></thead><tbody><tr><td>

<p>current_page_url</p>

</td><td>

<p>The URL of the current page</p>

</td><td>

<p>current_page_url</p>

</td></tr><tr><td>

<p>current_base_url</p>

</td><td>

<p>The actual URL of the current page</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>canonical_object</p>

</td><td>

<p>The current object itself</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>canonical_object_url</p>

</td><td>

<p>The URL of the current object</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>view_url</p>

</td><td>

<p>The URL used for viewing the object</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>view_template_id</p>

</td><td>

<p>The id of the view template</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>is_view_template</p>

</td><td>

<p>True if the current URL refers to the standard view</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>object_url</p>

</td><td>

<p>The URL of the current object</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>object_title</p>

</td><td>

<p>The 'prettified' title of the current object</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>workflow_state</p>

</td><td>

<p>The workflow state of the current object</p>

</td><td>

<p> wf_state</p>

</td></tr><tr><td>

<p>parent</p>

</td><td>

<p>The direct parent of the current object</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>folder</p>

</td><td>

<p>The current folder</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>is_folderish</p>

</td><td>

<p>True if this is a folderish object</p>

</td><td>

<p> isFolderish</p>

</td></tr><tr><td>

<p>is_structural_folder</p>

</td><td>

<p>True if this is a structural folder</p>

</td><td>

<p> isStructuralFolder</p>

</td></tr><tr><td>

<p>is_default_page</p>

</td><td>

<p>True if this is the default page in a folder</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>is_portal_root</p>

</td><td>

<p>True if this is the portal root or the default page in the portal root</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>is_editable</p>

</td><td>

<p>True if the current object is editable</p>

</td><td>

<p> is_editable</p>

</td></tr><tr><td>

<p>is_locked</p>

</td><td>

<p>True if the current object is locked</p>

</td><td>

<p>isLocked</p>

</td></tr><tr><td>&nbsp;actions <br>(Plone 4)<br></td><td>The filtered actions in the context. You can restrict the actions to just one category.</td><td>&nbsp;</td></tr><tr><td>&nbsp;portlet_assignable <br>(Plone 4)<br></td><td>&nbsp;Whether or not the context is capable of having locally assigned portlets.</td><td>&nbsp;</td></tr></tbody></table><h3>Tools</h3>

<p>view @@plone_tools</p>























































<table id="Table37Ctable" class="vertical listing"><thead><tr><td>

<p>method</p>

</td><td>

<p>what you get</p>

</td><td>

<p>global defines</p>

</td></tr></thead><tbody><tr><td>

<p>actions</p>

</td><td>

<p>The portal actions tool</p>

</td><td>

<p>atool</p>

</td></tr><tr><td>

<p>catalog</p>

</td><td>

<p>The portal_catalog tool</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>membership</p>

</td><td>

<p>The portal_membership tool</p>

</td><td>

<p>mtool</p>

</td></tr><tr><td>

<p>properties</p>

</td><td>

<p>The portal_properties tool</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>syndication</p>

</td><td>

<p>The portal_syndication tool</p>

</td><td>

<p>syntool</p>

</td></tr><tr><td>

<p>types</p>

</td><td>

<p>The portal_types tool</p>

</td><td>

<p>&nbsp;</p>

<br></td></tr><tr><td>

<p>url</p>

</td><td>

<p>The portal_url tool</p>

</td><td>

<p>utool</p>

</td></tr><tr><td>

<p>workflow</p>

</td><td>

<p>The portal_workflow tool</p>

</td><td>

<p>wtool</p>

</td></tr></tbody></table><p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                6.5.
                Using jQuery and jQuery Tools
            </h1>

            <p class="documentDescription">Plone
includes the jQuery and jQuery Tools JavaScript libraries out of the
box, which you can use in your own scripts right away.</p>
    
            <div>
                
                    <div><p><a class="external-link" href="http://jquery.com/">jQuery</a> is a popular JavaScript Library that simplifies HTML

document traversal, event handling, animating, and Ajax interactions. <a class="external-link" href="http://flowplayer.org/tools/index.html">jQuery Tools</a> is a collection of user-interface components including overlays, tabs, accordions and tooltips.</p>

<p>jQuery has been shipped with Plone since 3.1. jQuery Tools was added with Plone 4.0.</p>

<h3>Using jQuery<br></h3>

<p>jQuery has excellent documentation available at <a class="external-link" href="http://api.jquery.com/">http://api.jquery.com</a>.
Note, though, that it is never wise to depend on the availability of
the "$" alias for the jQuery function since other libraries may
redefine it.</p>

<p>So, Instead of:</p>

<pre>$(document).ready(function(){
   $("a").click(function(event){
     alert("Thanks for visiting!");
   });
 });</pre>

<p>you should embed and jQuery code that uses the "$" alias in a wrapper like:</p>

<pre><strong>(function($) {

</strong> $(document).ready(function(){
   $("a").click(function(event){
     alert("Thanks for visiting!");<strong>

   });</strong>
 });
<strong>})(jQuery);

</strong></pre>

<h3>Using jQuery Tools<br></h3>

<p>jQuery Tools is a jQuery plugin, and Plone 4 includes the tabs,
tooltip, scrollable, overlay and expose toolset. The remainder of the
jQuery Tools kit plugins are available by enabling the
plone.app.jquerytools.plugins.js resource Plone's JavaScript registry.</p>

<p>The integration with jQuery Tools is provided through the package <a class="external-link" href="http://pypi.python.org/pypi/plone.app.jquerytools/">plone.app.jquerytools</a>,
which includes a set of overlay helpers for common AJAX overlay needs.
This kit is used to provide many of Plone's overlayed forms. See the <a class="external-link" href="http://pypi.python.org/pypi/plone.app.jquerytools/">plone.app.jquerytools pypi page</a> for documentation and examples.</p></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-1">

            <h1>
                7.
                Page Elements
            </h1>

            <p class="documentDescription">A
reference for the viewlets, portlets, viewlet managers, and portlet
columns which make up a page. There's a quick reference to each
component type with links and reminders on how to handle them, a visual
index of page elements plus code snippets to make your life easier.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-2">

            <h1>
                7.1.
                Viewlet
            </h1>

            <p class="documentDescription">What goes to make up a viewlet, plus cheat sheets on how to move, remove or customize them, and links to useful tutorials.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.1.1.
                Anatomy of a Viewlet
            </h1>

            <p class="documentDescription">The bits that go to make up a viewlet component.</p>
    
            <div>
                
                    <div><h2>Directive in ZCML</h2>

<p>&lt;browser:viewlet /&gt;</p>

<h2 id="toc2">Attributes in ZCML</h2>

<dl><dt>name</dt>

      <dd>e.g. [your namespace].[your viewlet name]</dd>

      <dt>manager</dt>

      <dd>a manager interface</dd>

      <dt>layer</dt>

      <dd>a marker interface for your particular theme</dd>

      <dt>class</dt>

      <dd>a
Python class. This class requires a 'render' attribute, which, in most
cases, will point to a template. You don't need to specify the template
in the ZCML, however, in Plone version 3.1.3 and higher, you can
override this template using the template attribute below<br></dd>

      <dt>template</dt>

      <dd>in
Plone version 3.1.2 and lower, you can only use this if you aren't
using a class; in Plone version 3.1.3 and higher, you can use this to
override the template you've set in the class you specified above<br></dd>

      <dt>permission</dt>

      <dd>in most cases this will be Zope.Public</dd>

      <dt>for</dt>

      <dd>specify
an interface marking a group of content types, if you wish. The viewlet
will then be restricted to those content types (for an example see the <a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.presentation">Presentation viewlet</a> in the Elements section)</dd>

      <dt>view</dt>

      <dd>specify
an interface marking a specific browser view, if you wish. The viewlet
will be restricted to items with that specific view (for an example
investigate the source code of the Content Actions viewlet - you'll
find directions on where to locate this code on the <a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.contentactions">Content Actions</a> page of the Elements section)</dd></dl></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.1.2.
                Moving, Removing or Hiding a Viewlet
            </h1>

            <p class="documentDescription">Moving, Removing or Hiding a Viewlet</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-4">

            <h1>
                7.1.2.1.
                Overview and Cheat Sheet
            </h1>

            <p class="documentDescription">A cheat sheet of what you need to do to move viewlets in your page layout, or remove or hide them from your page.</p>
    
            <div>
                
                    <div><p>You'll find detailed information and a tutorial on how to move viewlets here:</p>

<ul><li><a href="http://plone.org/documentation/manual/tutorial/customizing-main-template-viewlets/reordering-and-hiding-viewlets">

        

          http://plone.org/documentation/tutorial/customizing-main-template-viewlets/reordering-and-hiding-viewlets</a></li></ul><h2 id="toc2">Quick Cheat Sheet of the Basics</h2>

<h3 id="toc3">Through the Web</h3>

<ul class="listlevel1WW8Num1"><li>Add @@manage-viewlets to your site URL.</li>

      <li>If you want to move viewlets that only appear on a page, be sure to append @@manage-viewlets to the URL of the page.</li>

      <li>You
will find that you can move, hide or remove viewlets with this method,
but that you cannot move them from one viewlet manager to another.</li></ul><h3 id="toc4">In your own product</h3>

<p>Moving or removing viewlets is part of your site configuration:</p>

<ul class="listlevel1WW8Num1"><li>Add or edit [your theme package]/profiles/default/viewlets.xml</li></ul><p>

You'll find general information about the site configuration in the <a href="http://plone.org/documentation/manual/theme-reference/elements/buildingblocks/configuration">Configuration </a>section
of this manual. It's worth reading this through before you launch in
here, as configuring viewlets and viewlet managers can be a bit tricky.
It will tell you</p>

<ul><li>how you can get the Generic Setup tool to write out the configuration for you</li><li>why things might not be working as you expect</li></ul><p><a class="external-link" href="http://plone.org/products/gloworm">GloWorm</a>
is a useful tool here too. It will help you move the viewlets around
through the Plone user interface and inspect the resulting
configuration.</p>

<h4>Removing a viewlet from a viewlet manager</h4>

<p>You can't do anything more than hide your viewlet in the viewlet manager</p>

<pre>&lt;object&gt;
    &lt;hidden manager="[Viewlet Manager Name]" skinname="[your skin name]"&gt;
        &lt;viewlet name="[Viewlet Name]" /&gt;
    &lt;/hidden&gt;
&lt;/object&gt;</pre>

<p class="discreet">Note that you can do this process through the web
and then get the Generic Setup tool to write out the configuration for
you to transfer into your own theme package.</p>

<h4>Moving a viewlet within a viewlet manager</h4>

<pre>&lt;object&gt;<em></em>
    &lt;order manager="[Viewlet Manager Name]" skinname="[your skin name]"&gt;
<em>Specify all the viewlets you want to see in this viewlet 

in the order you want them with this directive:</em>
        &lt;viewlet name="[Viewlet Name]"&gt;
    &lt;/order&gt;
&lt;/object&gt;</pre>

<p class="discreet">Note that you can do this process through the web and then get the

Generic Setup tool to write out the configuration for you to transfer

into your own theme package.</p>

<h4>Moving a viewlet from one viewlet manager to another</h4>

<p>If you are basing your theme on the Plone Default theme, then you'll
find that reassigning a Plone Default viewlet is a two step process</p>

<ul><li>hide it in its current viewlet manager</li><li>add it and give it a position in a different viewlet manager</li></ul><pre>&lt;object&gt;
<em>Hide it from the current viewlet manager</em>
    &lt;hidden manager="[current Viewlet Manager Name]" skinname="[your skin name]"&gt;
        &lt;viewlet name="[Viewlet Name]" /&gt;
    &lt;/hidden&gt;
<em>Add it to a different viewlet manager</em>
    &lt;order manager="[a different Viewlet Manager]" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[Viewlet Name]"
                 insert-before="[Name of Viewlet Below]" /&gt;
    &lt;/order&gt;
<em>OR Add it to your own viewlet manager</em>
    &lt;order manager="[Your Viewlet Manager]" skinname="[your skin name]"&gt;
        &lt;viewlet name="[Viewlet Name]"/&gt;
    &lt;/order&gt;
&lt;/object&gt;

</pre>

<ul><li>you can also use 'insert-after="[Name of Viewlet Above]"' or
use an asterisk to place the viewlet at the top or bottom of the
manager (e.g 'insert-after'=*).</li><li>based-on="Plone Default" means
that it will take the Plone Default ordering and then apply the
insert-after and insert-before adjustments you've specified.<br></li></ul></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.1.3.
                Overriding or Creating a New Viewlet
            </h1>

            <p class="documentDescription">Overriding or Creating a New Viewlet</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-4">

            <h1>
                7.1.3.1.
                Overview and Cheat Sheet
            </h1>

            <p class="documentDescription">A quick cheat sheet on how to customize or create a new viewlet.</p>
    
            <div>
                
                    <div><p>You can customize a viewlet template through the web, but you can't alter the underlying Python class.</p>

<p>On the file system, rather than customize, the process is to wire up a new viewlet, or re-wire an existing viewlet.</p>

<p>You'll find a detailed tutorial on creating a viewlet in <a class="external-link" href="http://plone.org/documentation/kb/customizing-main-template-viewlets/adding-a-viewlet/">this article</a>.</p>

<h2 id="toc1">Quick Cheat Sheet<br></h2>

<h3 id="toc2">Through the Web</h3>

<ul class="listlevel1WW8Num1"><li>Use Site Setup &gt; Zope Management
Interfaces &gt; portal_view_customizations to customize the template of
an existing Plone Default viewlet. </li>

      <li>You cannot create a new viewlet through the web.</li></ul><h3 id="toc3">In your own product</h3>

<p id="toc3">You will need to know the name of:</p>

<dl><dt>1. The viewlet manager interface</dt>

      <dd>Look this up in the Elements section of this manual</dd>

      <dt>2. Your theme specific interface</dt>

      <dd>This
is optional, but ensures that your viewlet is only available for your
theme. If you used the plone3_theme paster template, then the name will
probably be IThemeSpecific.</dd></dl><p>You will need to create the
following (you should be able to locate the originals to copy by
looking at the Elements section or by using <a class="external-link" href="http://plone.org/documentation/products/gloworm">GloWorm</a>):</p>

<dl><dt>3. browser viewlet directive </dt>

      <dd>This will go in [your theme package]/browser/configure.zcml</dd>

      <dt>4. configuration file </dt>

      <dd>[your theme package]/profiles/default/viewlets.xml</dd></dl><dl><dt>5. page template </dt><dd>[your theme package]/browser/[your template name].pt&nbsp;<br></dd><dt>6. Python class </dt><dd>This is optional (but see the note below for Plone version 3.1.2 or lower)<br>put this in [your theme package]/browser/[your module].py</dd></dl><h3 id="toc5">Sample configuration.zcml directives</h3>

<p>Re-wiring a Plone Default viewlet to use your own template (note the layer attribute is really important here)</p>

<pre>&lt;browser:viewlet
 name="plone.[viewlet name]"
 manager="[viewlet manager interface]"
 class="plone.app.layout.viewlets.common.[viewlet class name]"
 template="templates/[your template name]"
 layer="[your theme specific interface]"
 permission="zope2.View"
 /&gt; 
</pre>

<p>Wiring up a new viewlet but borrowing a Plone Default viewlet class</p>

<pre>&lt;browser:viewlet
 name=[your namespace].[your viewlet name]"
 manager="[viewlet manager interface]"
 class="plone.app.layout.viewlets.common.[viewlet class name]"
 template="templates/[your template name]"
 layer="[your theme specific interface]"
 permission="zope2.View"
 /&gt;
</pre>

<p>Wiring up with a brand new viewlet with your own class or your own template</p>

<pre>&lt;browser:viewlet
 name=[your namespace].[your viewlet name]"
 manager="[viewlet manager interface]"
 class=".[your module].[your class name]"
 (or: template="templates/[your template name]")
 layer="[your theme specific interface]"
 permission="zope2.View"
 /&gt;
</pre>

<h2>Notes for Plone version 3.1.2 or lower:</h2>

<h3 id="toc4">Sample Python class</h3>

<p>In Plone version 3.1.2 or lower, you will need to use this to

override a Plone Default viewlet, even if you only want to change the

page template.</p>

<pre>from [element namespace] import [element class name]
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFileclass 

[your class name]([element class name]):
    render = ViewPageTemplateFile("[your template name]")</pre>

<h3 id="toc5"><br></h3></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                7.2.
                Portlet
            </h1>

            <p class="documentDescription">A cheat sheet of the bits that make up a portlet, plus information on moving, hiding or overriding a portlet.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.2.1.
                Anatomy of a Portlet
            </h1>

            <p class="documentDescription">The bits that go to make up a portlet renderer (which is the bit of a portlet you'll want to customize).</p>
    
            <div>
                
                    <div><p>Customizing
a portlet is similar to overriding a viewlet, but rather more
straightforward. There is a specific ZCML directive for customization.</p>

<h2 id="toc1">Directive in ZCML</h2>

<p>&lt;plone:portletRenderer /&gt;</p>

<h2 id="toc2">Attributes in ZCML</h2>

<dl><dt>layer</dt>

      <dd>a marker interface for your particular theme</dd>

      <dt>portlet</dt>

      <dd>the interface of the portlet you wish to customize</dd>

      <dt>template</dt>

      <dd>location of the template you wish to override</dd>

      <dt>class</dt>

      <dd>your custom class (use this if you don't specify a template) for rendering the portlet</dd></dl></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.2.2.
                Moving, Removing or Hiding a Portlet
            </h1>

            <p class="documentDescription">Some tips on moving or hiding portlets.</p>
    
            <div>
                
                    <div><p>Whether
or not portlets appear on your site is highly customizable through the
web, you can use the manage portlets link in most contexts. For more
information:</p>

<ul><li><a href="http://plone.org/documentation/tutorial/where-is-what/portlets-1/">http://plone.org/documentation/tutorial/where-is-what/portlets-1/</a></li></ul><p>It's assumed that you wouldn't want to <em>fix</em>
portlets on a page (otherwise they'd probably be viewlets). However, if
you wish to set up an initial assignment of portlets on installation of
your theme product, use</p>

<ul><li>[your theme package]/profiles/default/portlets.xml.</li></ul><p>
Here's an extract from the Plone Default portlets.xml, setting up the
login and navigation portlet for the left-hand column, and the review
and news portlets for the right-hand column.</p>

<pre>&lt;?xml version="1.0"?&gt;
&lt;portlets
&nbsp;&nbsp;&nbsp; xmlns:i18n="http://xml.zope.org/namespaces/i18n"
&nbsp;&nbsp;&nbsp; i18n:domain="plone"&gt;

&nbsp;
&nbsp;&lt;!-- Assign the standard portlets --&gt;
&nbsp;
&nbsp;&lt;assignment
&nbsp;&nbsp;&nbsp;&nbsp; manager="plone.leftcolumn"
&nbsp;&nbsp;&nbsp;&nbsp; category="context"
&nbsp;&nbsp;&nbsp;&nbsp; key="/"
&nbsp;&nbsp;&nbsp;&nbsp; type="portlets.Navigation"
&nbsp;&nbsp;&nbsp;&nbsp; name="navigation"
&nbsp;&nbsp;&nbsp;&nbsp; /&gt;
&nbsp;
&nbsp;&lt;assignment
&nbsp;&nbsp;&nbsp;&nbsp; manager="plone.leftcolumn"
&nbsp;&nbsp;&nbsp;&nbsp; category="context"
&nbsp;&nbsp;&nbsp;&nbsp; key="/"
&nbsp;&nbsp;&nbsp;&nbsp; type="portlets.Login"
&nbsp;&nbsp;&nbsp;&nbsp; name="login"
&nbsp;&nbsp;&nbsp;&nbsp; /&gt;
&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp; &lt;assignment
&nbsp;&nbsp;&nbsp;&nbsp; manager="plone.rightcolumn"
&nbsp;&nbsp;&nbsp;&nbsp; category="context"
&nbsp;&nbsp;&nbsp;&nbsp; key="/"
&nbsp;&nbsp;&nbsp;&nbsp; type="portlets.Review"
&nbsp;&nbsp;&nbsp;&nbsp; name="review"
&nbsp;&nbsp;&nbsp;&nbsp; /&gt;

&nbsp;&lt;assignment
&nbsp;&nbsp;&nbsp;&nbsp; manager="plone.rightcolumn"
&nbsp;&nbsp;&nbsp;&nbsp; category="context"
&nbsp;&nbsp;&nbsp;&nbsp; key="/"
&nbsp;&nbsp;&nbsp;&nbsp; type="portlets.News"
&nbsp;&nbsp;&nbsp;&nbsp; name="news"
&nbsp;&nbsp;&nbsp;&nbsp; /&gt;
&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;
&lt;/portlets&gt;</pre>

<p>&nbsp;The attributes for the assignment directive are described in full here: <a class="external-link" href="http://plone.org/products/plone/roadmap/203/">http://plone.org/products/plone/roadmap/203/</a>.&nbsp; In brief:</p>

<dl><dt>manager and type</dt><dd>The names for these can be looked up
in plone.app.portlets.portlets.configure.zcml (for type of portlet) or
in the Plone Default profiles/default/portlets.xml file.</dd><dt>category </dt><dd>This
can be one of four values "context", "content_type", "group" or "user"
- depending on where you wish to assign your portlets. </dd><dt>key </dt><dd>This
will depend on the value given in category above. In the case of
"context", the location in the site is indicated (the examples above
specify the site root).</dd></dl><p>If you wish to configure the
portlet in more detail, you can nest property directives within the
assignment directive. Here's a tweak to ensure the navigation portlet
appears at the root of the site:</p>

<pre>&lt;assignment name="navigation" category="context" key="/"
&nbsp;&nbsp;&nbsp; manager="plone.leftcolumn" type="portlets.Navigation"&gt;
&nbsp;&nbsp;&nbsp;&nbsp; &lt;property name="topLevel"&gt;0&lt;/property&gt;
&nbsp;&lt;/assignment&gt;</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.2.3.
                Overriding a Portlet
            </h1>

            <p class="documentDescription">A quick cheat sheet of how to override or customize a portlet.</p>
    
            <div>
                
                    <div><h3 id="toc1">Through the Web</h3>

<ul class="listlevel1WW8Num1"><li>Use Site Setup &gt; Zope Management
Interfaces &gt; portal_view_customizations to customize the template of
an existing Plone Default portlet. </li></ul><h3 id="toc2">In your own product</h3>

<p>There is a detailed tutorial available here:</p>

<ul class="listlevel1WW8Num1"><li><a href="http://plone.org/documentation/how-to/override-the-portlets-in-plone-3.0/">http://plone.org/documentation/how-to/override-the-portlets-in-plone-3.0/</a></li></ul><p>You can also look up the details of the portlet you want to override in the Elements section of this manual.</p>

<h3 id="toc3">Quick Cheat Sheet<br></h3>

<p>You will need to know the name of</p>

<dl><dt>Your theme-specific interface</dt>

<dd>This is optional but ensures that your portlet is only available
for your theme. If you used the plone3_theme paster template, then the
name will probably be IThemeSpecific.</dd></dl><p>You will need to
create the following (you should be able to locate the originals to
copy by looking them up in the Elements section):</p>

<dl><dt>plone portlet renderer directive</dt>

<dd>[your theme package]/browser/configure.zcml</dd>

<dt>page template</dt>

<dd>[your theme package]/browser/[your template name].pt</dd>

<dt>Python class *</dt>

<dd>[your theme package]/browser/[your module name].py</dd></dl><p class="discreet">* in most cases you won't need a Python class</p>

<h3>Sample configuration.zcml directive</h3>

<pre>&lt;configure 
    xmlns:plone="http://namespaces.plone.org/plone"&gt;
    &lt;include package="plone.app.portlets"  /&gt;
    &lt;plone:portletRenderer
       portlet="[element interface]"
       template="[your template name].pt"
      (or class=".[your module].[your class name]")
      layer="[your theme specific interface]"
     /&gt;
&lt;/configure&gt;
</pre>

<h3>Sample Python class for navigation portlet override</h3>

<p>If you want to customize the navigation portlet, you may need to
supply
the class as well as the template. Two templates are involved: the
first is the usual display template; the second handles the recursion
through the navigation tree. If you need to make your own version of
the second, then you'll need to assign it to the recurse method in the
class.</p>

<pre>from plone.app.portlets.portlets.navigation import Renderer
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile

class [your class name](Renderer):
    _template = ViewPageTemplateFile([your template name].pt)  
    recurse = ViewPageTemplateFile([your recurse template name])</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.2.4.
                Override the portlets in Plone 3.0 
            </h1>

            <p class="documentDescription">Customizing
the portlets is a regular task, working with Plone theme. In this
how-to we will find out how-to do this in Plone 3.0 with it's new
mechanism for managing portlets (contributed by Denys Mishunov)</p>
    
            <div>
                
                    <div id="parent-fieldname-text" class="kssattr-atfieldname-text kssattr-templateId-widgets/rich kssattr-macro-rich-field-view">

<div class="section">

<h3><a id="purpose" name="purpose">Purpose</a></h3>

<p>It was pretty easy to customize one of the standard portlet in times of Plone

versions prior 3.0. You just had to copy a page template for appropriate

portlet to your theme product and do whatever you want, changing it's XHTML.

You could also create a new portlet the same easy way - just create a template

for the new portlet and register this portlet with your site's Properties.</p>

<p>In Plone 3.0 portlets became slightly more complex. But don't be afraid. They

became much more powerful at the same time! The advantage becomes obvious now,

right? ;) They are served from separate python package and have really

flexible management possibilities. So, it's worth to try this new mechanism to

realize how powerful it is.</p>

</div>

<div class="section">

<h3><a id="prerequisities" name="prerequisities">Prerequisities</a></h3>

<p>First thing we should mention - this is not about TTW (Through The Web)

customization. If you need a fast and dirty trick, have a look at

portal_view_customizations tool. This how-to assumes you want to have your

changes in a repeatable way, so that you could have the same changes on any

site where you install your product.</p>

<p>Another thing you might consider is worth a mentioning - you don't need this

technique in <strong>any</strong> case you want to customize a portlet in Plone 3.0. If you

have hardly customized portlets used in previous versions of Plone or you want

to continue using portlets in "pre-3.0-era-way" (that we strongly don't

recommend) you might need to have a look at <span class="pre">ClassicPortlet</span> that is shipped

with Plone 3.0. It deals with the regular page templates the same way you have

worked with portlets before Plone 3.0.</p>

<p>And the last before we move on. If you want to customize any of the standard

portlets removing all back-end logic from it (making a static portlet), don't

do this. We mean that - <strong>don't</strong> do this. Wise people thought about you.

Better install <span class="pre">plone.portlet.static</span> and play with it, creating the static

portlets when you need it.</p>

<p>So, for all those who are still with us... we move on finally.</p>

<p>We assume you have created <strong>MyTheme</strong> Plone 3 theme with either DIYPloneStyle

or ZopeSkel generators. We do not cover explanations of all aspects of

creating a theme for Plone 3.0. To find out more about core ideas of making a

theme, managing the viewlets in Plone 3.0 and many more, check an excellent

tutorial by David Convent - <a class="reference" href="http://plone.org/how-to/override-the-portlets-in-plone-3.0/.org/documentation/tutorial/customizing-main-template-viewlets">Customizing the viewlets in main_template</a>.</p>

<p>The key concept in working with portlets in Plone 3.0 is the use of Zope 3

skin layer - the same as we have when overriding a viewlet. We assume you have

at least the following minimum set of files in <strong>MyTheme/browser</strong> folder:</p>

<pre class="literal-block">- browser/<br>    - __init__.py<br>    - configure.zcml<br>    - interfaces.py<br></pre>

<p>In common, portlets' overriding process looks like this:</p>

<ul class="simple"><li>choose the portlet you want to override;</li><li>register a skin layer if you don't have one yet in <strong>interfaces.py</strong>;</li><li>add the special <span class="pre">&lt;plone:portletRenderer</span><span class="pre">/&gt;</span> directive to

<strong>MyTheme/browser/configure.zcml</strong>;</li><li>define <strong>portlet</strong> attribute for &lt;plone:portletRenderer /&gt; directive.

This is a portlet data provider type for which this override is used. This

can be either class or interface. For example

<span class="pre">plone.app.portlets.portlets.navigation.INewsPortlet</span>;</li><li>define a new <strong>template</strong> attribute for &lt;plone:portletRenderer /&gt;

directive. When you add this the default renderer for portlet you are

overriding will be used, but with your template;</li><li>in case you need to customize the default behavior for the portlet, you

should use <strong>class</strong> attribute instead of simple template. This new

class will be acting as the renderer for the portlet instead of the default

one;</li><li>define <strong>layer</strong> attribute for &lt;plone:portletRenderer /&gt; directive

with <strong>MyTheme</strong> browser layer. The <strong>layer</strong> attribute of the

portletRenderer attribute associates a particular IPortletRenderer with

a particular browser layer (<strong>MyTheme</strong> layer in our case). When our layer

is in effect (i.e. MyTheme is installed) the new renderer will be used

instead of the default one;</li><li>add a new template to <strong>MyTheme/browser</strong> that will implement the renderer;</li><li>restart Zope and enjoy.</li></ul></div>

<div class="section">

<h3><a id="step-by-step" name="step-by-step">Step by step</a></h3>

<div class="section">

<h4><a id="choose-the-portlet" name="choose-the-portlet">1. Choose the portlet</a></h4>

<p>First of all we should decide what portlet we would like to customize. Let's

choose the News portlet. If you will have a look at the standard news portlet,

you will see those news_icon images in-front of the titles. Let's get rid of

them in the XHTML just for the test.</p>

<p>Plone default portlets are declared in the <strong>plone.app.portlets.portlets</strong>

package. The core Plone 3.0 portlets can be found in

<strong>$INSTANCE_HOME/lib/python/plone/app/portlets/portlets/</strong>. It might be

located somewhere else in the $PYTHONPATH though. Depending on the zope

installation (win32 or unix like operating system, installation from source,

installer, eggs or elseâ¦), you may need to use the search tools available in

your operating system to locate the package.</p>

<p><strong>plone.app.portlets.portlets</strong> package contains python modules, page

templates and ZCML configuration file - <strong>configure.zcml</strong>. This file

contains a set of &lt;plone:portlet /&gt; directives that define the standard

portlets like this:</p>

<pre class="literal-block">&lt;plone:portlet<br>    name="portlets.News"<br>    interface=".news.INewsPortlet"<br>    assignment=".news.Assignment"<br>    renderer=".news.Renderer"<br>    addview=".news.AddForm"<br>    editview=".news.EditForm"<br>    /&gt;<br></pre>

<p>Attributes in the above code are pretty self-explanatory. But if they are not

clear to you or you want to know more about additional attributes for

&lt;plone:portlet /&gt;, have a look at <strong>IPortletDirective</strong> interface in

<strong>metadirectives</strong> module inside the <span class="pre">plone.app.portlets</span> package.</p>

</div>

<div class="section">

<h4><a id="register-a-skin-layer-if-you-don-t-have-one-yet" name="register-a-skin-layer-if-you-don-t-have-one-yet">2. Register a skin layer if you don't have one yet</a></h4>

<p>We can register an override for a portlet only for one theme (one skin

selection) thanks to the <strong>plone.theme</strong> package. Thanks to <strong>plone.theme</strong>,

we can set a Zope 3 skin layer that corresponds to a particular skin selection

in <span class="pre">portal_skins</span> (a theme).</p>

<p>Add the following code to <strong>MyTheme/browser/interfaces.py</strong> if you don't have

it yet:</p>

<pre class="literal-block">from plone.theme.interfaces import IDefaultPloneLayer<br><br>class IThemeSpecific(IDefaultPloneLayer):<br>    """Marker interface that defines a Zope 3 skin layer bound to a Skin<br>       Selection in portal_skins.<br>    """<br></pre>

</div>

<div class="section">

<h4><a id="add-the-directive-to-configure-zcml-with-appropriate-attributes" name="add-the-directive-to-configure-zcml-with-appropriate-attributes">3. Add the directive to configure.zcml with appropriate attributes</a></h4>

<p>Along with &lt;plone:portlet /&gt; directive, <span class="pre">plone.app.portlets</span> package defines

another one - &lt;plone:portletRenderer /&gt;. The last one is used to override the

portlets, defined in your site. It has quite a few possible attributes that

can be found in <strong>metadirectives</strong> module inside the <span class="pre">plone.app.portlets</span>

package. We will not list them all here, so just spend 5 minutes and have a

look at those attributes, so that you could understand the following code...</p>

<p>... 5 minutes later...</p>

<p>Ok, let's get back to work. So, to override the standard News portlet for

MyTheme product we should add &lt;plone:portletRenderer /&gt; directive to

<strong>MyTheme/browser/configure.zcml</strong>. Let's have a look how this should look

like (be sure you have <span class="pre">xmlns:plone="http://namespaces.plone.org/plone"</span>

namespace defined in your <strong>&lt;configure&gt;</strong> top node.):</p>

<pre class="literal-block">&lt;include package="plone.app.portlets" /&gt;<br><br>&lt;interface<br>   interface=".interfaces.IThemeSpecific"<br>   type="zope.publisher.interfaces.browser.IBrowserSkinType"<br>   name="My Theme"<br>   /&gt;<br><br>&lt;plone:portletRenderer<br>   portlet="plone.app.portlets.portlets.news.INewsPortlet"<br>   template="mytheme_news.pt"<br>   layer=".interfaces.IThemeSpecific"<br>   /&gt;<br></pre>

<p>First of all we include <span class="pre">plone.app.portlets</span> package to be sure that default

portlets are enabled before we override anything.</p>

<p>Then we make browser layer interface for <strong>MyTheme</strong>, defined in

<strong>MyTheme/browser/interfaces.py</strong>, available. If you have customized any

viewlet you should already have this in <strong>configure.zcml</strong> so no need to add

it twice in the same theme.</p>

<p>Next, let's sort out what attributes we use here:</p>

<ul class="simple"><li><strong>portlet</strong> - define the portlet that we are going to override. In our case

we define the full dotted path to <span class="pre">INewsPortlet</span> interface, that is

implemented by news portlet;</li><li><strong>template</strong> - the name of a template that implements the renderer. The

default renderer for this news portlet will be used, but with

<span class="pre">"mytheme_news.pt</span> template instead of the default one.</li><li><strong>layer</strong> - our browser layer for which this renderer is used.</li><li>one more attribute you might need to remember here is <strong>class</strong>. You will

need to use it in case you want to change the default behavior of the

portlet. This attribute will define the class that will be used as a

renderer for this portlet instead of the default one.</li></ul><p>That's it with <strong>configure.zcml</strong>. Let's move on.</p>

</div>

<div class="section">

<h4><a id="add-a-new-template-for-portlet-s-renderer" name="add-a-new-template-for-portlet-s-renderer">4. Add a new template for portlet's renderer</a></h4>

<p>So, in previous part we have defined <span class="pre">mytheme_news.pt</span> as a value for

<strong>template</strong> attribute. But we don't have that template on file-system. Let's

add it to <strong>MyTheme/browser/</strong>. Just copy <strong>news.pt</strong> template for news

portlet from <strong>plone.app.portlets.portlets</strong> to <strong>MyTheme/browser/</strong> and

rename it to <span class="pre">mytheme_news.pt</span>. Open this template in your favorite editor

and let's play with it a little bit.</p>

<p>As you remember we should get rid of standard news_icon.gif icons we get for

news items by default. Find the following line in your template:</p>

<pre class="literal-block">&lt;img tal:replace="structure item_icon/html_tag" /&gt;<br></pre>

<p>and comment it out so that we do not un-recoverable steps and could revert our

changes later. So, we get:</p>

<pre class="literal-block">&lt;!-- &lt;img tal:replace="structure item_icon/html_tag" /&gt; --&gt;<br></pre>

</div>

<div class="section">

<h4><a id="that-s-all-folks" name="that-s-all-folks">That's all folks!</a></h4>

<p>So, that's it. Restart your Zope and have a look at your news items portlet -

no images! Cool! Yeah! Actually not that cool just to remove the images, that

might be useful for community portals :)</p>

</div>

<div class="section">

<h4><a id="what-s-next" name="what-s-next">What's next?</a></h4>

<p>This example is really simple and not pretty useful for sure. But you

definitely can do much better customizations now. When using <strong>class</strong>

attribute in <span class="pre">&lt;plone:portletRenderer</span><span class="pre">/&gt;</span> directive you can do portlets that

will really differ from default one. And that's where the beauty of portlets

in Plone 3.0 goes - you will not need to put a load of python to your page

templates as you had to do before. All python will be exactly where it should

be - in python class. And template will just get the results from different

python methods within that class.</p>

<p>Enjoy!</p>

</div>

</div>

</div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                7.3.
                Viewlet Manager
            </h1>

            <p class="documentDescription">How to move or hide viewlet managers and how to create a new one.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.3.1.
                Anatomy of a Viewlet Manager
            </h1>

            <p class="documentDescription">The bits that go to make up a Viewlet Manager.</p>
    
            <div>
                
                    <div><h2 id="toc1">Directive in ZCML</h2>

<p>&lt;browser:viewletManager /&gt;</p>

<h2 id="toc2">Attributes in ZCML</h2>

<dl><dt>name</dt>

      <dd>e.g., [your namespace].[your viewlet manager name]</dd>

      <dt>provides</dt>

      <dd>a marker interface defining what this manager does</dd>

      <dt>layer</dt>

      <dd>a marker interface for your particular theme</dd>

      <dt>class</dt>

      <dd>this will be plone.app.viewletmanager.manager.OrderedViewletManager</dd>

      <dt>permission</dt>

      <dd>in most cases this will be Zope.Public</dd>

      <dt>for</dt>

      <dd>specify
an interface marking a group of content types, if you wish. The viewlet
manager will then be restricted to those content types</dd>

      <dt>view</dt>

      <dd>specify an interface marking a view, if you wish. The viewlet manager will be restricted to items with those views.</dd></dl></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.3.2.
                Moving, Removing or Hiding a Viewlet Manager
            </h1>

            <p class="documentDescription">Some hints on moving or hiding viewlet managers.</p>
    
            <div>
                
                    <div><p>Viewlet
managers are called by page templates. Moving or removing them is
simply a case of customizing the template. Most are called by the
main_template, but you may also need to look into specific content
views for some of them.</p>

<h2 id="toc1">Quick Cheat Sheet<br></h2>

<h3 id="toc2">Through the Web</h3>

<ul class="listlevel1WW8Num1"><li>Site Setup &gt; Zope Management Interface &gt; portal_skins &gt; plone_templates or plone_content</li>

      <li>Click the Customize button, and look for <br><pre>&lt;div tal:replace="structure provider:[viewlet manager name]" /&gt;</pre>

</li><li>

<p> (use the Elements key to identify exactly which manager you're interested in)</p>

</li></ul><h3 id="toc3">In your own product</h3>

<ul class="listlevel1WW8Num1"><li>Put your own version of main_template or of the content views in <br><br>[your theme package]/skins.</li></ul></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.3.3.
                Creating a New Viewlet Manager
            </h1>

            <p class="documentDescription">A quick cheat sheet for creating a new viewlet manager.</p>
    
            <div>
                
                    <div><h3 id="toc1">Through the Web</h3>

<p>You cannot create a new viewlet manager through the web. To override
the order in which viewlets appear in a viewlet manager, use the
instructions for viewlets.</p>

<h3 id="toc3">In your own product</h3>

<p> If you're basing your new viewlet manager on a Plone Default
viewlet manager, look up the details in the Elements section of this
manual.</p>

<p>You will need to know the name of</p>

<dl><dt>Your theme specific interface</dt>

      <dd>This is optional,
but ensures that your viewlet is only available for your theme. If you
used the plone3_theme paster template, then the name will probably be
IThemeSpecific.</dd></dl><p>You will need to create the following (you
should be able to locate the originals to copy by looking them up in
the elements section):</p>

<dl><dt>browser viewletManager directive</dt>

      <dd>[your theme package]/browser/configure.zcml </dd>

      <dt>Your viewlet manager interface</dt>

      <dd>[your theme package]/browser/interfaces.py </dd>

      <dt>configuration file directives</dt>

      <dd>[your theme package]/profiles/default/viewlets.xml</dd></dl><h3 id="toc4">Sample Interface</h3>

<pre>from zope.viewlet.interfaces import IViewletManager

class [your viewlet manager interface](IViewletManager):
    """ [A description of your viewlet manager goes here]  """</pre>

<h3 id="toc5">Sample configure.zcml directive</h3>

<pre>&lt;browser:viewletManager
 name=[your namespace].[your element name]"
 provides=".interfaces.[your viewlet manager interface]"
 class="plone.app.viewletmanager.manager.OrderedViewletManager"
 layer="[your theme interface]"
 permission="zope2.View"
 /&gt;</pre></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                7.4.
                Portlet Manager
            </h1>

            <p class="documentDescription">Tips on moving and hiding portlet managers. Cheat Sheet for creating a new portlet manager.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.4.1.
                Moving or Removing a Portlet Manager
            </h1>

            <p class="documentDescription">Tips on how to move or remove portlet managers.</p>
    
            <div>
                
                    <div><p>Portlet managers are called by main_template. Moving or removing them is simply a case of customizing the template.</p>

<h3 id="toc1">Through the Web</h3>

<ul class="listlevel1WW8Num1"><li>Site Setup &gt; Zope Management Interface &gt; portal_skins &gt; plone_templates &gt; main_template</li>

      <li>Customize this, and look for <br><pre>&lt;div tal:replace="structure provider:[portlet manager name]" /&gt;</pre>

</li><li>

<p> (use the Elements key to identify exactly which manager you're interested in)</p>

</li></ul><h3 id="toc2">In your own product</h3>

<ul class="listlevel1WW8Num1"><li>Put your own version of main_template in <br><br>[your theme product]/skins.</li></ul></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.4.2.
                Hiding a Portlet Manager
            </h1>

            <p class="documentDescription">There are several methods for hiding a portlet manager.</p>
    
            <div>
                
                    <div><p>A portlet manager won't display if there are no portlets assigned to it to display or if the assigned portlets have no data.</p>

<p>In the case of the portlet columns, if the portlet manager is empty,
then it is also useful to have the surrounding block elements disappear
too, so that you don't get a wide blank margin on your page. For this
reason, the columns containing the portlet managers in the
main_template are wrapped around with slots. Hiding the portlet
managers is, therefore, a matter or manipulating these slots. There are
various techniques:</p>

<dl><dt>Defining an empty slot</dt>

      <dd>Use the following in a content view template to ensure that the right hand column is removed:

<ul class="listlevel1WW8Num1"><li><code>&lt;metal:column_one fill-slot="column_one_slot" /&gt;</code></li></ul></dd>

      <dt>Using the sl and sr global variables</dt>

      <dd>These
are set as conditions on the slots; they check the respective portlet
managers for content and, if they are empty, evaluate to false. You can
override these in the template itself.</dd>

      <dt>Using show_portlets option</dt>

      <dd>show_portlets=false
can be passed as an option to a template to set both sl and sr to
false. To see this in action, have a look at
<ul><li>CMFPlone/skins/plone_templates/standard_error_message.py and</li>

      <li>CMFPlone/browser/ploneview.py</li></ul><br></dd></dl></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.4.3.
                Creating a New Portlet Manager
            </h1>

            <p class="documentDescription">How to create a new portlet manager.</p>
    
            <div>
                
                    <div><p>A practical example of creating a new portlet manager can be found here</p>

<ul class="listlevel1WW8Num1"><li>

          <a href="http://plone.org/documentation/how-to/adding-portlet-managers">

            http://plone.org/documentation/how-to/adding-portlet-managers

          </a>

        </li></ul><p>Here's a quick checklist of what you need to do.</p>

<h2>Quick Cheat Sheet</h2>

<h3 id="toc1">Through the Web</h3>

<p>You cannot create a new portlet manager through the web.</p>

<h3 id="toc2">In your own product</h3>

<p>You will need to provide the name of</p>

<dl><dt>Your theme-specific interface</dt>

<dd>This is optional but ensures that your portlet manager is available
for your theme only. If you used the plone3_theme paster template, then
the name will probably be IThemeSpecific.</dd></dl><p>You will need to
create the following (you should be able to locate the originals to
copy by looking them up in the elements section):</p>

<dl><dt>Interface</dt>

<dd>This will go in [your theme package]/browser/interfaces.py. You can
give it any name you like, but by convention, it should be prefaced
with "I".</dd>

<dt>configuration directive</dt>

<dd>[your theme package]/profiles/default/portlets.xml</dd>

<dt>browser:page directive (for the management view)</dt>

<dd>[your theme package]/browser/configure.zcml</dd>

<dt>page template (for the management view)</dt>

<dd>[your theme package]/browser/[your template].pt</dd></dl><h3>Sample interface</h3>

<pre>from plone.portlets.interfaces import IPortletManager

class [your portlet manager interface](IPortletManager):
 """A description goes here    """</pre>

<h3>Sample portlets.xml</h3>

<pre>&lt;?xml version="1.0"?&gt;
&lt;portlets&gt;
 &lt;portletmanager
    name="[your namespace].[your portlet manager]"
    type="[your namespace].[your theme name].browser.interfaces.[your portlet manager interface]"
 /&gt;
&lt;/portlets&gt;</pre>

<h3>Sample configure.zcml directive (for the management view)</h3>

<pre>&lt;browser:page
 for="plone.portlets.interfaces.ILocalPortletAssignable"
 class="plone.app.portlets.browser.manage.ManageContextualPortlets"
 name="[your view name]"
 template="[your template name].pt"
 permission="plone.app.portlets.ManagePortlets"
/&gt;</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.4.4.
                Practical
            </h1>

            <p class="documentDescription">Practical</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-4">

            <h1>
                7.4.4.1.
                Adding Portlet Managers
            </h1>

            <p class="documentDescription">You
need portlets at an additional place in your Plone. In this example we
put contextual portlets above the content (contributed by Jens Klein)</p>
    
            <div>
                
                    <div><blockquote>

<p>This is about adding Portlet MANAGERS, hint: <strong>PortletManager != Portlet. </strong>A

PortletManager is a kind of container for the portlets, like the

ViewletManager is for Viewlets. So, after reducing the momentum of

misunderstanding, lets start:</p>

</blockquote>

<h2>Prerequsites</h2>

<p>I assume you're familar with GenericSetup based setups for Plone 3. Take a look at <em>DIYPloneStyle</em> and related tutorials if not.</p>

<p>You need Plone 3 installed and a Product NEWTHEME for your own skin (based on DIYPloneStyle works fine).</p>

<h2>Strategy</h2>

<p>In my example I don't want to customize the main-template. So the idea is to add a viewlet to the <em>plone.app.layout.viewlets.interfaces.IContentViews</em> viewletmanager. So the steps need to be done is</p>

<ol><li>Add a viewlet to the viewlet-manager</li><li>Add a portlet-manager <br></li><li>Add a management view for the portlet-manager.</li></ol><h2>Step One: Add a viewlet</h2>

in Products.NEWTHEME add a file <em>abovecontentportlets.pt</em> containing:

<pre>&lt;tal:block replace="structure provider:my.abovecontentportlets" /&gt;</pre>

<p>Here we call the portlet manager, we create it in step two.<br>But first lets register our new viewlet for the viewletmanager. <br>Edit your Products/NEWTHEME/configure.zcml and add:</p>

<pre>&lt;browser:viewlet
&nbsp;&nbsp;&nbsp; name="my.abovecontentportlets"
&nbsp;&nbsp;&nbsp; manager="plone.app.layout.viewlets.interfaces.IContentViews"
&nbsp;&nbsp;&nbsp; template="abovecontentportlets.pt"
&nbsp;&nbsp;&nbsp; permission="zope2.View" 
/&gt; 
</pre>

<h2>Step Two: Add a portlet manager<br></h2>

<p>Create a marking interface for the manager and add or edit <em>Products/NEWTHEME/interfaces.py</em></p>

<pre>from plone.portlets.interfaces import IPortletManager

class IMyAboveContent(IPortletManager):
&nbsp;&nbsp;&nbsp; """we need our own portlet manager above the content area.
&nbsp;&nbsp;&nbsp; """
</pre>

<p>Add (or edit) your <em>Products/NEWTHEME/profiles/default/portlets.xml</em> and register a portlet manager:</p>

<pre>&lt;?xml version="1.0"?&gt;
&lt;portlets&gt;&nbsp;
&nbsp;&lt;portletmanager 
&nbsp;&nbsp; name="my.abovecontentportlets"
&nbsp;&nbsp; type="Products.NEWTHEME.interfaces.IMyAboveContent"
&nbsp;/&gt;
&lt;/portlets&gt;
</pre>

<p>Thats all you need if you don't want to manage the portlets through the web. Oh, you want to? So you need a third step:</p>

<h2>Step Three: Add a management view for the portlet manager</h2>

<p>The management view is rendered for the left and right slots

directly on the main-template. But we use a viewlet and in here we have

a different view. so we need to call explicitly our view and call the

our manager within its context.</p>

<p>&nbsp;</p>

We need to register a new browser view for an own page template directly calling our manager. Again add some lines to your <em>configure.zcml</em>:

<pre>&lt;browser:page
&nbsp;&nbsp;&nbsp; for="plone.portlets.interfaces.ILocalPortletAssignable"
&nbsp;&nbsp;&nbsp; class="plone.app.portlets.browser.manage.ManageContextualPortlets"
&nbsp;&nbsp;&nbsp; name="manage-myabove"
&nbsp;&nbsp;&nbsp; template="templates/managemyabove.pt"
&nbsp;&nbsp;&nbsp; permission="plone.app.portlets.ManagePortlets"
/&gt;</pre>

And finally we need the template, so add an file <em>managemyabove.pt</em> and edit it:

<p>&nbsp;</p>

<pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone"&gt;
&lt;head&gt;
    &lt;div metal:fill-slot="javascript_head_slot" tal:omit-tag=""&gt;
        &lt;link type="text/css" rel="kinetic-stylesheet"
            tal:attributes="href string:${context/absolute_url}/++resource++manage-portlets.kss"/&gt;
    &lt;/div&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div metal:fill-slot="main"&gt;
  &lt;h1 class="documentFirstHeading"&gt;Manage My Portlets&lt;/h1&gt;
  &lt;span tal:replace="structure provider:my.abovecontentportlets" /&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

That's it. After restarting your zope you can call <em>http://DOMAIN.TLD/plone/path/to/some/context/@@manage-myabove</em>

<p> and assign portlets over your content.</p>

<p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                7.5.
                Page Elements Index - Plone Default and Classic Theme
            </h1>

            <p class="documentDescription"> A visual index of the main page elements. </p>
    
            <div>
                
                    <div><p>At the moment, this index gives you only viewlets, but the intention

is to expand it to include portlets and viewlet- and portlet- managers.</p>

<p>An alternative to using this index is to install <a class="external-link" href="http://plone.org/products/gloworm">GloWorm</a>

in your Plone instance. This is a visual inspector which will give you

further information about aspects of the Plone Default theme directly

through your browser, and enable you to make through-the-web

customizations of viewlet templates.</p>

















































































































































































































































<table class="vertical listing"><thead><tr><td>Key</td><td>Title</td><td>HTML</td><td>Name<br>Manager<br>Type</td></tr></thead><tbody><tr><td><br></td><td>Skip Links</td><td>&lt;p class="hiddenStructure"&gt; â¦ &lt;/p&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.skip_links">plone.skip_links</a><br>

plone.portalheader<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>HTML Head Title</td><td>&lt;title&gt; ...&lt;/title&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.htmlhead.title">plone.htmlhead.title</a><br>

plone.htmlhead<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Next Previous Links</td><td>&lt;link title="Go to previous item" â¦ /&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.nextprevious.links">plone.nextprevious.links</a><br>

plone.htmlhead.links<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Favicon Link</td><td>&lt;link rel="shortcut icon" â¦ /&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.links.favicon">plone.links.favicon</a><br>

plone.htmlhead.links<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Search Link</td><td>&lt;link rel="search" â¦ /&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.links.search">plone.links.search</a><br>

plone.htmlhead.links<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Author Link</td><td>&lt;link rel="author" â¦  /&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.links.author">plone.links.author</a><br>

plone.htmlhead.links<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Navigation Link</td><td>&lt;link title="Front Page" â¦&gt; and &lt;link title="Site Map" ..&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.links.navigation">plone.links.navigation</a><br>

plone.htmlhead.links<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Analytics</td><td>(code snippet defined by the site manager)</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.analytics">plone.analytics</a><br>

plone.portalfooter<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Header</td><td>&lt;div id="portal-header"&gt; â¦

&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/structuralelements/plone.header">plone.header</a><br>

plone.portaltop<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Language Selector</td><td>&lt;ul id="portal-languageselector"&gt; â¦ &lt;/ul&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.app.i18n.locales.languageselector">plone.app.i18n.locales.languageselector</a><br>

Portal Top<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_009.png" alt="plone.site_actions"><br></td><td>Site Actions</td><td>&lt;ul id="portal-siteactions"&gt;...&lt;/ul&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.site_actions">plone.site_actions</a><br>

plone.portalheader<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_011.png" alt="plone.searchbox"><br></td><td>Search Box</td><td>&lt;div id="portal-searchbox"&gt;â¦&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.searchbox">plone.searchbox</a><br>

plone.portalheader<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb.png" alt="plone.logo"><br></td><td>Logo</td><td>&lt;a id="portal-logo" ...&gt;... &lt;/a&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.logo">plone.logo</a><br>

plone.portalheader<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_005.png" alt="plone.global_sections"><br></td><td>Global Sections</td><td>&lt;h5 class="hiddenStructure"&gt;Sections&lt;/h5&gt; &lt;ul id="portal-globalnav"&gt; â¦ &lt;/ul&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.global_sections">plone.global_sections</a><br>

plone.portalheader<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_006.png" alt="plone.personal_bar"><br></td><td>Personal Bar</td><td>&lt;div id="portal-personaltools-wrapper"&gt; â¦&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.personal_bar">plone.personal_bar</a><br>

plone.portaltop<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Path Bar (Portal Breadcrumbs)</td><td>&lt;div id="portal-breadcrumbs"&gt;...&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.path_bar">plone.path_bar</a><br>

plone.portaltop<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Content Views</td><td>&lt;ul class="contentViews"&gt; â¦ &lt;/ul&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.contentviews">plone.contentviews</a><br>

plone.contentviews<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Content Actions</td><td><br></td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.contentactions">plone.contentactions</a><br>

plone.contentviews<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_016.png" alt="plone.tableofcontents"><br></td><td>Table of Contents</td><td>&lt;dl id="document-toc" class="portlet toc"

    style="display: none"&gt; â¦ &lt;/dl&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.tableofcontents">plone.tableofcontents</a><br>

plone.abovecontentbody<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_004.png" alt="plone.presentation"><br></td><td>Presentation</td><td>&lt;p id="link-presentation"&gt;...&lt;/p&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.presentation">plone.presentation</a><br>

plone.abovecontentbody<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Keywords</td><td>&lt;div id="category" class="documentByLine"&gt;â¦&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.belowcontenttitle.keywords">plone.belowcontenttitle.keywords</a><br>

plone.belowcontenttitle<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_preview_009.png" alt="plone.byline"><br></td><td>Byline</td><td>&lt;div id="plone-document-byline" class="documentByLine"&gt;... 



&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.belowcontenttitle.documentbyline">plone.belowcontenttitle.documentbyline</a><br>

plone.belowcontenttitle<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Lock</td><td>&lt;div id="plone-lock-status" /&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.lockinfo">plone.lockinfo</a><br>

plone.abovecontent<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_018.png" alt="plone.document_actions"><br></td><td>Document Actions</td><td>&lt;div class="documentActions"&gt; â¦ &lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.abovecontenttitle.documentactions">plone.abovecontenttitle.documentactions</a><br>

plone.belowcontentbody<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_017.png" alt="plone.comments"><br></td><td>Comments</td><td>&lt;div class="discussion"&gt; â¦ &lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.comments">plone.comments</a><br>

plone.belowcontent<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Content History</td><td>&lt;div class="contentHistory" id="content-history"&gt;â¦&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.belowcontentbody.contenthistory">plone.belowcontentbody.contenthistory</a><br>

plone.belowcontentbody<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_012.png" alt="plone.nextprevious"><br></td><td>Next Previous</td><td>&lt;div class="listingBar"&gt;â¦&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.nextprevious">plone.nextprevious</a><br>

plone.belowcontent<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Footer</td><td>&lt;div id="portal-footer"&gt;â¦&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.footer">plone.footer</a><br>

plone.portalfooter<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_preview_010.png" alt="plone.colophon"><br></td><td>Colophon</td><td> &lt;div id="portal-colophon"&gt;â¦&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.colophon">plone.colophon</a><br>

plone.portalfooter<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr></tbody></table></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                7.6.
                Page Elements Index - Sunburst Theme - Plone 4
            </h1>

            <p class="documentDescription"> A visual index of the main page elements. </p>
    
            <div>
                
                    <div><p>At the moment, this index gives you only viewlets, but the intention

is to expand it to include portlets and viewlet- and portlet- managers.</p>

<p>An alternative to using this index is to install <a>GloWorm</a>

in your Plone instance. This is a visual inspector which will give you

further information about aspects of the Plone Default theme directly

through your browser, and enable you to make through-the-web

customizations of viewlet templates.</p>

















































































































































































































































































<table class="vertical listing"><thead><tr><td>Key</td><td>Title</td><td>HTML</td><td>Name<br>Manager<br>Type</td></tr></thead><tbody><tr><td><br></td><td>Skip Links</td><td>&lt;p class="hiddenStructure"&gt; â¦ &lt;/p&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.skip_links">plone.skip_links</a><br>

plone.portalheader<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>HTML Head Title</td><td>&lt;title&gt; ...&lt;/title&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.htmlhead.title">plone.htmlhead.title</a><br>

plone.htmlhead<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Dublin Core Metadata</td><td>&lt;meta ... /&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.htmlhead.dublincore">plone.htmlhead.dublincore</a><br>

plone.htmlhead<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>KSS Base Url</td><td>&lt;link rel="kss-base-url" ... /&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.htmlhead.kss-base-url">plone.htmlhead.kss-base-url</a><br>

plone.htmlhead<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Next Previous Links</td><td>&lt;link title="Go to previous item" â¦ /&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.nextprevious.links">plone.nextprevious.links</a><br>

plone.htmlhead.links<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Favicon Link</td><td>&lt;link rel="shortcut icon" â¦ /&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.links.favicon">plone.links.favicon</a><br>

plone.htmlhead.links<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Search Link</td><td>&lt;link rel="search" â¦ /&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.links.search">plone.links.search</a><br>

plone.htmlhead.links<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Author Link</td><td>&lt;link rel="author" â¦  /&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.links.author">plone.links.author</a><br>

plone.htmlhead.links<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Navigation Link</td><td>&lt;link title="Front Page" â¦&gt; and &lt;link title="Site Map" ..&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.links.navigation">plone.links.navigation</a><br>

plone.htmlhead.links<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>RSS Link</td><td>&lt;link rel="alternate" title="RSS 1.0" .. /&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.links.RSS">plone.links.RSS</a><br>

plone.htmlhead.links<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Analytics</td><td>(code snippet defined by the site manager)</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/hiddenelements/plone.analytics">plone.analytics</a><br>

plone.portalfooter<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Header</td><td>&lt;div id="portal-header"&gt; â¦

&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/structuralelements/plone.header">plone.header</a><br>

plone.portaltop<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Language Selector</td><td>&lt;ul id="portal-languageselector"&gt; â¦ &lt;/ul&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.app.i18n.locales.languageselector">plone.app.i18n.locales.languageselector</a><br>

Portal Top<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_preview_007.png" alt="plone.siteactions-sunburst"><br></td><td>Site Actions</td><td>&lt;ul id="portal-siteactions"&gt;...&lt;/ul&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.site_actions">plonetheme.sunburst.site_actions</a><br>

plone.portalfooter<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_020.png" alt="plone.searchbox-sunburst"><br></td><td>Search Box</td><td>&lt;div id="portal-searchbox"&gt;â¦&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.searchbox">plone.searchbox</a><br>

plone.portalheader<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_008.png" alt="plone.logo-sunburst"><br></td><td>Logo</td><td>&lt;a id="portal-logo" ...&gt;... &lt;/a&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.logo">plone.logo</a><br>

plone.portalheader<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_007.png" alt="plone.global_sections-sunburst"><br></td><td>Global Sections</td><td>&lt;h5 class="hiddenStructure"&gt;Sections&lt;/h5&gt; &lt;ul id="portal-globalnav"&gt; â¦ &lt;/ul&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.global_sections">plone.global_sections</a><br>

plone.portalheader<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_015.png" alt="plone.personal_bar-sunburst"><br></td><td>Personal Bar</td><td>&lt;div id="portal-personaltools-wrapper"&gt; â¦&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.personal_bar">plonetheme.sunburst.personal_bar</a><br>

plone.portaltop<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_preview_005.png" alt="plone.pathbar-sunburst"><br></td><td>Path Bar (Portal Breadcrumbs)</td><td>&lt;div id="portal-breadcrumbs"&gt;...&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.path_bar">plone.path_bar</a><br>

plone.portaltop<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_003.png" alt="plone.contentviews-sunburst"><br></td><td>Content Views</td><td>&lt;ul class="contentViews"&gt; â¦ &lt;/ul&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.contentviews">plone.contentviews</a><br>

plone.contentviews<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_002.png" alt="plone.contentactions-sunburst"><br></td><td>Content Actions</td><td><br></td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.contentactions">plone.contentactions</a><br>

plone.contentviews<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_preview.png" alt="plone.toc-sunburst"><br></td><td>Table of Contents</td><td>&lt;dl id="document-toc" class="portlet toc"

    style="display: none"&gt; â¦ &lt;/dl&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.tableofcontents">plone.tableofcontents</a><br>

plone.abovecontentbody<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_preview_004.png" alt="plone.presentation-sunburst"><br></td><td>Presentation</td><td>&lt;p id="link-presentation"&gt;...&lt;/p&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.presentation">plone.presentation</a><br>

plone.abovecontentbody<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_010.png" alt="plone.keywords-sunburst"><br></td><td>Keywords</td><td>&lt;div id="category" class="documentByLine"&gt;â¦&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.belowcontenttitle.keywords">plone.belowcontenttitle.keywords</a><br>

plone.belowcontenttitle<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_preview_006.png" alt="plone.byline-sunburst"><br></td><td>Byline</td><td>&lt;div id="plone-document-byline" class="documentByLine"&gt;... 



&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.belowcontenttitle.documentbyline">plone.belowcontenttitle.documentbyline</a><br>

plone.belowcontenttitle<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Lock</td><td>&lt;div id="plone-lock-status" /&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.lockinfo">plone.lockinfo</a><br>

plone.abovecontent<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><br></td><td>Document Actions</td><td>&lt;div class="documentActions"&gt; â¦ &lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.abovecontenttitle.documentactions">plone.abovecontenttitle.documentactions</a><br>

plone.belowcontentbody<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_preview_008.png" alt="plone.relateditems-sunburst"><br></td><td>Related Items<br></td><td>&lt;div class="relatedItems"&gt; â¦ &lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.belowcontentbody.relateditems">plone.belowcontentbody.relateditems</a><br>

plone.belowcontentbody<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_preview_012.png" alt="plone.comment-sunburst"><br></td><td>Comments</td><td>&lt;div class="discussion"&gt; â¦ &lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.comments">plone.comments</a><br>

plone.belowcontent<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_019.png" alt="plone.contenthistory-sunburst"><br></td><td>Content History</td><td>&lt;div class="contentHistory" id="content-history"&gt;â¦&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.belowcontentbody.contenthistory">plone.belowcontentbody.contenthistory</a><br>

plone.belowcontentbody<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_preview_002.png" alt="plone.nextprevious-sunburst"><br></td><td>Next Previous</td><td>&lt;div class="listingBar"&gt;â¦&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.nextprevious">plone.nextprevious</a><br>

plone.belowcontent<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_013.png" alt="plone.footer-sunburst"><br></td><td>Footer</td><td>&lt;div id="portal-footer"&gt;â¦&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.footer">plone.footer</a><br>

plone.portalfooter<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr><tr><td><img class="image-inline" src="plone-theme-references_archivos/image_thumb_014.png" alt="plone.colophon-sunburst"><br></td><td>Colophon</td><td> &lt;div id="portal-colophon"&gt;â¦&lt;/div&gt;</td><td><a href="http://plone.org/documentation/manual/theme-reference/elements/visibleelements/plone.colophon">plone.colophon</a><br>

plone.portalfooter<br><a href="http://plone.org/documentation/manual/theme-reference/elements/viewlet">viewlet</a></td></tr></tbody></table></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                7.7.
                Structural Elements
            </h1>

            <p class="documentDescription">Elements forming the underlying page structure (viewlet and portlet managers).</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.7.1.
                Header
            </h1>

            <p class="documentDescription">Calls the viewlet managers for the site header.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;div id="portal-header"&gt; â¦ &lt;/div&gt;</code></dd><dt>Name:</dt><dd>plone.header</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.header</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>portal_header.pt</dd><dt>Class Name:</dt><dd>none</dd><dt>Manager:</dt><dd>plone.portaltop  (name)<br>plone.app.layout.viewlets.interfaces.IPortalTop (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of portal_header.pt in [your theme package]/browser/templates)</p>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IPortalTop"
    template="templates/[your template name].pt"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.portaltop" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.header" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.portaltop" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                7.8.
                Hidden Elements
            </h1>

            <p class="documentDescription">Hidden page elements (appearing in the HTMLhead or with css set to display:none).</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.8.1.
                Skip Links
            </h1>

            <p class="documentDescription">Hidden links at the top of the page to skip to the content and the navigation.</p>
    
            <div>
                
                    <div><p>&nbsp;</p>

<dl><dt>Snippet:</dt><dd><code>&lt;p class="hiddenStructure"&gt; â¦ &lt;/p&gt;</code></dd><dt>CSS:</dt><dd>invisibles.css</dd><dt>Name:</dt><dd>plone.skip_links</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.skip_links</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>skip_links.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.common.SkipLinksViewlet</dd><dt>Manager:</dt><dd>plone.portalheader  (name)<br>plone.app.layout.viewlets.interfaces.IPortalHeader (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of skip_links.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.common import SkipLinksViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](SkipLinksViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IPortalHeader"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.portalheader" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.skip_links" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.portalheader" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.8.2.
                HTML Head Title
            </h1>

            <p class="documentDescription">The page title in the HTML head.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;title&gt; ...&lt;/title&gt;</code></dd><dt>CSS:</dt><dd>none</dd><dt>Name:</dt><dd>plone.htmlhead.title</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.htmlhead.title</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>none</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.common.TitleViewlet</dd><dt>Manager:</dt><dd>plone.htmlhead  (name)<br>plone.app.layout.viewlets.interfaces.IHtmlHead (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.common import TitleViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile

class [your class name](TitleViewlet):
    [your code here]
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IHtmlHead"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.htmlhead" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.htmlhead.title" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.htmlhead" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.8.3.
                Next Previous Links
            </h1>

            <p class="documentDescription">Provides next/previous links in the HTML head.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;link title="Go to previous item" â¦ /&gt;</code></dd><dt>CSS:</dt><dd>none</dd><dt>Name:</dt><dd>plone.nextprevious.links</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.nextprevious.links</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/nextprevious/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/nextprevious/</li></ul></dd><dt>Template Name:</dt><dd>links.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.nextprevious.view.NextPreviousLinksViewlet</dd><dt>Manager:</dt><dd>plone.htmlhead.links  (name)<br>plone.app.layout.viewlets.interfaces.IHtmlHeadLinks (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of links.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.nextprevious.view import NextPreviousLinksViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](NextPreviousLinksViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IHtmlHeadLinks"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.htmlhead.links" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.nextprevious.links" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.htmlhead.links" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.8.4.
                Favicon Link
            </h1>

            <p class="documentDescription">The favicon link in HTML head.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;link rel="shortcut icon" â¦ /&gt;</code></dd><dt>CSS:</dt><dd>none</dd><dt>Name:</dt><dd>plone.links.favicon</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.links.favicon</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/links/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/links/</li></ul></dd><dt>Template Name:</dt><dd>favicon.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.links.viewlets.FaviconViewlet</dd><dt>Manager:</dt><dd>plone.htmlhead.links  (name)<br>plone.app.layout.viewlets.interfaces.IHtmlHeadLinks (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of favicon.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.links.viewlets import FaviconViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](FaviconViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IHtmlHeadLinks"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.htmlhead.links" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.links.favicon" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.htmlhead.links" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.8.5.
                Search Link
            </h1>

            <p class="documentDescription">The search link in HTML head.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;link rel="search" â¦ /&gt;</code></dd><dt>CSS:</dt><dd>none</dd><dt>Name:</dt><dd>plone.links.search</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.links.search</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/links/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/links/</li></ul></dd><dt>Template Name:</dt><dd>search.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.links.viewlets.SearchViewlet</dd><dt>Manager:</dt><dd>plone.htmlhead.links  (name)<br>plone.app.layout.viewlets.interfaces.IHtmlHeadLinks (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of search.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.links.viewlets import SearchViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](SearchViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IHtmlHeadLinks"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.htmlhead.links" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.links.search" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.htmlhead.links" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.8.6.
                Author Link
            </h1>

            <p class="documentDescription">The author link in the HTML head.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;link rel="author" â¦  /&gt;</code></dd><dt>CSS:</dt><dd>none</dd><dt>Name:</dt><dd>plone.links.author</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.links.author</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/links/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/links/</li></ul></dd><dt>Template Name:</dt><dd>author.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.links.viewlets.AuthorViewlet</dd><dt>Manager:</dt><dd>plone.htmlhead.links  (name)<br>plone.app.layout.viewlets.interfaces.IHtmlHeadLinks (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of author.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.links.viewlets import AuthorViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](AuthorViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IHtmlHeadLinks"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.htmlhead.links" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.links.author" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.htmlhead.links" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.8.7.
                Navigation Link
            </h1>

            <p class="documentDescription">The navigation link in the HTML head.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;link title="Front Page" â¦&gt; and &lt;link title="Site Map" ..&gt;</code></dd><dt>CSS:</dt><dd>none</dd><dt>Name:</dt><dd>plone.links.navigation</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.links.navigation</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/links/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/links/</li></ul></dd><dt>Template Name:</dt><dd>navigation.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.links.viewlets.NavigationViewlet</dd><dt>Manager:</dt><dd>plone.htmlhead.links  (name)<br>plone.app.layout.viewlets.interfaces.IHtmlHeadLinks (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of navigation.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.links.viewlets import NavigationViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](NavigationViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IHtmlHeadLinks"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.htmlhead.links" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.links.navigation" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.htmlhead.links" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.8.8.
                Analytics
            </h1>

            <p class="documentDescription">Google analytics code snippet.</p>
    
            <div>
                
                    <div><dl><dt>Notes:</dt><dd>Provide the code snippet for your site through the web: Site Setup &gt;  Site settings</dd><dt>Snippet:</dt><dd><code>(code snippet defined by the site manager)</code></dd><dt>CSS:</dt><dd>none</dd><dt>Name:</dt><dd>plone.analytics</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.analytics</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/analytics/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/analytics/</li></ul></dd><dt>Template Name:</dt><dd>none</dd><dt>Class Name:</dt><dd>plone.app.layout.analytics.view.AnalyticsViewlet</dd><dt>Manager:</dt><dd>plone.portalfooter  (name)<br>plone.app.layout.viewlets.interfaces.IPortalFooter (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.analytics.view import AnalyticsViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile

class [your class name](AnalyticsViewlet):
    [your code here]
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IPortalFooter"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.portalfooter" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.analytics" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.portalfooter" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.8.9.
                Dublin Core Metadata
            </h1>

            <p class="documentDescription">The Dublin Core metadata in the HTML head.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;meta .... /&gt;</code></dd><dt>CSS:</dt><dd>none</dd><dt>Name:</dt><dd>plone.htmlhead.dublincore</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.htmlhead.dublincore</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>dublin_core.pt<br></dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.common.DublinCoreViewlet</dd><dt>Manager:</dt><dd>plone.htmlhead  (name)<br>plone.app.layout.viewlets.interfaces.IHtmlHead (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.common import DublinCoreViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile

class [your class name](DublinCoreViewlet):
    [your code here]
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IHtmlHead"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.htmlhead" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.htmlhead.dublincore" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.htmlhead" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.8.10.
                KSS Base Url
            </h1>

            <p class="documentDescription">Link rel tag in the HTML head with the real url of the published page.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;link rel="kss-base-url" .... /&gt;</code></dd><dt>CSS:</dt><dd>none</dd><dt>Name:</dt><dd>plone.htmlhead.kss-base-url</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.htmlhead.kss-base-url</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/kss/</li><li>[your egg location]/plone.app.kss-[version].egg/plone/app/kss/</li></ul></dd><dt>Template Name:</dt><dd>none</dd><dt>Class Name:</dt><dd>plone.app.kss.headerViewlet.KSSBaseUrlViewlet</dd><dt>Manager:</dt><dd>plone.htmlhead  (name)<br>plone.app.layout.viewlets.interfaces.IHtmlHead (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.kss.headerViewlet import KSSBaseUrlViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile

class [your class name](KSSBaseUrlViewlet):
    [your code here]
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IHtmlHead"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.htmlhead" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.htmlhead.kss-base-url" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.htmlhead" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.8.11.
                RSS Link
            </h1>

            <p class="documentDescription">The RSS link in the HTML head.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;link rel="alternate" title="RSS 1.0" ... /&gt;</code></dd><dt>CSS:</dt><dd>none</dd><dt>Name:</dt><dd>plone.links.RSS</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.links.RSS</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/links/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/links/</li></ul></dd><dt>Template Name:</dt><dd>rsslink.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.links.viewlets.RSSViewlet</dd><dt>Manager:</dt><dd>plone.htmlhead.links  (name)<br>plone.app.layout.viewlets.interfaces.IHtmlHeadLinks (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of navigation.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.links.viewlets import RSSViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](RSSViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IHtmlHeadLinks"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.htmlhead.links" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.links.RSS" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.htmlhead.links" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                7.9.
                Visible Page Elements
            </h1>

            <p class="documentDescription">Page elements visible on the page (logo, site actions, search box etc)</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.1.
                Language Selector
            </h1>

            <p class="documentDescription">Provides a drop down list to select a different language.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;ul id="portal-languageselector"&gt; â¦ &lt;/ul&gt;</code></dd><dt>Name:</dt><dd>plone.app.i18n.locales.languageselector</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.app.i18n.locales.languageselector</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/i18n/locales/browser/</li><li>[your egg location]/plone.app.i18n-[version].egg/plone/app/i18n/locales/browser/</li></ul></dd><dt>Template Name:</dt><dd>languageselector.pt</dd><dt>Class Name:</dt><dd>plone.app.i18n.locales.browser.selector.LanguageSelector</dd><dt>Manager:</dt><dd>Portal Top  (name)<br>plone.app.layout.viewlets.interfaces.IPortalTop (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of languageselector.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.i18n.locales.browser.selector import LanguageSelector
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](LanguageSelector):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IPortalTop"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="Portal Top" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.app.i18n.locales.languageselector" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="Portal Top" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.2.
                Site Actions
            </h1>

            <p class="documentDescription">Links, available on every page, to provide specific functionality or information.</p>
    
            <div>
                
                    <div><dl><dt>Notes:</dt><dd>You can reorder, add, or remove individual site actions

<ul><li>through the web: Site Setup &gt;Zope Management Interface &gt; portal_actions &gt; site_actions</li><li>     in your product: profiles/default/actions.xml</li></ul></dd><dt>Snippet:</dt><dd><code>&lt;ul id="portal-siteactions"&gt;...&lt;/ul&gt;</code></dd><dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.site_actions</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.site_actions</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>site_actions.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.common.SiteActionsViewlet</dd><dt>Manager:</dt><dd>plone.portalheader  (name)<br>plone.app.layout.viewlets.interfaces.IPortalHeader (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of site_actions.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.common import SiteActionsViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](SiteActionsViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IPortalHeader"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.portalheader" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.site_actions" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.portalheader" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.3.
                Search Box
            </h1>

            <p class="documentDescription">Site search facility.</p>
    
            <div>
                
                    <div><dl><dt>Notes:</dt><dd>To customise the search box behaviour

<ul><li>through the web: Site Setup &gt; Search</li><li>in your product: profiles/default/propertiestool.xml</li></ul></dd><dt>Snippet:</dt><dd><code>&lt;div id="portal-searchbox"&gt;â¦&lt;/div&gt;</code></dd><dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.searchbox</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.searchbox</dd><dt>Further information:</dt><dd><a class="external-link" href="http://plone.org/documentation/tutorial/where-is-what/the-search-box">http://plone.org/documentation/kb/the-search-box</a></dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>searchbox.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.common.SearchBoxViewlet</dd><dt>Manager:</dt><dd>plone.portalheader  (name)<br>plone.app.layout.viewlets.interfaces.IPortalHeader (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of searchbox.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.common import SearchBoxViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](SearchBoxViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IPortalHeader"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.portalheader" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.searchbox" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.portalheader" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre>

'</div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.4.
                Logo
            </h1>

            <p class="documentDescription">The site logo.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;a id="portal-logo" ...&gt;... &lt;/a&gt;</code></dd><dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.logo</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.logo</dd><dt>Further information:</dt><dd><a class="external-link" href="http://plone.org/documentation/kb/where-is-what/the-logo">http://plone.org/documentation/kb/where-is-what/the-logo</a><br>See also the Quick Start Section of this manual.</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>logo.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.common.LogoViewlet</dd><dt>Manager:</dt><dd>plone.portalheader  (name)<br>plone.app.layout.viewlets.interfaces.IPortalHeader (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of logo.pt in [your theme package]/browser/templates)</p>

<p>Modify the logo.pt to suit your needs. For example, if you want to
use an image named something other than logo.jpg, you could use this
code and style #header in your mytheme.css file.</p>

<pre>&lt;a metal:define-macro="portal_logo"
&nbsp;&nbsp; id="portal-logo"
&nbsp;&nbsp; accesskey="1"
&nbsp;&nbsp; tal:attributes="href view/navigation_root_url"
&nbsp;&nbsp; i18n:domain="plone"&gt;
&nbsp;&nbsp;&nbsp; &lt;!-- &lt;img src="logo.jpg" alt=""
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tal:replace="structure view/logo_tag" /&gt; --&gt; &lt;!--commenting out the code that normally looks for logo.jpg --&gt;
&nbsp;&nbsp;&nbsp; &lt;div id="banner"&gt;&lt;!-- style this div in your mytheme.css --&gt;&lt;/div&gt;&lt;/a&gt;</pre>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.common import LogoViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](LogoViewlet):
    render = ViewPageTemplateFile("[your template name]")</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IPortalHeader"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.portalheader" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.logo" /&gt;
    &lt;/hidden&gt;</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.portalheader" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;</pre>

'</div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.5.
                Global Sections
            </h1>

            <p class="documentDescription">The top level sections of the site.</p>
    
            <div>
                
                    <div><dl><dt>Notes:</dt><dd>The sections are either auto-generated from top level content items or can be set up manually

<ul><li>through the web:  Site Setup &gt; Navigation (for auto-generation)<br>Site Setup &gt; Zope Management Interface &gt; portal_tabs (for manually defined sections) </li><li>in your product:  profiles/default/actions.xml and propertiestool.xml</li></ul></dd><dt>Snippet:</dt><dd><code>&lt;h5 class="hiddenStructure"&gt;Sections&lt;/h5&gt; &lt;ul id="portal-globalnav"&gt; â¦ &lt;/ul&gt;</code></dd><dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.global_sections</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.global_sections</dd><dt>Further information:</dt><dd><a href="http://plone.org/documentation/kb/where-is-what/the-navigation-tabs%27">http://plone.org/documentation/kb/where-is-what/the-navigation-tabs</a></dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>sections.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.common.GlobalSectionsViewlet</dd><dt>Manager:</dt><dd>plone.portalheader  (name)<br>plone.app.layout.viewlets.interfaces.IPortalHeader (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of sections.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.common import GlobalSectionsViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](GlobalSectionsViewlet):
    render = ViewPageTemplateFile("[your template name]")</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IPortalHeader"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.portalheader" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.global_sections" /&gt;
    &lt;/hidden&gt;</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.portalheader" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;</pre>

'</div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.6.
                Personal Bar
            </h1>

            <p class="documentDescription">Provides the Log in link and further links for users once logged in.</p>
    
            <div>
                
                    <div><dl><dt>Notes:</dt><dd>You can reorder, add, or remove specific links in the personal bar

<ul><li>through the web: Site Setup &gt;Zope Management Interface &gt; portal_actions &gt; user</li><li>     In your product: profiles/default/actions.xml</li></ul></dd><dt>Snippet:</dt><dd><code>&lt;div id="portal-personaltools-wrapper"&gt; â¦&lt;/div&gt;</code></dd><dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.personal_bar</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.personal_bar</dd><dt>Further information:</dt><dd><a href="http://plone.org/documentation/kb/where-is-what/the-personal-bar%27">http://plone.org/documentation/kb/where-is-what/the-personal-bar</a></dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>personal_bar.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.common.PersonalBarViewlet</dd><dt>Manager:</dt><dd>plone.portaltop  (name)<br>plone.app.layout.viewlets.interfaces.IPortalTop (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of personal_bar.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.common import PersonalBarViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](PersonalBarViewlet):
    render = ViewPageTemplateFile("[your template name]")</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IPortalTop"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.portaltop" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.personal_bar" /&gt;
    &lt;/hidden&gt;</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.portaltop" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;</pre>

'</div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.7.
                Path Bar (Portal Breadcrumbs)
            </h1>

            <p class="documentDescription">Provides the breadcrumb trail.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;div id="portal-breadcrumbs"&gt;...&lt;/div&gt;</code></dd>

<dt>Note:</dt><dd>In the Sunburst theme, the breadcrumbs have been
styled not to appear until the third level down. Customize the CSS to
change this behaviour.</dd>

<dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.path_bar</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.path_bar</dd><dt>Further information:</dt><dd><a href="http://plone.org/documentation/kb/where-is-what/the-path-bar%27">http://plone.org/documentation/kb/where-is-what/the-path-bar</a></dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>path_bar.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.common.PathBarViewlet</dd><dt>Manager:</dt><dd>plone.portaltop  (name)<br>plone.app.layout.viewlets.interfaces.IPortalTop (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of path_bar.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.common import PathBarViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](PathBarViewlet):
    render = ViewPageTemplateFile("[your template name]")</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IPortalTop"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.portaltop" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.path_bar" /&gt;
    &lt;/hidden&gt;</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.portaltop" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;</pre>

'</div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.8.
                Content Views
            </h1>

            <p class="documentDescription">The View, Edit, and other tabs in the editing interface.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;ul class="contentViews"&gt; â¦ &lt;/ul&gt;</code></dd><dt>CSS:</dt><dd>authoring.css</dd><dt>Name:</dt><dd>plone.contentviews</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.contentviews</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>contentviews.pt</dd><dt>Class Name:</dt><dd>none</dd><dt>Manager:</dt><dd>plone.contentviews  (name)<br>plone.app.layout.viewlets.interfaces.IContentViews (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of contentviews.pt in [your theme package]/browser/templates)</p>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IContentViews"
    template="templates/[your template name].pt"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.contentviews" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.contentviews" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.contentviews" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.9.
                Content Actions
            </h1>

            <p class="documentDescription">Provides
the display drop-down and other actions in editing mode. There are
three content actions components, registered for different view
interfaces (as different sets of actions are required in different
contexts).</p>
    
            <div>
                
                    <div><dl><dt>Name:</dt><dd>plone.contentactions</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.contentactions</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>contentactions_blank.pt &amp; contentactions.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.common.ContentActionsViewlet</dd><dt>Manager:</dt><dd>plone.contentviews  (name)<br>plone.app.layout.viewlets.interfaces.IContentViews (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of contentactions_blank.pt &amp; contentactions.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.common import ContentActionsViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](ContentActionsViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IContentViews"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.contentviews" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.contentactions" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.contentviews" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.10.
                Table of Contents
            </h1>

            <p class="documentDescription">Provides a set of bookmarks for the current page.</p>
    
            <div>
                
                    <div><dl><dt>Notes:</dt><dd>Turned on per content item through Edit &gt; Settings.</dd><dt>Snippet:</dt><dd><code>&lt;dl id="document-toc" class="portlet toc"    style="display: none"&gt; â¦ &lt;/dl&gt;</code></dd><dt>CSS:</dt><dd>portlets.css</dd><dt>Name:</dt><dd>plone.tableofcontents</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.tableofcontents</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>toc.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.common.TableOfContentsViewlet</dd><dt>Manager:</dt><dd>plone.abovecontentbody  (name)<br>plone.app.layout.viewlets.interfaces.IAboveContentBody (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of toc.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.common import TableOfContentsViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](TableOfContentsViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IAboveContentBody"
    class=".[your module].[your class name]"
    for="Products.ATContentTypes.interface.IATDocument"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.abovecontentbody" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.tableofcontents" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.abovecontentbody" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.11.
                Presentation
            </h1>

            <p class="documentDescription">Provides a link to a presentation view of a document.</p>
    
            <div>
                
                    <div><dl><dt>Notes:</dt><dd>Only available for a document. The link to a presentation view can be turned on or off

<ul><li>through the web: on an individual item (Edit &gt; Settings &gt; Presentation )<br> or Site Setup &gt; Types (site-wide per type)</li><li>in your product: profiles/default/types (per type) </li></ul></dd><dt>Snippet:</dt><dd><code>&lt;p id="link-presentation"&gt;...&lt;/p&gt;</code></dd><dt>CSS:</dt><dd>none</dd><dt>Name:</dt><dd>plone.presentation</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.presentation</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/presentation/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/presentation/</li></ul></dd><dt>Template Name:</dt><dd>none</dd><dt>Class Name:</dt><dd>plone.app.presentation.PresentationViewlet</dd><dt>Manager:</dt><dd>plone.abovecontentbody  (name)<br>plone.app.layout.viewlets.interfaces.IAboveContentBody (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.presentation import PresentationViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile

class [your class name](PresentationViewlet):
    [your code here]
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IAboveContentBody"
    class=".[your module].[your class name]"
    for="Products.ATContentTypes.interface.IATDocument"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.abovecontentbody" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.presentation" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.abovecontentbody" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.12.
                Keywords
            </h1>

            <p class="documentDescription">The categories (a.k.a. keywords / tags / labels) that have been assigned to the item.</p>
    
            <div>
                
                    <div><dl><dt>Notes:</dt><dd>This will only appear if some categories have been assigned using Edit &gt; Categories.</dd><dt>Snippet:</dt><dd><code>&lt;div id="category" class="documentByLine"&gt;â¦&lt;/div&gt;</code></dd><dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.belowcontenttitle.keywords</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.belowcontenttitle.keywords</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>keywords.pt</dd><dt>Class Name:</dt><dd>none</dd><dt>Manager:</dt><dd>plone.belowcontenttitle  (name)<br>plone.app.layout.viewlets.interfaces.IBelowContentTitle (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of keywords.pt in [your theme package]/browser/templates)</p>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IBelowContentTitle"
    template="templates/[your template name].pt"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.belowcontenttitle" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.belowcontenttitle.keywords" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.belowcontenttitle" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.13.
                Byline
            </h1>

            <p class="documentDescription">The 'about' information (who created a content item and when it was modified).</p>
    
            <div>
                
                    <div><dl><dt>Notes:</dt><dd>You can turn off the Byline for anonymous viewers

<ul><li>through the web: Site Setup &gt; Security</li><li>     In your product: profiles/default/propertiestool.xml</li></ul></dd><dt>Snippet:</dt><dd><code>&lt;div id="plone-document-byline" class="documentByLine"&gt;...  &lt;/div&gt;</code></dd><dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.belowcontenttitle.documentbyline</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.belowcontenttitle.documentbyline</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>document_byline.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.content.DocumentBylineViewlet</dd><dt>Manager:</dt><dd>plone.belowcontenttitle  (name)<br>plone.app.layout.viewlets.interfaces.IBelowContentTitle (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of document_byline.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.content import DocumentBylineViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](DocumentBylineViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IBelowContentTitle"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.belowcontenttitle" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.belowcontenttitle.documentbyline" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.belowcontenttitle" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.14.
                Lock
            </h1>

            <p class="documentDescription">Indicates that the content item is locked for editing.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;div id="plone-lock-status" /&gt;</code></dd><dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.lockinfo</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.lockinfo</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/locking/browser/</li><li>[your egg location]/plone.locking-[version].egg/plone/locking/browser/</li></ul></dd><dt>Template Name:</dt><dd>info.pt</dd><dt>Class Name:</dt><dd>plone.locking.browser.info.LockInfoViewlet</dd><dt>Manager:</dt><dd>plone.abovecontent  (name)<br>plone.app.layout.viewlets.interfaces.IAboveContent (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of info.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.locking.browser.info import LockInfoViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](LockInfoViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IAboveContent"
    class=".[your module].[your class name]"
    for="plone.locking.interfaces.ITTWLockable"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.abovecontent" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.lockinfo" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.abovecontent" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.15.
                Workflow History
            </h1>

            <p class="documentDescription">Summarizes workflow transitions on the current content item.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;div class="reviewHistory" id="review-history"&gt;â¦&lt;/div&gt;</code></dd><dt>CSS:</dt><dd>authoring.css</dd><dt>Name:</dt><dd>plone.belowcontentbody.workflowhistory</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.belowcontentbody.workflowhistory</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>review_history.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.content.WorkflowHistoryViewlet</dd><dt>Manager:</dt><dd>plone.belowcontentbody  (name)<br>plone.app.layout.viewlets.interfaces.IBelowContentBody (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of review_history.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.content import WorkflowHistoryViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](WorkflowHistoryViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IBelowContentBody"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.belowcontentbody" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.belowcontentbody.workflowhistory" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.belowcontentbody" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.16.
                Content History
            </h1>

            <p class="documentDescription">Summarizes
workflow transitions and version history on the current content item
(this replaces the workflow viewlet in Plone 3.3).</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;div class="contentHistory" id="content-history"&gt;â¦&lt;/div&gt;</code></dd><dt>CSS:</dt><dd>authoring.css</dd><dt>Name:</dt><dd>plone.belowcontentbody.contenthistory</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.belowcontentbody.contenthistory</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>content_history.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.content.ContentHistoryViewlet</dd><dt>Manager:</dt><dd>plone.belowcontentbody  (name)<br>plone.app.layout.viewlets.interfaces.IBelowContentBody (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of review_history.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.content import ContentHistoryViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](ContentHistoryViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IBelowContentBody"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.belowcontentbody" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.belowcontentbody.contenthistory" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.belowcontentbody" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.17.
                Document Actions
            </h1>

            <p class="documentDescription">The Print and RSS links.</p>
    
            <div>
                
                    <div><dl><dt>Notes:</dt><dd>You can reorder, add, or remove individual document actions

<ul><li>through the web: Site Setup &gt;Zope Management Interface &gt; portal_actions &gt; document_actions</li><li>     In your product: profiles/default/actions.xml</li></ul></dd><dt>Snippet:</dt><dd><code>&lt;div class="documentActions"&gt; â¦ &lt;/div&gt;</code></dd><dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.abovecontenttitle.documentactions</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.abovecontenttitle.documentactions</dd><dt>Further information:</dt><dd><a href="http://plone.org/documentation/kb/where-is-what/document-actions%27">http://plone.org/documentation/kb/where-is-what/document-actions</a></dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>document_actions.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.content.DocumentActionsViewlet</dd><dt>Manager:</dt><dd>plone.belowcontentbody  (name)<br>plone.app.layout.viewlets.interfaces.IBelowContentBody (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of document_actions.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.content import DocumentActionsViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](DocumentActionsViewlet):
    render = ViewPageTemplateFile("[your template name]")</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IBelowContentBody"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.belowcontentbody" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.abovecontenttitle.documentactions" /&gt;
    &lt;/hidden&gt;</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.belowcontentbody" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;</pre>

'</div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.18.
                Related Items
            </h1>

            <p class="documentDescription">Items related to the content</p>
    
            <div>
                
                    <div><dl><dt>Notes:</dt><dd>This viewlet displays links to additional content items selected by the editor under the categorization tab.</dd><dt>Snippet:</dt><dd><code>&lt;div class="relatedItems"&gt; â¦ &lt;/div&gt;</code></dd><dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.belowcontentbody.relateditems</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.belowcontentbody.relateditems</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>document_relateditems.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.content.ContentRelatedItems</dd><dt>Manager:</dt><dd>plone.belowcontentbody  (name)<br>plone.app.layout.viewlets.interfaces.IBelowContentBody (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of document_relateditems.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.content import ContentRelatedItems
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](ContentRelatedItems):
    render = ViewPageTemplateFile("[your template name]")</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IBelowContentBody"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.belowcontentbody" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.belowcontentbody.relateditems" /&gt;
    &lt;/hidden&gt;</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.belowcontentbody" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;</pre>

'</div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.19.
                Comments
            </h1>

            <p class="documentDescription">Supplies the commenting interface.</p>
    
            <div>
                
                    <div><dl><dt>Notes:</dt><dd>Comments can be turned on or off

<ul><li>through the web: on an individual item (Edit &gt; Settings &gt; Allow Comments )<br> or Site Setup &gt; Types (site-wide per type)</li><li>in your product: profiles/default/types (per type) </li></ul></dd><dt>Snippet:</dt><dd><code>&lt;div class="discussion"&gt; â¦ &lt;/div&gt;</code></dd><dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.comments</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.comments</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>comments.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.viewlets.comments.CommentsViewlet</dd><dt>Manager:</dt><dd>plone.belowcontent  (name)<br>plone.app.layout.viewlets.interfaces.IBelowContent (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of comments.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.viewlets.comments import CommentsViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](CommentsViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IBelowContent"
    class=".[your module].[your class name]"
    for="Products.CMFCore.interfaces.IContentish"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.belowcontent" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.comments" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.belowcontent" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.20.
                Next Previous
            </h1>

            <p class="documentDescription">Provides next/previous functionality for a folder.</p>
    
            <div>
                
                    <div><dl><dt>Notes:</dt><dd>Turn this on per folder using Edit &gt; Settings.</dd><dt>Snippet:</dt><dd><code>&lt;div class="listingBar"&gt;â¦&lt;/div&gt;</code></dd><dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.nextprevious</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.nextprevious</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/nextprevious/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/nextprevious/</li></ul></dd><dt>Template Name:</dt><dd>nextprevious.pt</dd><dt>Class Name:</dt><dd>plone.app.layout.nextprevious.view.NextPreviousViewlet</dd><dt>Manager:</dt><dd>plone.belowcontent  (name)<br>plone.app.layout.viewlets.interfaces.IBelowContent (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of nextprevious.pt in [your theme package]/browser/templates)</p>

<p>Create your own version of the class in [your theme package]/browser/[your module].py</p>

<pre>from plone.app.layout.nextprevious.view import NextPreviousViewlet
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
class [your class name](NextPreviousViewlet):
    render = ViewPageTemplateFile("[your template name]")
</pre>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IBelowContent"
    class=".[your module].[your class name]"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.belowcontent" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.nextprevious" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.belowcontent" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.21.
                Footer
            </h1>

            <p class="documentDescription">Contains copyright  information.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code>&lt;div id="portal-footer"&gt;â¦&lt;/div&gt;</code></dd><dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.footer</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.footer</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>footer.pt</dd><dt>Class Name:</dt><dd>none</dd><dt>Manager:</dt><dd>plone.portalfooter  (name)<br>plone.app.layout.viewlets.interfaces.IPortalFooter (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of footer.pt in [your theme package]/browser/templates)</p>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IPortalFooter"
    template="templates/[your template name].pt"
    for="*"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.portalfooter" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.footer" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.portalfooter" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-3">

            <h1>
                7.9.22.
                Colophon
            </h1>

            <p class="documentDescription">Contains links to plone.org etc.</p>
    
            <div>
                
                    <div><dl><dt>Snippet:</dt><dd><code> &lt;div id="portal-colophon"&gt;â¦&lt;/div&gt;</code></dd><dt>CSS:</dt><dd>public.css</dd><dt>Name:</dt><dd>plone.colophon</dd><dt>Type:</dt><dd><a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a></dd></dl><dl><h2>Customizing through the Zope Management Interface</h2>

<dt>Use:</dt><dd>Site Setup &gt; Zope Management Interface &gt; portal_view_customizations</dd><dt>Go to:</dt><dd>plone.colophon</dd></dl><h2>Customizing in your own product</h2>

<p>The following details will help you locate the files that you will
need to copy into your own product. They will also help you to provide
the correct information to create your own zcml directives, Python
classes, and interfaces.See <a href="http://plone.org/documentation/manual/theme-reference/elements/elements/viewlet">viewlet</a> for more information.</p>

<dl><dt>Located in:</dt><dd>

<ul><li>[your egg location]/plone/app/layout/viewlets/</li><li>[your egg location]/plone.app.layout-[version].egg/plone/app/layout/viewlets/</li></ul></dd><dt>Template Name:</dt><dd>colophon.pt</dd><dt>Class Name:</dt><dd>none</dd><dt>Manager:</dt><dd>plone.portalfooter  (name)<br>plone.app.layout.viewlets.interfaces.IPortalFooter (interface)</dd></dl><h3>Sample files &amp; directives</h3>

<p>Put a version of colophon.pt in [your theme package]/browser/templates)</p>

<p>Wire up your viewlet in [your theme package]/browser/configure.zcml</p>

<pre>&lt;browser:viewlet
    name="[your namespace].[your viewlet name]"
    manager="plone.app.layout.viewlets.interfaces.IPortalFooter"
    template="templates/[your template name].pt"
    for="*"
    layer=".interfaces.[your theme specific interface]"
    permission="zope2.View"
/&gt;
</pre>

<p>In [your theme package]/profiles/default/viewlets.xml</p>

<p>Hide the original viewlet (if you wish)</p>

<pre>&lt;object&gt;
    &lt;hidden manager="plone.portalfooter" skinname="[your skin name]"&gt;
        &lt;viewlet name="plone.colophon" /&gt;
    &lt;/hidden&gt;
</pre>

<p>Insert your new viewlet in a viewlet manager</p>

<pre>    &lt;order manager="plone.portalfooter" skinname="[your skin name]"
           based-on="Plone Default"&gt;
        &lt;viewlet name="[your namespace].[your viewlet name]"
                 insert-before="*" /&gt;
    &lt;/order&gt;
&lt;/object&gt;
</pre></div>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-1">

            <h1>
                8.
                Where is What
            </h1>

            <p class="documentDescription">How
to locate the bits and pieces you need. Links to useful visual aids for
identifying page elements, pointers to locating your product and eggs
directories, diagrams of a theme egg on the file system.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-2">

            <h1>
                8.1.
                Where is What on the Page
            </h1>

            <p class="documentDescription">How can you track down the files related to an individual page element?</p>
    
            <div>
                
                    <div><p>At
the time of writing, there's no in-built magic wand to point at an
element on a Plone web page and find out exactly what templates and
code are involved in its creation. There may be soon though, and the
adventurous might like to explore <a href="http://weblion.psu.edu/blog/esteele/gloworm-0-1-alpha1-now-available">Weblion's Gloworm tool</a>.</p>

<p>If you're not ready for an adventure yet, then there are a number of
good tutorials available with diagrams and guides to where is what.</p>

<h2 id="toc1">Understanding how the CSS maps to the Page</h2>

<p>The Weblion project has an excellent Wiki page to help you with this</p>

<p>&nbsp;</p>



<ul><li><a href="https://weblion.psu.edu/trac/weblion/wiki/PloneThreeWhereIsWhat">https://weblion.psu.edu/trac/weblion/wiki/PloneThreeWhereIsWhat</a></li></ul><p>&nbsp;</p>

<p>Firebug (an add-on for Firefox), of course, is an essential tool for inspecting code and CSS for a page.</p>

<p>&nbsp;</p>

<ul><li><a href="http://www.getfirebug.com/">

        http://www.getfirebug.com/</a></li></ul><p>&nbsp;</p>

<h2>Page Elements</h2>

<p>Page elements are consistently named in Plone, so once you know the
name of an area of the page, you're well on the way to tracking down
the relevant files</p>

<ul><li>you can find a visual key to page elements in the Elements section of this manual</li><li>you'll also find an excellent overview in the <a href="http://plone.org/documentation/tutorial/where-is-what/introduction">What Controls What You See </a>tutorial on Plone.org</li><li>and a mapping of the viewlet and portlet managers on the <a href="https://weblion.psu.edu/trac/weblion/wiki/PloneThreeWhereIsWhat">Weblion wiki</a><br></li></ul><p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                8.2.
                Where's my Zope Instance?
            </h1>

            <p class="documentDescription">Where your Zope instance lives depends on the Plone installer or installation process you used.</p>
    
            <div>
                
                    <div><h2>Plone Version 3.1.2 onwards</h2>

<dl><dt>Buildout </dt>

      <dd>In a Buildout based installation, you
don't need to worry much about your Zope instance. If you really want
to investigate you'll find the actual instance in [your
buildout]/parts/instance. However most of the key bits (your Plone
products, 3<sup>rd</sup> party products, your Data.fs) don't actually
live there. They are all assembled together from various parts of your
file system by the zope.conf file which is generated when you run
buildout.</dd></dl><h2>Plone Version 3.1.1 or lower</h2>

<dl><dt>Plone Installer</dt>

      <dd>The Plone installers (apart
from the Plone 3.1 Universal Installer) usually drop a Zope instance
directory alongside the Zope and Python software directories. So, for
example, a standard Windows installation, locates your Zope instance at
c:\Program Files\Plone 3\Data. On a Mac, it will be called 'instance'
and will probably live in a Plone folder in your applications folder.<br></dd>

      <dd>The Plone 3.1 Universal Installer, however, will have given you a buildout based installation.</dd>

      <dt>Plone Product Package</dt>

      <dd>If
you've installed Zope yourself, you'll have been prompted to create a
Zope instance, so you should have a good idea of where that is on your
system.</dd></dl></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                8.3.
                Where's my Products Directory?
            </h1>

            <p class="documentDescription">How to track down your products directory. It'll differ according to the Plone installer or installation process you used.</p>
    
            <div>
                
                    <div><p>The
products directory is where old-style 2.5 products live. To track this
down, you'll need to know where your Zope Instance or your Buildout is
first.</p>

<p>For theming purposes, the main reason you'll need to investigate the
products directory is to locate Plone Default theme files - as parts of
Plone are still in old-style product form.</p>

<h2>Plone version 3.1.2 onwards</h2>

In a Buildout based installation, you'll find products in various directories.

<dl><dt>Core Plone products (such as CMFPlone)</dt>

      <dd>For these, have a look in <br><ul><li>[your buildout]/parts/plone.</li></ul></dd>

<dt>Products you download yourself</dt>

      <dd>These should go in<br><ul><li>[your buildout]/products.</li></ul>

If you find you haven't got a products directory there, then it is OK to create one yourself.

</dd>

<dt>Products you asked buildout to download</dt>

      <dd>If you asked buildout to go and fetch some old-style products, then these will have been dropped into<br><ul><li>[your buildout]/parts/[directory name].</li></ul>

(Buildout will also have created the directory and will have called it something like "productdistros").

</dd></dl><h2>Plone version 3.1.1 or lower</h2>

<dl><dt>Plone Installer and Plone Product Package</dt>

      <dd>It
should be easy to locate all your products (those belonging to the core
Plone installation and those you've downloaded yourself) in <br><ul><li>[your zope instance]/products</li></ul>

However, if you used the Plone 3.1 Universal Installer your installation will be buildout based.</dd></dl></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                8.4.
                Where's my Egg Location?
            </h1>

            <p class="documentDescription">It is easy enough for Zope to find your eggs, harder for humans.</p>
    
            <div>
                
                    <div><h2>Plone version 3.1.2 onwards</h2>

<dl><dt>Core Plone Default Products</dt>

      <dd>For core products used in the Plone Default Theme, buildout has an eggs directory <br><ul><li>[your buildout]/eggs </li></ul>

which is where eggs are automatically dropped when Plone is installed.</dd>

<dt>Your own theme product</dt>

<dd>Because your own theme product will be under development, this will go in a separate place in your buildout

<ul><li>[your buildout]/[zinstance|zeocluster|]/src</li></ul></dd></dl><p>

(note that to share eggs between buildouts you can specify a different location for this in a buildout defaults file, check the <a href="http://plone.org/documentation/tutorial/buildout/creating-a-buildout-defaults-file">buildout tutorial on plone.org</a> for more information).</p>

<h3>Using Omelette to get at your eggs quickly<br></h3>

<p>It is a bit of a drag navigating your way around all the eggs used
by Plone. David Glick's Omelette recipe creates a unified directory
structure of all namespace packages, symlinking to the actual contents,
via buildout. Full instructions and documentation on this can be found
here:</p>

<p><a class="external-link" href="http://pypi.python.org/pypi/collective.recipe.omelette">http://pypi.python.org/pypi/collective.recipe.omelette</a></p>

<p>Once you've re-run buildout with the omelette recipe, you'll find that you have a new section here:</p>

<ul><li>[your buildout]/[zinstance|zeocluster]/parts/omelette</li></ul><p>and eggs such as plone.app.layout can be found in:</p>

<ul><li>[your buildout]/[zinstance|zeocluster]/parts/omelette/plone/app/layout</li></ul><h2>Plone version 3.1.1 or lower</h2>

<dl><dt>Plone Installer</dt>

      <dd>If you have installed Plone with an installer, then the eggs will probably have been dropped into<br><ul><li> [your plone installation]/Python/Lib/site-packages.</li></ul>

However, if you've used the Plone 3.1 universal installer, then you will have a buildout based installation.</dd>

      <dt>The Plone Product Package</dt>

      <dd>If you used the product package (i.e. installed from source), then you may well find them in <br><ul><li>[your Zope instance]/lib/python.</li></ul></dd></dl></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                8.5.
                Location of files in your own Theme Product
            </h1>

            <p class="documentDescription">The egg created for you by the plone3_theme paster template should have a file system layout very similar to this diagram.</p>
    
            <div>
                
                    <div><p>If the diagram doesn't help, then consult the next few pages where sections of the diagram are combined with a text explanation.</p>

<p><img class="image-left" src="plone-theme-references_archivos/your_theme_egg.gif" alt="your theme egg"></p>

<p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                8.6.
                Files for the Skin
            </h1>

            <p class="documentDescription">These files and directories will be relevant when working on the Skin part of your theme.</p>
    
            <div>
                
                    <div><dl><dt>/skins/[your theme namespace].[your theme name]_custom_templates | custom_images | styles</dt>

      <dd>These
directories will form your skin layers. Your templates, images, and
stylesheets can go here. If you asked it to, the plone3_theme paster
template will have provided blank style sheets to override the Plone
Default ones. </dd>

      <dt>/skins.zcml</dt>

      <dd>When your Zope instance starts up, this turns your directories into skin layers</dd>

      <dt>/profiles/default/skins.xml | cssregistry.xml | jsregistry.xml</dt>

      <dd>When
your theme is installed in your Plone site, this sets up the hierarchy
of skin layers, and registers your style sheets and JavaScript with the
registries</dd><dt><img class="image-left" src="plone-theme-references_archivos/your_theme_egg_skin.gif" alt="your theme egg - the skin files"></dt></dl><p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                8.7.
                Files for Components
            </h1>

            <p class="documentDescription">These files and directories will be relevant when working on the Components part of your theme.</p>
    
            <div>
                
                    <div><dl><dt>/browser/viewlet.py | viewlet.pt</dt>

      <dd>An example viewlet component</dd>

      <dt>/browser/interfaces.py</dt>

      <dd>This is used to create your theme interface (and any other interfaces you might need)<br></dd>

      <dt>/profiles/default/viewlets.xml</dt>

      <dd>Use this file to order your viewlets within viewlet managers</dd>

      <dt>/browser/configure.zcml</dt>

      <dd>Use this file to wire up your components</dd>

      <dt>/browser/templates | styles</dt>

      <dd>These
directories can be used for templates, styles, and images. You will
need to register these as directories as resources in configure.zcml.</dd><dt><img class="image-left" src="plone-theme-references_archivos/your_theme_egg_components.gif" alt="your theme egg - the components files"></dt></dl><p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                8.8.
                Files for Configuration
            </h1>

            <p class="documentDescription">These files and directories will be relevant when working on the Configuration part of your theme.</p>
    
            <div>
                
                    <div><dl><dt>/profiles/default/</dt>

      <dd>This
directory holds the xml for Generic Setup. The plone3_theme paster
template will have provided you with some ready-made files - for
setting up your skin layers, registering your style sheets and
JavaScripts, and ordering your viewlets. <br></dd>

      <dt>/profiles.zcml</dt>

      <dd>When your Zope instance starts up, this file makes the profile available for Generic Setup to use.</dd><dt><img class="image-left" src="plone-theme-references_archivos/your_theme_egg_config.gif" alt="your theme egg - the configuration files"></dt></dl><p>&nbsp;</p></div>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                8.9.
                Files for Installing your Egg
            </h1>

            <p class="documentDescription">These are the files and directories required to install your egg in your python path and make it available to Zope on start up.</p>
    
            <div>
                
                    <p><img class="image-left" src="plone-theme-references_archivos/your_theme_egg_egg_installation.gif" alt="your theme egg - the files used for installing the egg"></p>
                
                
            </div>

            

        </div>        
    
    
        <div class="referenceManualCollation depth-2">

            <h1>
                8.10.
                Files for Installing your Theme
            </h1>

            <p class="documentDescription">These
are the files used when you install your theme product using Site Setup
&gt; Add / Remove Products or Zope Management Interface &gt;
portal_quickinstaller</p>
    
            <div>
                
                    <dl><dt>/profiles/default/</dt>

      <dd>Generic
Setup will install your theme profile when your theme is installed.
import_steps.xml points to a 'handler' for installation steps which
aren't yet part of Generic Setup or can't be expressed as XML.</dd>

      <dt>/setuphandlers.py</dt>

      <dd>This contains the handler for non-Generic Setup installation steps.</dd><dt><img class="image-left" src="plone-theme-references_archivos/your_theme_egg_qi_installation.gif" alt="your theme egg - the files used by quick installer"></dt></dl></div>

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-1">

            <h1>
                9.
                Illustrations
            </h1>

            <p class="documentDescription">The illustrations used in this manual - if you just want to look at the pictures.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-2">

            <h1>
                9.1.
                Elements
            </h1>

            <p class="documentDescription">Snippet Images of the individual page elements</p>
    
            

            

        </div>        
    

            

        </div>        
    
    
        <div class="referenceManualCollation depth-1">

            <h1>
                10.
                Rules-Based Theming 
            </h1>

            <p class="documentDescription">An overview of how to theme a site using a transform approach.</p>
    
            

            
                
    
        <div class="referenceManualCollation depth-2">

            <h1>
                10.1.
                collective.xdv
            </h1>

            <p class="documentDescription">The collective.xdv documentation has now moved to its own area in the Downloads section of the Plone website.</p>
    
            <div>
                
                    <p><a class="external-link" href="http://plone.org/products/collective.xdv/documentation">http://plone.org/products/collective.xdv/documentation</a></p>
                
                
            </div>

            

        </div>        
    

            

        </div>        
    


            </div>
        </div><div id="viewlet-below-content">
</div></div><!-- End cell --><div class="grid-cell position-two-thirds width-third"><div id="sidebar"><div id="portletwrapper-706c6f6e652e6c656674636f6c756d6e0a636f6e74656e745f747970650a48656c7043656e7465725265666572656e63654d616e75616c0a706f72746c65745f7068635f61626f7574" class="portletWrapper kssattr-portlethash-706c6f6e652e6c656674636f6c756d6e0a636f6e74656e745f747970650a48656c7043656e7465725265666572656e63654d616e75616c0a706f72746c65745f7068635f61626f7574">


  
    <div>

<dl class="portlet"><dt class="portletHeader">
		About
	</dt>

	<dd class="portletItem">

    

    <div id="phcMetadata">
      	<p><strong>Use with</strong>:
      	Plone 4, Plone 3<br><strong>Relevant for</strong>:
      	  Integrators, Customizers
        
      	</p>

        

            <img src="plone-theme-references_archivos/defaultUser.gif" alt="" class="portraitPhoto" style="margin: 0pt 1em 0.5em 0pt; float: left;" height="100" width="75"><p>This document was contributed by
               <a href="http://plone.org/author/anneb">Anne Bowtell</a>,
               and last modified
               453
               days ago.
            </p>
            
        
    </div>	

    <p></p>
	
    <p>
    <img src="plone-theme-references_archivos/speakplone_sm.png" alt="" style="float: left;" height="28" width="80">
      Visit our 
      <a href="http://plone.org/support/chat">chat rooms</a> or 
      <a href="http://plone.org/support/forums">support forums</a> 
      if you have more specific questions.
    </p>

    <p>You can also learn how to design, build, and deploy a website in Plone 
    through one of the numerous 
    <a href="http://plone.org/events/training">Plone training sessions</a> around the world.
    </p>

    <p>Report errors, omissions, etc., to the documentation by emailing <a href="mailto:plone-docs@lists.sourceforge.net">plone-docs@lists.sourceforge.net</a></p>

  </dd>

</dl></div>
  

  

</div></div></div></div><!-- End row --><div class="grid-row"><div class="grid-cell position-leftmost width-full"><div id="footer-portlets"></div></div></div><!-- End footer portlets row --></div><div style="clear: both;">&nbsp;</div></div><!-- end inner-wrapper --><div id="push"></div></div><!-- end outer-wrapper --><div id="footer-wrapper"><div id="footer-gradient"></div><div id="footer"><a id="footer-logo" href="http://plone.org/" title="Plone CMS, the open source content management system"></a><p>The Plone<sup>®</sup> CMS/WCM is © 2000–2010 the Plone Foundation and friends. Site hosted by <a href="http://www.sixfeetup.com/" style="color: white;">Six Feet Up</a>.</p><p>Plone<sup>®</sup> and the Plone logo are registered trademarks of the Plone Foundation. You’re looking good today.</p><div id="sitemap"><!-- <dl>
				<dt><a href="">Plone for…</a></dt>
				<dd><a href="">Small/Medium Business </a></dd>
				<dd><a href="">Enterprise            </a></dd>
				<dd><a href="">Non-profits           </a></dd>
				<dd><a href="">Government            </a></dd>
				<dd><a href="">Education             </a></dd>
				<dd><a href="">Science               </a></dd>
				<dd><a href="">Media &amp; Publishing</a></dd>
			</dl> --><dl><dt><a href="http://plone.org/products">Downloads</a></dt><dd><a href="http://plone.org/download">Get Plone</a></dd><dd><a href="http://plone.org/products?getCategories=themes">Themes</a></dd><dd><a href="http://plone.org/products?getCategories=dev">Development tools</a></dd><dd><a href="http://plone.org/products?getCategories=auth">Authentication</a></dd><dd><a href="http://plone.org/products">…and more.</a></dd></dl><dl><dt><a href="http://plone.org/documentation">Documentation</a></dt><dd><a href="http://plone.org/documentation/faq/">FAQs</a></dd><dd><a href="http://plone.org/documentation/movies/">Tutorial videos</a></dd><dd><a href="http://plone.org/documentation/manual">Manuals</a></dd><dd><a href="http://plone.org/documentation/books">Books</a></dd><!-- <dd><a href="">Knowledge Base</a></dd> --><dd><a href="http://plone.org/documentation/error">Error Reference</a></dd><!-- <dd><a href="">Module documentation</a></dd> --><dd><a href="http://plone.net/sites">Sites using Plone</a></dd></dl><dl><dt><a href="http://dev.plone.org/plone">Developers</a></dt><dd><a href="http://dev.plone.org/plone/roadmap">Roadmap</a></dd><dd><a href="http://dev.plone.org/plone">Report bugs in Plone</a></dd><dd><a href="http://dev.plone.org/plone.org">Report website issues</a></dd><dd><a href="http://dev.plone.org/plone/timeline">Latest changes</a></dd><dd><a href="http://dev.plone.org/plone/browser">Browse source</a></dd><dd><a href="http://dev.plone.org/plone">Contribute to Plone</a></dd><dd><a href="http://planet.plone.org/">Community blogs</a></dd></dl><dl><dt><a href="http://plone.org/foundation">Plone Foundation</a></dt><dd><a href="http://plone.org/foundation/foundation-donations">Donate</a></dd><dd><a href="http://plone.org/foundation/donors">Sponsors</a></dd><dd><a href="http://plone.org/foundation/meetings/minutes">Meeting minutes</a></dd><dd><a href="http://plone.org/team/FoundationBoard">Current board</a></dd><dd><a href="http://plone.org/foundation/members">Foundation members</a></dd><dd><a href="http://plone.org/foundation/membership">Apply for membership</a></dd><dd><a href="http://plone.org/foundation#contact">Contact</a></dd></dl><dl><dt><a href="http://plone.org/support">Support</a></dt><dd><a href="http://plone.net/providers">Commercial services</a></dd><dd><a href="http://plone.org/support/chat">Chat room</a></dd><dd><a href="http://plone.org/support/forums">Forums</a></dd><dd><a href="http://plone.org/support/for">Sector-specific forums</a></dd><dd><a href="http://plone.org/support/region">Region-specific forums</a></dd><dd><a href="http://plone.org/support/local-user-groups">Local user groups</a></dd><dd><a href="http://plone.org/events/training">Training</a></dd></dl></div></div></div><script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1907133-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script></body></html>